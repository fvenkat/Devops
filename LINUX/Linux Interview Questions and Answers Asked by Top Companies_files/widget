var $ZSIQLSDB=$ZSIQLSDB||function(){var checkStorageAvailability=function(storagename){try{return window[storagename].setItem("test","1"),window[storagename].removeItem("test"),!!window[storagename]}catch(e){return!1}},$ZSIQ_ISSESSIONSTORAGE=checkStorageAvailability("sessionStorage"),$ZSIQ_ISLOCALSTORAGE=checkStorageAvailability("localStorage");return{set:function(key,value,expiry){if($ZSIQLSDB.isLocalStorageAvail())try{this.storeInLocalStorage(key,value,expiry)}catch(exp){$ZSIQCookie.set(key,$ZSIQLSDB.toString(value),expiry)}else $ZSIQCookie.set(key,$ZSIQLSDB.toString(value),expiry)},storeInLocalStorage:function(key,value,expiry){var data=JSON.parse(localStorage.siqlsdb||"{}");expiry&&(value.ttl=expiry,value.time=(new Date).getTime()),value=$ZSIQLSDB.toString(value),data[key]=value,localStorage.siqlsdb=JSON.stringify(data)},isLocalStorageAvail:function(){return $ZSIQ_ISLOCALSTORAGE},get:function(key){return $ZSIQLSDB.isLocalStorageAvail()&&$ZSIQLSDB.getFromLocalStorage(key)||$ZSIQUtil.parseToJSON($ZSIQCookie.get(key))},isSessionStorageAvail:function(){return $ZSIQ_ISSESSIONSTORAGE},storeInSession:function(key,value){if(!this.isSessionStorageAvail())return!1;var data=$ZSIQUtil.parseToJSON(sessionStorage.utsdb||"{}");return data[key]=value,sessionStorage.utsdb=JSON.stringify(data),!0},getFromSession:function(key){if(this.isSessionStorageAvail())return $ZSIQUtil.parseToJSON(sessionStorage.utsdb||"{}")[key]},getFromLocalStorage:function(key){var value=$ZSIQUtil.parseToJSON(localStorage.siqlsdb||"{}")[key];if(!value)return null;try{if((value=$ZSIQUtil.parseToJSON(value)).ttl&&value.ttl+value.time<(new Date).getTime())return $ZSIQLSDB.remove(key),null}catch(exp){LSDebugger.postDebugInfo("Value: "+value+"Key"+key,null,null,!0)}return value},remove:function(key){if($ZSIQLSDB.isLocalStorageAvail())try{var data=$ZSIQUtil.parseToJSON(localStorage.siqlsdb||"{}");data[key]&&delete data[key],localStorage.siqlsdb=JSON.stringify(data)}catch(exp){$ZSIQCookie.remove(key)}else $ZSIQCookie.remove(key)},removeSessionStore:function(key){if(this.isSessionStorageAvail())try{var data=JSON.parse(sessionStorage.utsdb||"{}");data[key]&&(delete data[key],sessionStorage.utsdb=JSON.stringify(data))}catch(exp){}},toString:function(obj){if(!obj)return obj;try{return message=obj,Object.toJSON?Object.toJSON(message):JSON.stringify(message)}catch(e){var val,json=[];for(var d in obj)val=obj[d].replace('"','\\"'),json.push('"'+d+'":"'+val+'"');return"{"+json+"}"}var message}}}();var $ZSIQCookie=$ZSIQCookie||{get:function(key){key+="=";var init=document.cookie.indexOf(key),value="";return-1!=init&&-1!=(value=document.cookie.substr(init+key.length)).indexOf(";")&&(value=value.substring(0,value.indexOf(";"))),decodeURIComponent(value)},set:function(key,value,expiryTime,isdomaincookie){var expDate=new Date;return null!=expiryTime&&""!=expiryTime||(expiryTime=18e4),expDate.setTime(expDate.getTime()+expiryTime),key+="= "+encodeURIComponent(value)+";expires= "+expDate.toGMTString()+";",isdomaincookie&&(key+="path=/;"),document.cookie=key,!0},remove:function(key){var expDate=new Date;expDate.setTime(expDate.getTime()-1),document.cookie=key+"=;expires="+expDate.toGMTString()+";"}};try{_ZSIQ=window._ZSIQ||{JSAPI:{}},$ZSIQAnalytics={},$ZSIQAutopick={},_ZSIQ.isagentschat||($zohosq=$zoho.livedesk||$zoho.salesiq,$zohosq._callbacks={},$zcb=$zohosq._callbacks,$zv=$zohosq.values,$zlm={},$zlch={},$zla="handleAnalyticEvents",$zohosq.utsvalues={},$ZSIQ_UTSinitialized=null),$zohosq._invoke=function(type,data){for(var key in $ZSIQAnalytics)if($ZSIQAnalytics.hasOwnProperty(key)){var val=$ZSIQAnalytics[key];$ZShandleEvent(type,data,val)}if($zcb[type]&&"function"==typeof $zcb[type]){if("object"!=typeof data){if($zlm[type]===data)return!1;$zlm[type]=data}var returnvalue;if(data.visitid)returnvalue=$zcb[type](data.visitid,data);else{if("visitor.trigger"===type)return $zcb[type](data.triggername,data.visitorinfo);returnvalue=$zcb[type](data)}returnvalue=null!=returnvalue?returnvalue:-1;var obj={};obj[type]=returnvalue,$zlch[type]&&$zohosq.setValue("callback",obj),$zlm[type]={}}else"custom.field"==type&&$zohosq.customfield.handleCallbacks(data);return!1},$zohosq.visitor={referer:function(value){return value&&value.trim()&&$zohosq.setValue("referer",value,3),$zv.referer},cpage:function(value){return value&&value.trim()&&$zohosq.setValue("cpage",value,3),$zv.cpage},pagetitle:function(value){return value&&value.trim()&&$zohosq.setValue("pagetitle",value,3),$zv.pagetitle},customaction:function(field,value){if(field&&0!=field.trim().length&&!$ZSisThresholdExceeded("ca",50)){var obj={};obj.field=field,obj.value=value||{},$zv.customaction=obj,$ZNotifyTracking(4,obj)}},uniqueid:function(){return $zv.uvid},name:function(value){return value&&value.trim()&&$zohosq.setValue("name",value,3),$zv.name},email:function(value){if(null!=value&&/^([\w]([\w\-\.\+\'\/]*)@([\w\-\.]*)(\.[a-zA-Z]{2,22}(\.[a-zA-Z]{2}){0,2}))$/.test(value))return $zohosq.setValue("email",value,3),$zv.email},id:function(value){return value&&value.trim()&&$zohosq.setValue("id",value),$ZSIQUtil.getAPIValues().id=value,$zv.id},question:function(value){return null!=value&&$zohosq.setValue("question",value),$zv.question},contactnumber:function(value){return null!=value&&$ZSIQUtil.isValidPhoneNo(value)&&$zohosq.setValue("phone",value,3),$zv.phone},info:function(object){return object&&($zv.info=object),$zohosq.setValue("info",$zv.info,3),$zv.info},authkey:function(value){return value&&($zv.authkey=value),$zv.authkey},chat:function(clbk){$zcb["visitor.chat"]=clbk},attend:function(clbk){$zcb["visitor.attend"]=clbk},missed:function(clbk){$zcb["visitor.missed"]=clbk},agentsoffline:function(clbk){$zcb["visitor.offline"]=clbk},offlineMessage:function(clbk){$zcb["visitor.offline"]=clbk},chatmessage:function(clbk){$zcb["visitor.chatmessage"]=clbk},chatcomplete:function(clbk){$zcb["visitor.chatcomplete"]=clbk},rating:function(clbk){$zcb["visitor.rating"]=clbk},feedback:function(clbk){$zcb["visitor.feedback"]=clbk},idleTime:function(value){isNaN(value)||($zv.idletime=value,$ZNotifyTracking(2,value))},idle:function(clbk){$zcb["visitor.idle"]=clbk},active:function(clbk){$zcb["visitor.active"]=clbk},onNavigate:function(obj){return obj},trigger:function(clbk){$zcb["visitor.trigger"]=clbk},triggeredchat:function(clbk){$zcb["visitor.triggeredchat"]=clbk},ongoingchat:function(){return-1!=$ZSIQUtil.getIframe().$Support.EmbedObj.chatID},getGeoDetails:function(){$zv.fetchgeolocation=!0}},$zohosq.chat={mode:function(value){return null!=value&&$zohosq.setValue("chatmode",value),$zv.chatmode},sendmessage:function(value){Float&&value&&Float.sendMessage(value)},department:function(value){return null!=value&&$zohosq.setValue("department",value),$zv.department},defaultdepartment:function(value){return value&&($zv.defaultdepartment=value),$zv.defaultdepartment},agent:function(value){return null!=value&&$zohosq.setValue("agent",value),$zv.agent},messages:function(object){return object&&($zv.chatmessages=object),$zv.chatmessages},systemmessages:function(object){return object&&($zv.chatmessages=object),$zv.chatmessages},title:function(value,styleobj){return value&&($zv.title=value),"[object Object]"===Object.prototype.toString.call(styleobj)&&($zv.titlestyle=styleobj),$zv.title},messagehint:function(value){return value&&($zv.messagehint=value),$zv.messagehint},online:function(clbk){$zcb["chat.online"]=clbk},offline:function(clbk){$zcb["chat.offline"]=clbk},logo:function(value,url){return value&&($zv.clogo=value),url&&($zv.cwebsite=url),$zv.clogo},waitinghandler:function(clbk){var a="chat.waitinghandler";$zcb[a]=$zlch[a]=clbk,$zv[a]=null!=clbk},start:function(){_ZSIQ.JSAPI.broadcastMessage("chatstart",{})},forward:function(value){return null!=value&&$zohosq.setValue("forward",value),$zv.forward},attend:function(clbk){$zcb["visitor.attend"]=clbk},agentMessage:function(clbk){$zcb["visitor.chatmessage"]=clbk},triggerMessage:function(clbk){$zv.triggermsg=!0,$zcb["visitor.chattrigger"]=clbk},complete:function(clbk){clbk?$zcb["visitor.chatcomplete"]=clbk:_ZSIQ.JSAPI.broadcastMessage("chatend",{})},missed:function(clbk){$zcb["visitor.missed"]=clbk},theme:function(theme){!function(theme){if(!theme)return;$zv.buttontheme=theme+"-btn",$zv.sbonlinebg="",$zv.sbonlinebdr="",$zv.sbicobg=""}(theme),function(theme){if(!theme)return;var thememap={black:["blck","black"],gray:["gry","gray"],blue:["blue","blue"],green:["green","green"],red:["red","red"],purple:["purple","purple"]};thememap.hasOwnProperty(theme)?($zv.embedtheme=thememap[theme][0],$zv.embedheadertheme=thememap[theme][1]):$zv.embedtheme=theme}(theme)},floatingwindow:function(val){$zv.forcefloatingwindow="all"===val||!("ipad"===val&&/ipad/.test(navigator.userAgent.toLowerCase()))},transferchat:function(clbk){$zcb["agent.transferchat"]=clbk},accepttransfer:function(clbk){$zcb["agent.accepttransfer"]=clbk},waitime:function(val){val&&($zv.waitime=val)}},$zohosq.call={start:function(){_ZSIQ.JSAPI.broadcastMessage("callstart",{})},isavsupported:function(clbk){$zcb["call.isavsupported"]=clbk},attended:function(clbk){$zcb["call.attended"]=clbk},completed:function(clbk){$zcb["call.completed"]=clbk},missed:function(clbk){$zcb["call.missed"]=clbk},cancelled:function(clbk){$zcb["call.cancelled"]=clbk}},$zohosq.rating={visible:function(value){return value&&($zv["rating.visible"]=value),$zv["rating.visible"]}},$zohosq.feedback={visible:function(value){return value&&($zv["feedback.visible"]=value),$zv["feedback.visible"]}},$zohosq.integ={requestid:function(value){return null!=value&&$zohosq.setValue("requestid",value),$zv.requestid}},$zohosq.chatbubble={visible:function(value){return value&&($zv.bubblevisible=value),$zv.bubblevisible},animate:function(value){return value&&($zv.bubbleanimatetimer=value),$zv.bubbleanimatetimer},src:function(value){return value&&($zv.bubblesrc=value),$zv.bubblesrc},close:function(clbk){$zcb["chatbubble.close"]=clbk}},$zohosq.chatbutton={texts:function(object){return object&&($zv.buttontexts=object),$zv.buttontexts},icon:function(value){return value&&($zv.buttonicon=value),$zv.buttonicon},visible:function(value){value&&($zv.buttonvisible=value);try{zhandleLiveEvent("buttonvisible",value)}catch(e){}return $zv.buttonvisible},onlineicon:{src:function(value){return value&&($zv.buttononlineicon=value),$zv.buttononlineicon}},offlineicon:{src:function(value){return value&&($zv.buttonofflineicon=value),$zv.buttonofflineicon}},click:function(clbk){$zcb["chatbutton.click"]=clbk},width:function(value){return value&&($zv.bwidth=value),$zv.bwidth}},$zohosq.floatbutton={position:function(value){return value&&($zv.floatposition=value),$zv.floatposition},visible:function(value){value&&($zv.floatvisible=value);try{$ZSIQWidget&&$ZSIQWidgetUI.handleWidgetVisible(value)}catch(e){}return $zv.floatvisible},onlineicon:{src:function(value){return value&&($zv.floatbuttononlinesrc=value),$zv.floatbuttononlinesrc}},offlineicon:{src:function(value){return value&&($zv.floatbuttonofflinesrc=value),$zv.floatbuttonofflinesrc}},click:function(clbk){$zcb["floatbutton.click"]=clbk}},$zohosq.chatwindow={visible:function(value){value&&($zv.chatwindowvisible=value);try{zhandleLiveEvent("chatwindowvisible",value)}catch(e){}return $zv.chatwindowvisible}},$zohosq.floatwindow={visible:function(value,isdefaultview,type){value&&($zv.floatwindowvisible=value);try{$ZSIQWidget&&$ZSIQChatWindow.handleChatWindowVisible(value,!1,isdefaultview,type)}catch(e){}return $zv.floatwindowvisible},open:function(clbk){clbk?$zcb["chat.open"]=clbk:this.visible("show")},close:function(clbk){clbk?$zcb["chat.close"]=clbk:this.visible("hide")},minimize:function(clbk){if(clbk)$zcb["floatwindow.minimize"]=clbk;else try{$ZSIQChatWindow.minimizeChatWindow(!0)}catch(e){}},onlinetitle:function(value){return null!=value&&($zv.floatwindowonlinetitle=value),$zv.floatwindowonlinetitle},offlinetitle:function(value){return null!=value&&($zv.floatwindowofflinetitle=value),$zv.floatwindowofflinetitle},fields:function(value){return null!=value&&($zv.floatwindowfields=value),$zv.floatwindowfields},defaultview:function(value){return null!=value&&($zv.defaultview=value),$zv.defaultview}},$zohosq.custom={html:function(container,object){if(container&&object){$zv.customhtml=[container,object];try{Float.drawFloatButtonHtml($zv.customhtml)}catch(e){try{zlsDrawButtonHtml($zv.customhtml)}catch(x){}}}return $zv.floatbuttondraw}},$zohosq.customfield={add:function(value){var a="customfield";if(value){var arr=$zv[a]=$zv[a]||[];this._splice([value.name],arr),$zv[a].push(value),_ZSIQ.JSAPI.broadcastMessage(a,$zv[a])}},clear:function(value){var a="customfield";value||($zv[a]=[],value=[]),"[object Array]"===Object.prototype.toString.call(value)&&this._splice(value,$zv[a]||[])},handleCallbacks:function(data){if(data){var cfobj=this._getObject(data.name);cfobj&&cfobj.callback&&cfobj.callback(data.val)}},_getObject:function(name){var cfobj=$zv.customfield;if(cfobj&&!(cfobj.length<1))for(var i=0;i<cfobj.length;i++)if(cfobj[i].name==name)return cfobj[i]},_splice:function(value,arr){for(var i=0;i<value.length;i++)for(var j=0;j<arr.length;j++)if(arr[j].name==value[i]){arr.splice(j,1),_ZSIQ.JSAPI.broadcastMessage("clearcustomfield",[value[i]]);break}}},$zohosq.tracking={on:function(){$zv.tracking="on",$ZSIQUtil.getAPIValues().tracking="on",$ZNotifyTracking(1,"on")},off:function(){$zv.tracking="off",$ZSIQUtil.getAPIValues().tracking="off",$ZNotifyTracking(1,"off")},domain:function(domain){var hostname=window.location.hostname;domain&&-1!==hostname.indexOf(domain,hostname.length-domain.length)&&($zohosq.utsvalues.trackingdomain=domain)}},$zohosq.language=function(value){return value&&($zv.language=value),$zv.language},$zohosq.personalize={agentorder:function(value){return null!=value&&$zohosq.setValue("agentorder",value),$zv.agentorder}},$zohosq.set=function(object){for(var d in object)try{for(var s=d.split("."),func=this[s[0]],i=1;i<s.length;i++)s[i]&&(func=func[s[i]]);"function"==typeof func&&func(object[d])}catch(e){}},$zohosq.setValue=function(type,value,operation){if(null!=value&&type&&($zv[type]=value,_ZSIQ.JSAPI.broadcastMessage(type,value),operation)){var obj={};obj[type]=value,$ZNotifyTracking(operation,obj)}},$zoho.ld={},$zoho.ld.handle={customClick:function(status){var carr=$zohosq.values.customhtml;if(!carr)return!1;var func=carr[1][status+".click"];if("function"==typeof func)func();else try{$ZSIQChatWindow.openChatWindow()}catch(e){try{zlsHandleCustomClick()}catch(e){}}}},$zohosq.privacy={trackingbannercontent:function(textobj){return textobj&&($zv.trackbannerobj=textobj),$zv.trackbannerobj},chatbannercontent:function(textobj){return textobj&&($zv.textbannerobj=textobj),$zv.textbannerobj}}}catch(e){}$ZSisThresholdExceeded=function(sessionkey,threshold){var key=Math.floor((new Date).getTime()/6e4);if(key=sessionkey+"_"+key,"undefined"==typeof $ZSIQUTS)return!1;var value=$UTSHandler.getFromSession(key);return value||(value=0),$UTSHandler.storeInSession(key,++value),threshold<value},$ZNotifyTracking=window.$ZNotifyTracking||function(operation,value){if($ZSIQ_UTSinitialized)try{$UTSHandler.handleApiChange(operation,value)}catch(e){}},$ZShandleEvent=window.$ZShandleEvent||function(event,data,analytics){try{$zohosq.handleAnalyticEvents(event,data,analytics)}catch(e){}},_ZSIQ.JSAPI.broadcastMessage=window._ZSIQ.JSAPI.broadcastMessage||function(type,value){if($ZSIQ_UTSinitialized)try{var iframe=$ZSIQUtil.getIframe(),apiobj={};apiobj[type]=value,iframe.$Support.handleApiData(apiobj,!0)}catch(e){}try{AgentsChat.broadcastMessage(type,value)}catch(e){}try{zlsWinBroadcastMessage(type,value)}catch(e){}try{zlsBtnBroadcastMessage(type,value)}catch(e){}},_ZSIQ.JSAPI.identifySIQParam=window._ZSIQ.JSAPI.identifySIQParam||function(){var url,query,anchor,urldecode=function(str){return decodeURIComponent((str+"").replace(/\+/g,"%20"))};try{var wparams={};if(!(param=window.location.search))return;for(var param,params_array=(param=param.replace(/^\?/g,"")).split("&"),temp=[],i=0;i<params_array.length;i++)wparams[urldecode((temp=params_array[i].split("="))[0])]=urldecode(temp[1]);null!=wparams.siq_email?$zohosq.visitor.email(wparams.siq_email):null!=wparams.om_email&&$zohosq.visitor.email(wparams.om_email),null!=wparams.siq_name?$zohosq.visitor.name(wparams.siq_name):null!=wparams.om_name&&$zohosq.visitor.name(wparams.om_name),url=location.href.split("?")[0],query=location.search,anchor=location.hash,query&&(url+=(query=(query=(query=query.replace(/^\?/g,"")).replace(/(^|&)siq_(name|email)=[^&]*/g,"")).replace(/^&/g,""))?"?"+query+anchor:anchor,window.history.replaceState(window.history.state,"",url))}catch(e){}};try{var $zsalobj=window.$zsalobj||{};$zohosq.init=function(){$zsalobj&&0==Object.keys($zsalobj).length&&($zsalobj={"chatbutton.click":["Button Clicked","Click on the "+_ZSIQ.brandname+" SalesIQ chat button."],"floatbutton.click":["Button Clicked","Click on the "+_ZSIQ.brandname+"SalesIQ chat button."],"chat.close":["Chat Closed","Click on the Close (X) icon in the chat window."],"floatwindow.minimize":["Chat Minimized","Click to minimize the "+_ZSIQ.brandname+"SalesIQ chat window."],"chatbubble.close":["Bubble Closed","Click on the Close(X) icon on the chat bubble."],"visitor.attend":["Chat Connected","Chat sessions with the visitors.","waitingduration"],"visitor.chatcomplete":["Chat Ended","Chat ended by the visitors.","chatduration"],"chat.file":["File Transferred","File transfers made by the visitors."],"chat.print":["Chat Printed","Chat transcripts printed by the visitors."],"chat.mail":["Chat Mail sent","Chat transcripts emailed by the visitor."],"visitor.rating":["Rating Submitted","Rating submitted by visitors.","rating"],"visitor.feedback":["Feedback Submitted","Feedback messages submitted by visitors."],"visitor.chattrigger":["Chat Triggerred","Auto and proactive chat initiated to the visitors."],"visitor.triggerresponded":["Trigger Responded","Visitor responded to trigger or proactive chat."],"visitor.chat":["Chat Initiated","Visitor initiated chats."],"visitor.offline":["Offline Message Submitted","Offline messages submitted by the visitors."],"visitor.missed":["Chat Missed","Chat missed by the SalesIQ users."],"chat.visitorend":["Chat Ended by visitor","Chats ended by the visitors."]})},$zohosq.handleAnalyticEvents=window.$zohosq.handleAnalyticEvents||function(event,data,analytics){var val=$zsalobj[event];if(val){var evntval=data[val[2]];if(evntval&&(evntval=parseInt(evntval)),1==analytics)try{"function"==typeof gtag?3===val.length?gtag("event",val[0],{event_category:"SalesIQ",event_label:val[1],value:evntval}):gtag("event",val[0],{event_category:"SalesIQ",event_label:val[1]}):"function"==typeof ga?3===val.length?ga("send","event","Sales IQ",val[0],val[1],evntval):ga("send","event","Sales IQ",val[0],val[1]):"undefined"!=typeof _gaq&&(3===val.length?_gaq.push(["_trackEvent","Sales IQ",val[0],val[1],evntval]):_gaq.push(["_trackEvent","Sales IQ",val[0],val[1]]))}catch(e){}else if(2==analytics)3===val.length?clicky.log("Sales IQ-"+val[0]+"-"+evntval):clicky.log("Sales IQ-"+val[0]);else if(3==analytics){if(3===val.length)(obj={})[val[1]]=evntval,_kmq.push(["record","Sales IQ "+val[0],obj]);else _kmq.push(["record","Sales IQ "+val[0]])}else if(4==analytics){if(3===val.length)(obj={})[val[1]]=evntval,window.optimizely.push(["trackEvent","Sales IQ "+val[0],obj]);else window.optimizely.push(["trackEvent","Sales IQ "+val[0]])}else if(5==analytics){if(3===val.length)(obj={})[val[1]]=evntval,woopra.track("Sales IQ "+val[0],obj);else woopra.track("Sales IQ "+val[0])}else if(6==analytics)3===val.length?_paq.push(["trackEvent","Sales IQ",val[0],"",evntval]):_paq.push(["trackEvent","Sales IQ",val[0]]);else if(7==analytics){if(3===val.length)(obj={})[val[1]]=evntval,mixpanel.track("Sales IQ "+val[0],obj);else mixpanel.track("Sales IQ "+val[0])}else if(8==analytics){var obj;if(3===val.length)(obj={})[val[1]]=evntval,_hsq.push(["trackEvent","Sales IQ "+val[0],obj]);else _hsq.push(["trackEvent","Sales IQ "+val[0]])}else if(9==analytics){var pushobj={event:"Sales IQ Events",category:"Sales IQ",action:val[0],label:val[1],value:0};3===val.length&&(pushobj.value=evntval),dataLayer.push(pushobj)}}}}catch(e){}var $ZSIQUtil=$ZSIQUtil||function(){var blinktimer,langlist=["en","ar","da","de","el","es","fr","ga","he","hu","it","iw","ja","ko","nb","nl","pl","pt","pt_PT","ro","ru","sv","th","tr","zh","hr","cs","sk","sl"],FONT_FACE_LIST={0:"inherit",1:"salesiq-font",2:"ZSIQ Open Sans",3:"ZSIQ Oxygen",4:"ZSIQ Roboto"},apivalues={},istitleblinking=!1,documenttitle="",urlparams=null;return{STATUS_ENABLE:1,STATUS_DISABLE:0,initializeAPIValues:function(){_ZSIQ.JSAPI.identifySIQParam();try{$zohosq.internalready(),apivalues=$zohosq.values}catch(e){}try{if($zohosq.ready(),apivalues&&$zohosq.values)for(var setvaluekey in $zohosq.values)apivalues[setvaluekey]=$zohosq.values[setvaluekey];else apivalues=$zohosq.values;apivalues.uvid=$UTSHandler.get("_zldt")}catch(e){}},getAPIValues:function(){return apivalues},isCSSTransformSupport:function(){try{for(var prefixes="transform WebkitTransform MozTransform OTransform msTransform".split(" "),div=document.createElement("div"),i=0;i<prefixes.length;i++)if(div&&void 0!==div.style[prefixes[i]])return prefixes[i]}catch(e){return!1}return!1},onCDNFailure:function(elem){var cssstaticserver=$ZSIQWidget.getWidgetObject().cssstaticserver,jsstaticserver=$ZSIQChat.getWidgetData().jsstaticserver,resourceType="",match=(elem.href?elem.href:elem.src).match(/\.([^.]+)$/);match&&(resourceType=match[1]),"js"==resourceType?(link=document.createElement("script"),link.src=jsstaticserver):"css"==resourceType&&(link=document.createElement("link"),link.rel="stylesheet",link.href=cssstaticserver,link.type="text/css"),document.getElementsByTagName("head")[0].appendChild(link)},getSourceID:function(){window.addEventListener("message",function(p){p.data.message&&"ZOHOSALESIQ-SCEEN-SOURCE-ID"===p.data.message.type&&($ZSIQUtil.getIframe().avimpl.screen_id=p.data.message.data,$ZSIQUtil.getIframe().avaction.constraints.SCREEN_SHARE.video.mandatory.chromeMediaSourceId=$ZSIQUtil.getIframe().avimpl.screen_id,$ZSIQUtil.getIframe().avaction.checkMediaPermission())}),window.postMessage({requestId:"get_sourceId",message:"ZOHOSALESIQ-GET-SCREEN-SOURCEID"},"*")},fadeInAnimate:function(targetdiv,time){var dispopacity=0,timer=setInterval(function(){1<=dispopacity&&(clearInterval(timer),targetdiv.style.display=""),dispopacity+=.1,targetdiv.style.opacity=dispopacity},time)},fadeOutAnimate:function(targetdiv,time,clbck){var dispopacity=1,timer=setInterval(function(){dispopacity<=0&&(clearInterval(timer),targetdiv.style.display="none",clbck&&clbck()),dispopacity-=.1,targetdiv.style.opacity=dispopacity},time)},storeCookieVal:function(key,value,istimer){var expDate=new Date,timeval=5;0==istimer&&(timeval=1440),expDate.setTime((new Date).getTime()+60*timeval*1e3);var cookie="zld"+$ZSIQWidget.getWidgetObject().lsid+key+"="+escape(value)+";expires= "+expDate.toGMTString()+";path=/";try{var domain=function(){var domain=$zohosq.utsvalues.trackingdomain;return domain||(domain=location.hostname.toString().replace(/^w{3}\./,""),/^[a-zA-Z0-9-\.]+$/.test(domain)||(domain="")),domain||""}();cookie+=domain?";domain="+domain:""}catch(e){}document.cookie=cookie},getCookieValue:function(key){key="zld"+$ZSIQWidget.getWidgetObject().lsid+key;var init=document.cookie.indexOf(key),cookielength=document.cookie.length;if(-1==init)return"";var beginIndex=init+key.length,check=unescape(document.cookie.substr(beginIndex+1,cookielength).split(";")[0]);return"state"==check&&alert("state found"),check},containsClass:function(element,classname){return!!element&&(element.classList?element.classList.contains(classname):new RegExp("(^| )"+classname+"( |$)","gi").test(element.classname))},bindClickEvent:function(element,cbck){window.addEventListener?element.addEventListener("click",cbck):element.attachEvent("onclick",cbck)},bindFocusEvent:function(element,cbck){window.addEventListener?element.addEventListener("focus",cbck):element.attachEvent("onfocus",cbck)},getBrowserLanguage:function(){for(var lang="",userlang=[(document.documentElement.lang||"").replace(/-/g,"_"),(navigator.language||navigator.userLanguage||"").replace(/-/g,"_")],i=0;i<userlang.length;i++){var u_lang=userlang[i];if(u_lang)return lang=u_lang.split("_")[0],-1<langlist.indexOf(u_lang)?u_lang:-1<langlist.indexOf(lang)?lang:""}},getAPILanguage:function(){return api_lang=($ZSIQUtil.getAPIValues().language||"").replace(/-/g,"_")},isFetchGeoDetails:function(){return 1==$ZSIQUtil.getAPIValues().fetchgeolocation},startAfterReady:function(data){try{if($zohosq.afterReady(data),apivalues&&$zohosq.values)for(var setvaluekey in $zohosq.values)apivalues[setvaluekey]=$zohosq.values[setvaluekey];else apivalues=$zohosq.values;apivalues.uvid=$UTSHandler.get("_zldt")}catch(e){}},getAPIVisitorID:function(){return $ZSIQUtil.getAPIValues().id},getIframe:function(){var iframe=document.getElementById("siqiframe");return iframe.contentWindow||iframe.contentDocument.document||iframe.contentDocument},getConfigFromStorage:function(){var key="ZSIQ"+$zohosq.widgetcode+"data";if(key)return $ZSIQLSDB.get(key)},storeDetails:function(config){var key="ZSIQ"+$zohosq.widgetcode+"data";$ZSIQLSDB.set(key,config,864e5)},ajax:function(url,successfn,errorfn,isallowcredential){var successclbk=successfn||function(){},errorclbk=errorfn||function(){},xhttp=new XMLHttpRequest;if("withCredentials"in xhttp)xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status?successclbk(this.response):errorclbk(this.response)},xhttp.open("GET",url,!0),isallowcredential&&(xhttp.withCredentials=!0);else if("undefined"!=typeof XDomainRequest){xhttp=new XDomainRequest;try{xhttp.onload=function(){successclbk(this.response)},xhttp.onerror=function(){errorclbk(this.response)}}catch(e){}xhttp.open("GET",url),isallowcredential&&(xhttp.withCredentials=!0)}xhttp.send()},parseToJSON:function(value){try{if(!value||"object"==typeof value)return value;value=JSON.parse(value)}catch(e){}return value},setText:function(nodename,value){document.getElementsByTagName("body")[0];var node=document.getElementById(nodename);"textContent"in document.body?node.textContent=value:node.innerText=value},getWebFontFamily:function(){var ele=document.body,fontfamily="",floatobj=$ZSIQWidget.getWidgetObject();return floatobj.font[0]==$ZSIQUtil.STATUS_ENABLE&&floatobj.font[1].default&&"0"!=floatobj.font[1].default?fontfamily=FONT_FACE_LIST[""+floatobj.font[1].default]:ele.currentStyle?fontfamily=ele.currentStyle.fontFamily:document.defaultView&&(fontfamily=document.defaultView.getComputedStyle(ele,null).getPropertyValue("font-family")),fontfamily||"salesiq-font"},getImageURL:function(config,imgobj){var imgurl=window.location.protocol+"//"+$ZSIQWidget.getEmbedObject().embedserverurl+"/"+config.screenname+"/"+imgobj.fpath+"/photo.ls";return 1==imgobj.ispreview&&(imgurl+="?ispreview=true"),imgurl},blinkTitle:function(msg){if(!msg)return!1;istitleblinking||(documenttitle=document.title,istitleblinking=!0),clearTimeout(blinktimer);var cur_value,chatmsg="";blinktimer=setInterval(function(){"title"==cur_value?(chatmsg=msg,cur_value="chatmsg"):(chatmsg=documenttitle,cur_value="title"),document.title=chatmsg},500)},stopBlinking:function(){istitleblinking&&(clearTimeout(blinktimer),istitleblinking=!1,document.title=documenttitle)},setShrinkImageCSS:function(img,height,width){var imgaspobj=function(height,width,defaultheight,defaultwidth){var values={WIDTH:width,HEIGHT:height},aspctratio=[defaultwidth/width,defaultheight/height];return 1<(aspctratio=Math.min(aspctratio[0],aspctratio[1]))?values:values={WIDTH:width*aspctratio,HEIGHT:height*aspctratio}}(img.naturalHeight,img.naturalWidth,height,width);img.style.height=imgaspobj.HEIGHT+"px",img.style.width=imgaspobj.WIDTH+"px"},isValidPhoneNo:function(phoneno){return!!phoneno&&/^[+0-9A-Za-z():.\-\[\] ]{1,30}$/.test(phoneno)},getProductURLForImage:function(){if(!$ZSIQChat.getWidgetData().commondata.isdev)return"";var embed_data=$ZSIQChat.getWidgetData().embedobj;return embed_data.schema+"://"+embed_data.producturl},getURLParameterByName:function(name){if(urlparams)return urlparams[name];urlparams={};for(var params_array=window.location.search.replace(/^\?/g,"").split("&"),temp=[],i=0;i<params_array.length;i++)temp=params_array[i].split("="),urlparams[temp[0]]=temp[1];return urlparams[name]},linkifySubString:function(msg){try{msg=msg.replace(/((?:href|src)=["']?)?((https?:\/\/(?:www\.)?|www\.)[a-z0-9][^@]*?)(?=&quot;|&#x27;|&lt;|[\s"'<]|$)/gi,function($0,$1,$2,$3){var httplink="www."===$3?"http://"+$2:$2;window.location.protocol,$ZSIQWidget.getEmbedObject().embedserverurl;return $1?$0:"<a href='"+httplink+"' target='_blank' class='zsiq_hyperlink' >"+$2+"</a>"})}catch(exp){}return msg},isEmpty:function(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0},formWidgetObject:function(config){var widgetobj={};for(var key in config)widgetobj[key]=$ZSIQUtil.parseToJSON(config[key]);return $ZSIQAnalytics=widgetobj.analytics,$ZSIQAutopick=widgetobj.autopick,_ZSIQ.brandname=widgetobj.brandname,widgetobj},formEmbedObject:function(config){var embedobj={};for(var key in config)embedobj[key]=$ZSIQUtil.parseToJSON(config[key]);return embedobj},getObjectKeys:function(obj){if(Object.keys)return Object.keys(obj);var arr=[];for(var k in obj)obj.hasOwnProperty(k)&&arr.push(k);return arr},getGDPRBanner:function(config,pprops){var apivalues,banner_txt=pprops.trackingprivacystatement?pprops.trackingprivacystatement:config.i18nkeys["gdpr.banner.notify"],banner_btn_txt=config.i18nkeys["gdpr.banner.button.ok"],banner_donottrack_btn_txt=config.i18nkeys["gdpr.banner.button.donottrack"],learnmore_txt=(pprops.trackingprivacystatement?pprops.trackingprivacystatement:config.i18nkeys["gdpr.banner.donottrack"],config.i18nkeys["gdpr.banner.learnmore"]),istrackingdisabled=!((!(apivalues=$UTSHandler.getAPIValuesForUTS()).tracking||"off"!=apivalues.tracking)&&config.istracking),learnmorehtml="";if((apivalues=$ZSIQUtil.getAPIValues()).trackbannerobj){var trackbannerobj=apivalues.trackbannerobj;if(banner_txt=trackbannerobj.description&&0!=trackbannerobj.description.trim().length?trackbannerobj.description:banner_txt,banner_btn_txt=trackbannerobj.acceptbutton&&0!=trackbannerobj.acceptbutton.trim().length?trackbannerobj.acceptbutton:banner_btn_txt,banner_donottrack_btn_txt=trackbannerobj.declinebutton&&0!=trackbannerobj.declinebutton.trim().length?trackbannerobj.declinebutton:banner_donottrack_btn_txt,trackbannerobj.policytextandlink){var learnmoreobj=trackbannerobj.policytextandlink;learnmore_txt=learnmoreobj.text&&0!=learnmoreobj.text.trim().length?learnmoreobj.text:learnmore_txt,pprops.cookiepolicyurl=learnmoreobj.link&&0!=learnmoreobj.link.trim().length&&$ZSIQUtil.isValidURL(learnmoreobj.link)?learnmoreobj.link:pprops.cookiepolicyurl}}pprops.cookiepolicyurl&&(learnmorehtml="<a class='siq-lnmor' target='_blank' href='"+(-1==pprops.cookiepolicyurl.indexOf("http")?"http://"+pprops.cookiepolicyurl:pprops.cookiepolicyurl)+"'>"+learnmore_txt+"</a>");switch(JSON.parse(pprops.trackingprivacyconfig)){case 1:return"<div id='gdprbanner' class='siq-msgbanr'><span class='dib-mid'>"+banner_txt+learnmorehtml+"</span><div class='siq-clkoptn'><div class='siq-okbtn dib-mid' onclick=$ZSIQUtil.updateCookieForTracking(0,'"+pprops.trackingprivacyconfig+"') >"+banner_btn_txt+"</div></div></div>";case 2:return"<div id='gdprbanner' class='siq-msgbanr'><span class='dib-mid'>"+banner_txt+learnmorehtml+"</span><div class='siq-clkoptn'><div class='siq-okbtn dib-mid' onclick=$ZSIQUtil.updateCookieForTracking(0,'"+pprops.trackingprivacyconfig+"') >"+banner_btn_txt+"</div>"+(istrackingdisabled?"":"<div class='siq-trkbtn dib-mid'onclick=$ZSIQUtil.updateCookieForTracking(1,'"+pprops.trackingprivacyconfig+"') >"+banner_donottrack_btn_txt+"</div>")+"</div></div>"}},getGDPRBannerCookieKey:function(screenname){return"gdpr_"+(screenname=screenname||$ZSIQWidget.getWidgetObject().screenname)},updateCookieForTracking:function(trackstatus,trackingprivacyconfig){var key=$ZSIQUtil.getGDPRBannerCookieKey(),configkey=$ZSIQUtil.getGDPRBannerCookieKey();switch(key+="__donottrack",configkey+="_trackingconfig",trackstatus){case 0:$ZSIQCookie.set(key,0,2592e6,!1),$ZSIQCookie.set(configkey,trackingprivacyconfig,2592e6,!1),$ZSIQUtil.hideGDPRBanner(),$UTSHandler.init(!0);break;case 1:$ZSIQCookie.set(key,1,2592e6,!1),$ZSIQCookie.set(configkey,trackingprivacyconfig,2592e6,!1),$ZNotifyTracking(1,"off"),$ZSIQUtil.hideGDPRBanner()}},checkGDPRBannerStatus:function(options,screenname,embedobj){var trackingprivacyconfig=embedobj.pinfo.pinfo.trackingprivacyconfig,key=$ZSIQUtil.getGDPRBannerCookieKey(screenname);switch(options){case 0:var trackcookieval=$ZSIQCookie.get(key+"__donottrack"),trackcookieconfigval=$ZSIQCookie.get(key+"_trackingconfig");return 0!=trackcookieval.length&&trackcookieconfigval==trackingprivacyconfig;case 1:return 0==$ZSIQCookie.get(key+"__donottrack");case 2:return 1==$ZSIQCookie.get(key+"__donottrack")&&2==trackingprivacyconfig}return!1},hideGDPRBanner:function(){var gdprbannerdiv=document.getElementById("gdprbanner");$ZSIQWidgetUI.addClass(gdprbannerdiv,"gdprbanner_slide")},getGDPRPendingStatus:function(widgetdata,embedobj,screenname){var gdprpendingstatus=!1;try{if(embedobj.pinfo&&embedobj.pinfo.pinfo){var pinfo=embedobj.pinfo.pinfo,isgdprenabled=JSON.parse(pinfo.isgdprenabled),isembedgdpr=1==widgetdata.widgetobj.isgdprenabled,trackingprivacyconfig=pinfo.trackingprivacyconfig;isgdprenabled&&0!=trackingprivacyconfig&&!$ZSIQUtil.checkGDPRBannerStatus(0,screenname,embedobj)&&isembedgdpr&&(gdprpendingstatus=!0)}}catch(e){}return gdprpendingstatus},isValidURL:function(url){var urlregex=new RegExp(/^(((http|https):\/\/(www.){0,1})|www.){1}[a-zA-Z0-9]+[-a-zA-Z0-9@:/%_+.~#?&/=]*[^.]$/);return void 0!==url&&urlregex.test(url)},hyperLinksSubString:function(text,subtext,link){try{if(-1!==text.indexOf(subtext)&&0!=link.length){var totallength=text.length,subtextlength=subtext.length,consenttxt1=text.substring(0,text.indexOf(subtext)),consenttxt2=text.substring(text.indexOf(subtext),text.indexOf(subtext)+subtextlength),consenttxt3=text.substring(text.indexOf(subtext)+subtextlength,totallength);text=consenttxt1+(consenttxt2="<a class='siq-lnmor' target='_blank' href='"+(link=-1==link.indexOf("http")?"http://"+link:link)+"'>"+consenttxt2+"</a>")+consenttxt3}else 0!=link.length&&(text+=" <a class='siq-lnmor' target='_blank' href='"+(link=-1==link.indexOf("http")?"http://"+link:link)+"'>"+subtext+"</a>")}catch(e){}return text}}}();var $UTSHandler=$UTSHandler||function(){var cacheData=function(key,value){var existing_data,client_value={};client_value[key]=value;try{existing_data=$ZSIQUTS.getFromSession("utssynccache")||JSON.stringify([]),(existing_data=JSON.parse(existing_data)).push(client_value)}catch(e){existing_data=[]}$ZSIQUTS.storeInSession("utssynccache",JSON.stringify(existing_data))},triggerOperation=function(key,data){var current_data=data[key];switch(parseInt(key)){case 1:$UTSHandler.handleChatTriggers(current_data.type,current_data.data);break;case 2:$ZSIQChatWindow.openChatWindow(!0);break;case 3:$ZSIQWidgetUI.handleWidgetVisible("show");break;case 4:$ZSIQUTSAction.handleButtonGlow();break;case 5:$ZSIQUTSAction.handleAnimate();break;case 6:$ZSIQUtil.getIframe().$Support.setUVID(current_data.uvid);break;case 7:$UTSHandler.handleTrackChat(current_data.data);break;case 8:$UTSHandler.handleUTSConnect(current_data.data);break;case 9:$UTSHandler.handleBotHandler(current_data)}};return{notifyCustomEvent:function(data_to_be_sent){$ZSIQUTS.notifyCustomEvent(data_to_be_sent)},handleCustomEvent:function(data){switch(data.opr){case"BOTTRIGGER":try{$UTSHandler.handleBotHandler(data)}catch(e){cacheData(9,msgdata)}}},getUTSCachedata:function(){var cached_data=$ZSIQUTS.getFromSession("utssynccache");if(cached_data){for(var index in cached_data=JSON.parse(cached_data)){var current_data=cached_data[index];for(var current_key in current_data)triggerOperation(current_key,current_data)}$ZSIQUTS.storeInSession("utssynccache",JSON.stringify([]))}},storeInSession:function(key,value){$ZSIQUTS.storeInSession(key,value)},get:function(key){return $ZSIQUTS.get(key)},getFromSession:function(key){return $ZSIQUTS.getFromSession(key)},updateAction:function(val){$ZSIQUTS.updateAction(val)},handleApiChange:function(operation,val){$ZSIQUTS.handleApiChange(operation,val)},init:function(isoverride){$ZSIQUTS.init(isoverride)},getUTSActionData:function(){return $ZSIQUTSAction.getUTSActionData()},handleChatTriggers:function(type,data){var widgetdata=$ZSIQChat.getWidgetData();if(1!=$ZSIQUtil.formWidgetObject(widgetdata.widgetobj).hideembed)try{var apiobj=$ZSIQUtil.getAPIValues(),iframe=$ZSIQUtil.getIframe();iframe.$Support.istrigmsg&&apiobj.triggermsg&&$ZSIQWidgetUI.getWidgetState()!=$ZSIQWidgetUI.F_WINDOW?iframe.$Support.incrementUnreadCount():$ZSIQWidgetUI.setWidgetState($ZSIQWidgetUI.F_WINDOW),iframe.$Support.Util.handleTriggers(type,data)}catch(e){var client_value={};client_value.type=type,client_value.data=data,cacheData(1,client_value)}},openChatWindow:function(){try{$ZSIQChatWindow.openChatWindow(!0)}catch(e){cacheData(2,{})}$UTSHandler.updateAction({type:"1"})},showButton:function(){try{$ZSIQWidgetUI.handleWidgetVisible("show")}catch(e){cacheData(3,{})}},getFloatStatus:function(){try{return $ZSIQWidget.getWidgetStatus()}catch(e){var widgetdata=$ZSIQChat.getWidgetData();return $ZSIQUtil.formWidgetObject(widgetdata.widgetobj).status}},getFloatDiv:function(type){try{return $ZSIQWidgetUI.getWidgetDiv()}catch(e){return cacheData(type,{}),null}},getFloatState:function(){return $ZSIQWidgetUI.getWidgetState()},setUVID:function(uvid){$ZSIQUtil.getAPIValues().uvid=uvid;try{$ZSIQUtil.getIframe().$Support.setUVID(uvid)}catch(e){cacheData(6,{uvid:uvid})}$zv.uvid=uvid},getDomain:function(){var domain=$zohosq.utsvalues.trackingdomain;return domain||(domain=location.hostname.toString().replace(/^w{3}\./,""),/^[a-zA-Z0-9-\.]+$/.test(domain)||(domain="")),domain||""},handleTrackChat:function(data){try{var statecookieval=1==$ZSIQWidgetUI.getWidgetState()?$ZSIQWidgetUI.F_BUTTON:$ZSIQWidgetUI.F_WINDOW;$ZSIQWidgetUI.setWidgetState(statecookieval),$ZSIQUtil.getIframe().$Support.Util.handleTrackChat(data)}catch(e){var client_value={};client_value.data=data,cacheData(7,client_value)}},handleUTSConnect:function(data){try{$ZSIQUtil.getIframe().$Support.Util.handleUTSConnect(data)}catch(e){var client_value={};client_value.data=data,cacheData(8,client_value)}},handleBotHandler:function(data){try{var widgetdata=$ZSIQChat.getWidgetData();if(1==$ZSIQUtil.formWidgetObject(widgetdata.widgetobj).hideembed)return;var apiobj=$ZSIQUtil.getAPIValues(),iframe=$ZSIQUtil.getIframe();iframe.$Support.istrigmsg&&apiobj.triggermsg&&$ZSIQWidgetUI.getWidgetState()!=$ZSIQWidgetUI.F_WINDOW?iframe.$Support.incrementUnreadCount():$ZSIQWidgetUI.setWidgetState($ZSIQWidgetUI.F_WINDOW),iframe.$Support.Util.handleBotTriggers(data);var client_data=data.data;client_data.options&&(client_data.options=JSON.parse(client_data.options)),$ZSIQUtil.getIframe().$Support.handleBotTrigger({msg:client_data})}catch(e){cacheData(9,data)}},getAPIValuesForUTS:function(){var obj=$ZSIQUtil.getAPIValues(),widgetdata=$ZSIQChat.getWidgetData(),widgetobj=$ZSIQUtil.formWidgetObject(widgetdata.widgetobj);return obj.name=obj.name||widgetobj.visitorname,obj.email=obj.email||widgetobj.visitoremail,obj},setTrackedfrommailchimp:function(data){$ZSIQChat.istrackedfrommailchimp=data},isTrackedfrommailchimp:function(){return $ZSIQChat.istrackedfrommailchimp}}}();var $ZSIQUTS=$ZSIQUTS||function(window){var _embedname,_screenname,_utsserver,apivalues,_zldvfp,sid,UTSMODE_CORS=0,UTSMODE_WS=1,UTSMODE_SW=2,networkevent_OFFLINE=0,networkevent_ONLINE=1,networkevent_INIT=-1,_utsmode=UTSMODE_WS,getURLScheme=function(current_frame,is_ws){var httphack=is_ws?"ws":"http";return!current_frame&&current_frame.location?httphack+"://":current_frame.location.protocol?-1!=current_frame.location.protocol.indexOf("https")?httphack+"s://":httphack+"://":getURLScheme(current_frame.parent,is_ws)},uts={net:{},util:{},moninterval:1e4,source:""},setSource=function(source){uts.source=source+"_"+(new Date).getTime()},deviceinfo=(ua=navigator.userAgent,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+[^\s|\$]+)/i)||[],/trident/i.test(M[1])?"IE "+((tem=/\brv[ :]+(\d+)/g.exec(ua)||[])[1]||""):"Chrome"===M[1]&&null!=(tem=ua.match(/\b(OPR|Edge)\/(\d+)/))?tem.slice(1).join(" ").replace("OPR","Opera"):(M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(tem=ua.match(/[v|V]ersion\/(\d+[^\s|\$]+)/i))&&M.splice(1,1,tem[1]),M.join(" "))),disablews=!1;/ios 10.1/i.test(deviceinfo)&&(disablews=!0);uts.seqmsg={servercount:-1,clientcount:-1,isconnectionmade:!1,maxexpirytime:6e5,maxdelay:6e4},uts.seqmsg.init=function(seqno){seqno||0==seqno||(seqno=-1),uts.seqmsg.servercount=seqno,uts.seqmsg.getSequenceNo(),-1==uts.seqmsg.clientcount&&(uts.seqmsg.clientcount=seqno)},uts.seqmsg.getServerUpdatedcount=function(){return uts.seqmsg.servercount},uts.seqmsg.updateServerUpdatedcount=function(sequence_number){sequence_number||0==sequence_number||(uts.seqmsg.servercount=-1),uts.seqmsg.servercount=sequence_number},uts.seqmsg.getSequenceNo=function(){return-1==uts.seqmsg.clientcount&&(uts.seqmsg.clientcount=uts.seqmsgdb.getSequenceNumber(!0)),uts.seqmsg.clientcount},uts.seqmsg.incrementSequenceNo=function(){uts.seqmsg.clientcount++},uts.seqmsg.enroll=function(msg,isresend){if(uts.seqmsg.isconnectionmade){uts.seqmsg.incrementSequenceNo();var completeseqmsg=uts.seqmsgdb.getFromDB(),curremtmsg={};curremtmsg.data=msg,curremtmsg.time=(new Date).getTime()+uts.seqmsg.maxexpirytime,completeseqmsg[uts.seqmsg.clientcount]=curremtmsg,uts.seqmsgdb.updateInDB(completeseqmsg,uts.seqmsg.maxexpirytime)}},uts.seqmsg.resend=function(missedseq){if(uts.seqmsg.isconnectionmade){uts.seqmsg.clientcount,uts.seqmsgdb.getSequenceNumber(!1);for(var completeseqmsg=uts.seqmsgdb.getFromDB(),index=0;index<missedseq.length;index++){var seqno=missedseq[index];if(completeseqmsg[seqno]){var unupdated_msg=completeseqmsg[seqno].data;uts.notifier.sendData(unupdated_msg,void 0,!1),uts.seqmsg.clear(seqno)}}}},uts.seqmsg.clear=function(sequencenumber){var completeseqmsg=uts.seqmsgdb.getFromDB();sequencenumber?delete completeseqmsg[sequencenumber]:completeseqmsg={},uts.seqmsgdb.updateInDB(completeseqmsg,uts.seqmsg.maxexpirytime)},uts.seqmsgdb={},uts.seqmsgdb.getFromDB=function(sequencenumber){var seqmsgobj=$ZSIQUTS.getFromSession("seq_msgs")||"{}";return seqmsgobj=JSON.parse(seqmsgobj),sequencenumber?seqmsgobj[sequencenumber]||{}:seqmsgobj},uts.seqmsgdb.getSequenceNumber=function(ismax){var seqno,completeseqmsg=uts.seqmsgdb.getFromDB();for(var msgseqno in completeseqmsg)msgseqno=parseInt(msgseqno),seqno||(seqno=msgseqno),ismax?seqno<msgseqno&&(seqno=msgseqno):msgseqno<seqno&&(seqno=msgseqno);return seqno||-1},uts.seqmsgdb.updateInDB=function(value,expiry){$ZSIQUTS.storeInSession("seq_msgs",JSON.stringify(value),expiry)};var isSessionStorageAvailable=function(){try{return!!window.sessionStorage&&(sessionStorage.setItem("quota_test","1"),sessionStorage.removeItem("quota_test"),!0)}catch(e){}return!1},isLocalStorageAvailable=function(){try{return!!window.localStorage&&(localStorage.setItem("quota_test","1"),localStorage.removeItem("quota_test"),!0)}catch(e){}return!1},storeInCookie=function(key,value,expirytime){key=getModifiedKey(key);var expDate=new Date;expirytime=expirytime||864e5,expDate.setTime(expDate.getTime()+expirytime);var cookie=key+"= "+value+";expires= "+expDate.toGMTString();cookie+=";path=/";try{var domain=$UTSHandler.getDomain();cookie+=domain?";domain="+domain:""}catch(e){}document.cookie=cookie},storeInLocalStorage=function(key,value,expiry){if(!isLocalStorageAvailable())return!1;key=getModifiedKey(key);var data=JSON.parse(localStorage.utsdb||"{}"),obj={};return obj[key]=value,expiry&&(obj.ttl=expiry,obj.time=(new Date).getTime()),data[key]=obj,localStorage.utsdb=JSON.stringify(data),!0},getFromLocalStorage=function(key){if(!isLocalStorageAvailable())return!1;key=getModifiedKey(key);var data=JSON.parse(localStorage.utsdb||"{}"),obj=data[key];return obj?obj.ttl&&obj.ttl+obj.time<(new Date).getTime()?(delete data[key],localStorage.utsdb=JSON.stringify(data),null):obj[key]:null},getFromCookie=function(key){key=getModifiedKey(key),key+="=";var init=document.cookie.indexOf(key),value="";return-1!==init&&-1!==(value=document.cookie.substr(init+key.length)).indexOf(";")&&(value=value.substring(0,value.indexOf(";"))),value},getModifiedKey=function(key){return _screenname+"-"+key},isArray=function(data){return Array.isArray&&Array.isArray(data)||"[object Array]"===Object.prototype.toString.call(data)||"[object Array Iterator]"===Object.prototype.toString.call(data)},_zldt=null,_zldp=null,consecutivefailurecnt=0,disablebind=!1,isconnected=!1,initialized=!1,urlscheme=getURLScheme(window),triggeredevent=networkevent_INIT;uts.net={disabledbyserver:!1,fallbacktimer:-1,monitortimer:-1,reconnectwhenactive:!1,lpt:0,writeenabled:!1,connAlive:function(){uts.net.lpt=new Date},connMonitor:function(){SW.logFine("inside connMonitor");var currenttime=new Date;try{currenttime-uts.net.lpt>3*uts.moninterval&&(disablebind||isconnected?!1===disablebind&&(setSource("connMonitor_"+uts.moninterval),uts.net.reconnect()):uts.net.reconnect()),uts.util.dbconsistencychecked||uts.net.disabledbyserver||uts.util.checkConsistency()}finally{uts.net.scheduleMonitor()}},scheduleMonitor:function(){SW.logFine("inside scheduleMonitor"),clearTimeout(uts.net.monitortimer),uts.net.monitortimer=setTimeout(function(){uts.net.connMonitor()},uts.moninterval)},reconnect:function(){SW.logFine("inside reconnect - $ZUserStatus.isactive : "+$ZUserStatus.isactive),$ZUserStatus.isactive&&(uts.net.disableConnection(),uts.init())},scheduleFallback:function(){clearTimeout(uts.net.fallbacktimer),uts.net.fallbacktimer=setTimeout(uts.net.fallbackToCR,2e4)},unscheduleFallback:function(){clearTimeout(uts.net.fallbacktimer)},fallbackToCR:function(){WS._WEBSOCK.readyState===WS.readystate.OPEN&&WS.initialized||(WS.disableConnection(),CR.init())},handleUTSEvent:function(ev){var data=ev.d;switch(ev.o){case 0:WS.setInitialized(),uts.net.writeenabled=!0,uts.seqmsg.isconnectionmade=!0,uts.notifier.notifyQueued(),$UTSHandler.setUVID($ZSIQUTS.get("_zldt")),$ZSIQUTSAction.handle(data.triggers),initialized=!0,data.isnewconnection=!0,$ZHandler.handleConnect(data),$ZSIQUTSAction.includeBeforeSubmit(data),apivalues.customaction&&uts.notifier.updateCustomAction(apivalues.customaction),data.sseqno&&uts.seqmsg.init(parseInt(data.sseqno)),uts.notifier.identifyByCampaign(),uts.notifier.doLog(" isLocalstorage: "+isLocalStorageAvailable()+" isSessionStorage: "+isSessionStorageAvailable());break;case 1:WS.ping(),_zldp=data._zldp,_zldt=data._zldt,sid=data.sid,$ZSIQUTS.storeInSession("sid",sid),$UTSHandler.setUVID(_zldt),uts.net.writeenabled=!0,uts.seqmsg.isconnectionmade=!0,uts.notifier.notifyQueued(),initialized=!0,$ZHandler.handleConnect(data),$ZSIQUTSAction.handle(data.triggers),$ZSIQUTSAction.includeBeforeSubmit(data),data.sseqno&&uts.seqmsg.init(parseInt(data.sseqno)),$UTSHandler.isTrackedfrommailchimp()||uts.notifier.identifyByCampaign();break;case 2:_zldp=data._zldp,_zldt=data._zldt,sid=data.sid;try{_zldp=_zldp?_zldp.trim():_zldp,_zldt=_zldt?_zldt.trim():_zldt,sid=sid?sid.trim():sid,$ZSIQUTS.store("_zldp",_zldp,63072e6),$ZSIQUTS.store("_zldt",_zldt,864e5),$ZSIQUTS.storeInSession("sid",sid)}catch(e){}initialized=!0,uts.util.checkMode(UTSMODE_SW)||uts.notifier.acknowledge();break;case 3:$ZSIQUTSAction.handle(data.triggers);break;case 4:if(uts.util.checkMode(UTSMODE_SW))return;if(data&&data.seqno)return void uts.seqmsg.clear(data.seqno);if(data&&data.sseqno){if(uts.seqmsg.updateServerUpdatedcount(parseInt(data.sseqno)),data.missedseq){var missedseq=JSON.parse(data.missedseq);uts.seqmsg.resend(missedseq)}return}break;case 100:data.uvid=$ZSIQUTS.get("_zldt")||_zldt,$UTSHandler.handleTrackChat(data);break;case 101:null!=data.action&&"mailchimp"==data.action?storeInCookie("mailchimp",JSON.stringify({email:data.email,name:data.name})):$ZSIQUTSAction.handle(data.triggers);break;case 102:$UTSHandler.handleCustomEvent(data);break;case-1:if(uts.util.checkMode(UTSMODE_SW))return;data&&data.issidclear&&$ZSIQUTS.removeFromSession("sid");var duration=data&&data.duration||"";uts.net.disableConnection(duration),uts.net.disabledbyserver=!0}},handleResponse:function(data,isworkermsg){if(isconnected=!0,data)if((data=JSON.parse(data))&&data.seqno)uts.seqmsg.clear(data.seqno);else if(data&&data.sseqno){if(uts.seqmsg.updateServerUpdatedcount(parseInt(data.sseqno)),data.missedseq){var missedseq=JSON.parse(data.missedseq);uts.seqmsg.resend(missedseq)}}else if(!isworkermsg&&window.SharedWorker&&SW.sendResponseToOthers(data),isArray(data))for(var i=0;i<data.length;i++)this.handleUTSEvent(data[i]);else this.handleUTSEvent(data)},scheduleRecon:(reconnectiondelay=[30,60,90,120,300],index=0,callbacktimer=-1,function(initcountdown,callbackfn){var min,max;initcountdown?reconnectiondelay[index=0]=(min=5,max=30,Math.floor(Math.random()*(max-min+1)+min)):index<reconnectiondelay.length-1&&index++;var countdown=reconnectiondelay[index];setSource("scheduleRecon_"+countdown),clearTimeout(callbacktimer),callbacktimer=setTimeout(callbackfn,1e3*countdown)}),goOffline:function(){if(3<=consecutivefailurecnt||triggeredevent===networkevent_OFFLINE){3<consecutivefailurecnt&&(isconnected=!1);var init=!(disablebind=!0);3!==consecutivefailurecnt&&triggeredevent!==networkevent_OFFLINE||(init=!0),triggeredevent=networkevent_INIT,this.scheduleRecon(init,this.reconnect)}},requestSuccess:function(){(3<=consecutivefailurecnt||triggeredevent===networkevent_ONLINE)&&(triggeredevent=networkevent_INIT,disablebind=!1)},disableConnection:function(duration){if(disablebind=!0,duration){var durationinms=60*duration*1e3,nextrecontime=(new Date).getTime()+durationinms;$ZSIQUTS.store("nextrecon",nextrecontime),setSource("disableConnection_nextrecon_"+nextrecontime),setTimeout(function(){SW.logFine("disable connect settimeout"),uts.init()},durationinms)}uts.util.checkMode(UTSMODE_WS)?WS.disableConnection():uts.util.checkMode(UTSMODE_CORS)&&CR.disableConnection(),uts.net.writeenabled=!1,window.$UTSConnector&&$UTSConnector.util.net.terminateConnection()}},uts.util={dbconsistencychecked:!1,offlinetimer:-1,addOnOffEvent:function(evname,func){document.body.attachEvent?document.body.attachEvent("on"+evname,func):window.addEventListener&&window.addEventListener(evname,func)},checkMode:function(mode){return _utsmode===mode},composeUrl:function(){var urlarray=[];function checkAndPush(name,value){value&&urlarray.push(name+"="+encodeURIComponent(function(value){if(!value)return value;return value.replace(/^\s+|\s+$/gm,"")}(value)))}try{Float.stopBlinking()}catch(e){}var cpage=$zohosq.visitor.cpage()||document.location.href.substring(0,3072),pagetitle=$zohosq.visitor.pagetitle()||document.title.substring(0,3072);try{var navobj=$zohosq.visitor.onNavigate({url:cpage,title:pagetitle});navobj&&(cpage=navobj.url||cpage,pagetitle=navobj.title||pagetitle)}catch(e){}var mc_cid=$ZSIQUtil.getURLParameterByName("mc_cid"),mc_eid=$ZSIQUtil.getURLParameterByName("mc_eid");if(null==mc_cid&&null==mc_eid){var mailchimp=getFromCookie("mailchimp");if(mailchimp){var mailchimpData=JSON.parse(mailchimp);apivalues.name=mailchimpData.name,apivalues.email=mailchimpData.email}}var urlobj={"x-e":""+_embedname,"x-s":""+_screenname,cpage:cpage,"x-sid":sid,ptitle:pagetitle,_zldp:$ZSIQUTS.get("_zldp"),_zldt:$ZSIQUTS.get("_zldt"),name:apivalues.name,email:apivalues.email?apivalues.email.toLowerCase():"",phone:apivalues.phone,localtime:function(value){try{return(new Date).toTimeString().split(" ").slice(1).join(" ")}catch(e){}return""}(),gmttime:function(){try{return(new Date).toTimeString().split(" ").slice(1,2)[0]}catch(e){}return""}(),docref:document.referrer.substring(0,3072)};try{$zoho.salesiq.con_id&&(urlobj.con_id=""+$zoho.salesiq.con_id,delete $zoho.salesiq.con_id)}catch(e){}for(var a in urlobj.referer=null,$ZSIQUTS.getFromSession("siq_isdirect")||($ZSIQUTS.getFromSession("siq_ref")?urlobj.referer=$ZSIQUTS.getFromSession("siq_ref"):$zohosq.visitor.referer()||document.referrer?($ZSIQUTS.storeInSession("siq_ref",$zohosq.visitor.referer()||document.referrer.substring(0,3072)),urlobj.referer=$zohosq.visitor.referer()||document.referrer.substring(0,3072)):$ZSIQUTS.storeInSession("siq_isdirect",!0)),urlobj)urlobj.hasOwnProperty(a)&&checkAndPush(a,urlobj[a]);try{Float.blinkTitle(Float.blinkmsg)}catch(e){}if(initialized)checkAndPush("recon","true");else{if(apivalues.info){var cinfo=apivalues.info;"object"==typeof cinfo&&(cinfo=JSON.stringify(cinfo)),checkAndPush("cinfo",cinfo)}var status=apivalues.trackstatus;status&&checkAndPush("cstatus",JSON.stringify(status))}return urlarray.join("&")},bindEvents:function(){try{function handleEvent(){var navdata={};navdata.cpage=document.location.href.substring(0,3072),navdata.ptitle=document.title.substring(0,3072),navdata.referer=document.referrer.substring(0,3072),uts.notifier.updateNavigtion(navdata)}history=window.history,pushState=history.pushState,history.pushState=function(state){var data=pushState.apply(history,arguments);return"function"==typeof history.onpushstate&&history.onpushstate(),data},$ZaddEvent(window,"hashchange",handleEvent),window.history.onpushstate=function(state){try{handleEvent()}catch(e){}},-1!==navigator.userAgent.indexOf("Firefox")&&(window.onbeforeunload=(beforeunload=window.onbeforeunload,function(e){return uts.net.disableConnection(),"function"==typeof beforeunload?beforeunload():e.returnValue?e.returnValue:void 0}))}catch(e){}var beforeunload,history,pushState},checkConsistency:function(){_zldt===$ZSIQUTS.get("_zldt")&&_zldp===$ZSIQUTS.get("_zldp")||(sid=null,uts.net.reconnect()),uts.util.dbconsistencychecked=!0}},uts.util.addOnOffEvent("online",function(){uts.util.offlinetimer&&-1!=uts.util.offlinetimer?clearTimeout(uts.util.offlinetimer):(setSource("onlineevent"),$ZUserStatus.isactive?uts.net.reconnect():uts.net.reconnectwhenactive=!0),triggeredevent=networkevent_ONLINE}),uts.util.addOnOffEvent("offline",function(){uts.util.offlinetimer&&-1!=uts.util.offlinetimer&&clearTimeout(uts.util.offlinetimer),uts.util.offlinetimer=setTimeout(function(){setSource("offlineevent"),triggeredevent=networkevent_OFFLINE,uts.net.reconnectwhenactive=!1,uts.net.goOffline(),uts.util.offlinetimer=-1},2e3)}),uts.notifier={qdata:[],maxsize:100,lastupdatedinfo:{}},uts.notifier.notifyServer=function(obj,force){window.$UTSConnector?$UTSConnector.util.net.trackEvent(obj):uts.util.checkMode(UTSMODE_SW)||(uts.net.writeenabled||force)&&(WS._WEBSOCK.readyState===WS.readystate.OPEN||uts.util.checkMode(UTSMODE_CORS))?uts.notifier.sendData(obj,void 0,!0):uts.notifier.qdata.length>uts.notifier.maxsize||(uts.notifier.removeIfExists(obj),uts.notifier.qdata.push(obj))},uts.notifier.removeIfExists=function(obj){try{for(var index=0;index<uts.notifier.qdata.length;index++)JSON.stringify(uts.notifier.qdata[index])==JSON.stringify(obj)&&uts.notifier.qdata.splice(index,1)}catch(e){}},uts.notifier.waitForSocketConnection=function(socket,callback){setTimeout(function(){socket.readyState!==WS.readystate.OPEN?uts.notifier.waitForSocketConnection(socket,callback):void 0!==callback&&callback()},500)},uts.notifier.sendData=function(obj,isqueue,isresend){if(uts.seqmsg.enroll(obj,isresend),uts.util.checkMode(UTSMODE_WS)){var tempobj=obj;uts.seqmsg.isconnectionmade&&((tempobj={}).data=obj,tempobj.seqno=uts.seqmsg.getSequenceNo()),WS._WEBSOCK.readyState===WS.readystate.OPEN?WS._WEBSOCK.send(JSON.stringify(tempobj)):uts.notifier.waitForSocketConnection(WS._WEBSOCK,function(){WS._WEBSOCK.send(JSON.stringify(tempobj))})}else uts.util.checkMode(UTSMODE_CORS)?CR.bind(JSON.stringify(obj),isqueue):uts.util.checkMode(UTSMODE_SW)&&SW.send(obj)},uts.notifier.updateNavigtion=function(val){setSource("navdata_"+JSON.stringify(val)),this.notifyServer({opr:"nav",navdata:val})},uts.notifier.updateCustomAction=function(val){setSource("customaction_"+JSON.stringify(val)),this.notifyServer({opr:"customaction",action:val});try{delete $zohosq.values.customaction}catch(e){}},uts.notifier.doLog=function(val){setSource("dolog_"+JSON.stringify(val)),this.notifyServer({opr:"dolog",logdata:val})},uts.notifier.enrollInfo=function(key,val){if(key&&val){var tempval={};tempval[key]=val,tempval.uptime=(new Date).getTime(),uts.notifier.lastupdatedinfo[key]=tempval}},uts.notifier.isUpdated=function(key,val){var updatedvalue=uts.notifier.lastupdatedinfo[key];return!!updatedvalue&&(updatedvalue[key]==val&&((new Date).getTime()-updatedvalue.uptime<6e4||(delete uts.notifier.lastupdatedinfo[key],!1)))},uts.notifier.updateGuessInfo=function(val){var detail={},cinfo={};(val=val.details||{}).isError&&(detail.isError=val.isError),val.name&&(detail.name=val.name),val.email&&(detail.email=val.email.toLowerCase()),val.phone&&(detail.phone=val.phone),val.company&&(cinfo.company=val.company),setSource("updateguessinfo_"+JSON.stringify(detail)),this.notifyServer({opr:"updateguessinfo",detail:detail,cinfo:JSON.stringify(cinfo)})},uts.notifier.updateInfo=function(val){setSource("updateInfo_"+JSON.stringify(val));var email,phoneno,name=val.name;val.email&&(email=val.email.toLowerCase()),val.phone&&$ZSIQUtil.isValidPhoneNo(val.phone)&&(phoneno=val.phone),uts.notifier.isUpdated("name",name)&&(name=void 0),uts.notifier.isUpdated("email",email)&&(email=void 0),uts.notifier.isUpdated("phone",phoneno)&&(phoneno=void 0),(val.info||name||email||phoneno)&&(uts.notifier.enrollInfo("name",name),uts.notifier.enrollInfo("email",email),uts.notifier.enrollInfo("phone",phoneno),this.notifyServer({opr:"updateinfo",name:name,email:email,phone:phoneno,cinfo:val.info}))},uts.notifier.identifyByCampaign=function(){var widgetdata=$ZSIQChat.getWidgetData();if($ZSIQUtil.formWidgetObject(widgetdata.widgetobj).ismailchimpenabled){var mc_cid=$ZSIQUtil.getURLParameterByName("mc_cid"),mc_eid=$ZSIQUtil.getURLParameterByName("mc_eid");if(null!=mc_cid&&null!=mc_eid)storeInCookie("mc_cid",mc_cid),storeInCookie("mc_eid",mc_eid);else getFromCookie("mailchimp")||(mc_cid=getFromCookie("mc_cid"),mc_eid=getFromCookie("mc_eid"));mc_cid&&mc_eid&&(this.notifyServer({opr:"identifybycampaign",campaigndata:{mc_cid:mc_cid,mc_eid:mc_eid}}),$UTSHandler.setTrackedfrommailchimp(!0))}},uts.notifier.updateStatus=function(status){if(status){setSource("updateStatus_"+status);try{this.notifyServer({opr:"status",status:""+status})}catch(e){}}},uts.notifier.acknowledge=function(){var uvid=$ZSIQUTS.get("_zldt");if(uvid){var data={opr:"ack",uvid:uvid};uts.notifier.notifyServer(data,!0)}},uts.notifier.notifyQueued=function(){uts.notifier.qdata.length&&uts.net.writeenabled&&(uts.notifier.sendData(uts.notifier.qdata,!0,!0),uts.notifier.qdata=[])};var $ZHandler={handleConnect:function(data){data.chid?(data.uvid=_zldt,data,$UTSHandler.handleTrackChat(data)):$UTSHandler.handleUTSConnect(data)}},$ZUserStatus={updateIdle:function(){var zu=$ZUserStatus;if(zu.isactive){uts.notifier.updateStatus(zu.idle),zu.isactive=!1;try{$zohosq._invoke("visitor.idle",!0)}catch(e){}}},init:function(){if(void 0===this.isactive){var idletime=apivalues.idletime;idletime&&!isNaN(idletime)&&(idletime=60*idletime*1e3),this.idletime=idletime||9e5,this.timer=-1,this.online=1,this.idle=4,this.isactive=!0;for(var events=["keydown","keypress","mouseout","mouseenter","click"],i=0;i<events.length;i++)$ZaddEvent(document,events[i],$ZUserStatus.active);this.active()}},active:function(){var zu=$ZUserStatus;if(zu.updateTimer(),!zu.isactive){zu.isactive=!0,uts.net.reconnectwhenactive?(uts.net.reconnectwhenactive=!1,disablebind=!1):uts.notifier.updateStatus(zu.online);try{$zohosq._invoke("visitor.active",!0)}catch(e){}}},updateTimer:function(){var zu=$ZUserStatus;clearTimeout(zu.timer),zu.timer=setTimeout(function(){$ZUserStatus.updateIdle()},$ZUserStatus.idletime)}},$ZaddEvent=function(el,evname,func){el.attachEvent?el.attachEvent("on"+evname,func):el.addEventListener(evname,func,!0)},SW={initialized:!1,workerid:0,utsworkerurl:null,mastertabworkerid:0,utsworker:null,latimeupdater:null,lapolltimer:null,connecttimer:null,_enablelog:!1,logFine:function(msg){SW._enablelog&&console.log("%c "+msg,"color: blue")},logTrace:function(msg){SW._enablelog&&console.log("%c "+msg,"color: red")},logInfo:function(msg){SW._enablelog&&console.log("%c "+msg,"color: green")},logObj:function(obj){SW._enablelog&&console.log(obj)},init:function(isfirsttime){uts.seqmsg.isconnectionmade=!1,SW.logFine("inside init funciton"),SW.utsworkerurl=$ZSIQUTS.getFromLocalStorage("sw_url"),isfirsttime?(SW.workerid=0,SW.mastertabworkerid=0):(SW.workerid=-1,SW.mastertabworkerid=-1),_utsmode=UTSMODE_SW,"off"!==apivalues.tracking&&SW.initOrStartWorker(isfirsttime)},initOrStartWorker:function(isfirsttime){if(SW.logFine("inside initOrStartWorker funciton"),SW.utsworkerurl)try{SW.initWorker(isfirsttime)}catch(e){SW.utsworkerurl=null,$ZSIQUTS.storeInLocalStorage("sw_url","",-1e3)}else SW.initWorkerBlob(isfirsttime)},initWorkerBlob:function(isfirsttime){SW.logFine("inside initWorkerBlob funciton");var scripttag=document.createElement("script");scripttag.type="text/worker",scripttag.id="utsworker",scripttag.innerHTML=SW.getWorkerScript(),document.getElementsByTagName("body")[0].appendChild(scripttag);var workerblob=new Blob([document.querySelector("#utsworker").textContent],{type:"text/javascript"}),bloburl=window.URL.createObjectURL(workerblob);$ZSIQUTS.storeInLocalStorage("sw_url",bloburl,36e5),SW.utsworkerurl=bloburl,SW.initOrStartWorker(),document.getElementById("utsworker").remove()},initWorker:function(isfirsttime){SW.utsworker=new SharedWorker(SW.utsworkerurl),SW.utsworker.port.start(),SW.utsworker.port.onmessage=function(e){try{SW.onMessage(JSON.parse(e.data))}catch(e){uts.notifier.doLog("Exception in SW: message - "+e.message+" stack - "+e.stack)}},SW.scheduleConnectMonitor()},getWorkerScript:function(){return"\n var connectedports = {}; /* To store list of ports with id as key*/ \n var mastertabid = -1;\n onconnect = function(event) {\n var port = event.ports[0];\n var formatted_port = construstPortObject(port);\n port.start();\n port.addEventListener('message', function(event) { listenForMessage(event); });\n notifyTabs(port, {operation : 'connect', payload : constructPayLoad(['id', 'mastertabid'], [formatted_port.id, mastertabid])});\n if (mastertabid == -1) {\n mastertabid = formatted_port.id;\n notifyTabs(port, { operation : 'makemaster' });\n }\n };\n var enrollConnected = function(portobj){\n if (!portobj || Object.keys(portobj).length == 0) {\n throw 'exception';\n }\n var id = portobj.id;\n var port = portobj.port;\n if (!id || !port) {\n throw 'exception';\n }\n do { // To prevent same ID getting overrided.\n if (!isKeyExists(id, connectedports)) {\n break;\n }\n id--;\n } while(true);\n connectedports[id] = portobj;\n portobj.id = id;\n return portobj;\n };\n var isKeyExists = function(key, hash) {\n if (!key || !hash) {\n return false;\n }\n var keylist = Object.keys(hash);\n return (keylist.indexOf('' + key) > -1);\n };\n var listenForMessage = function(event) {\n var port = getPortFromClientEvent(event);\n var data = {operation : event.data.operation, payload : JSON.parse(event.data.payload)};\n if (!port) {\n return;\n }\n switch(data.operation) {\n case 'tomaster':\n if (mastertabid == -1) {/* slave tab will resend the message. Bcoz ack not recieved. */\n return;\n }\n port = connectedports[mastertabid].port;\n break;\n case 'lapoll':\n connectedports[data.payload.id].port.latime = new Date().getTime();\n data.payload.mastertabid = mastertabid;\n port = connectedports[data.payload.id].port;\n if (mastertabid == -1) {\n mastertabid = data.payload.id;\n notifyTabs(port, { operation : 'makemaster' });\n }return;\n case 'tononmaster':\n for (var workerid in connectedports) {\n if (mastertabid == workerid) {\n continue;\n }\n notifyTabs(connectedports[workerid].port, data);\n }\n return;}\n if (port == -1) {\n notifyAllTabs(data);\n }\n else {\n notifyTabs(port, data);\n }\n };\n var notifyAllTabs = function(data){\n notifyTabs('-1', data);\n };\n var notifyTabs = function(port, data) {\n if (port == '-1') {\n for (var workerid in connectedports) {\n notifyTabs(connectedports[workerid].port, data);\n }\n }\n else {\n port.postMessage(JSON.stringify(data));\n }\n };\n var getPortFromClientEvent = function(event) {\n var data = event.data;\n var operation = data.operation;\n var payload = JSON.parse(data.payload);\n var clientworkerid = payload.id;\n if (!clientworkerid) {\n throw 'client id not not event';\n }\n if (!connectedports[clientworkerid]) {\n throw 'client id not registered with worker';\n }\n if (payload.isNotifyTabs) {\n return -1;\n }\n return connectedports[clientworkerid].port;\n };\n var construstPortObject = function(port) {\n var id = new Date().getTime();\n var customportobject = {};\n customportobject.port = port;\n customportobject.id = id;\n customportobject.connectedtime = new Date().getTime();\n return enrollConnected(customportobject);\n };\n var constructPayLoad = function(keys, values) {\n var payload = {};\n if (!keys || !values){\n return payload;\n }\n if (keys.length != values.length) {\n return payload;\n }\n for (var keyindex = 0; keyindex < keys.length; keyindex++) {\n payload[keys[keyindex]] = values[keyindex];\n }\n return payload;\n };\n var checkWorkerAlive = function(data) {\n for (var workerid in connectedports) {\n if (connectedports[workerid].port.latime < (new Date().getTime() - 8000)) {\n /* Mark as expired. B'coz last access time not updated. */\n delete connectedports[workerid];\n if (mastertabid == workerid) {\n mastertabid = -1;\n }\n } else {\n connectedports[workerid].port.postMessage(JSON.stringify({operation : 'alive', payload : {'mastertabid' : mastertabid, 'connectedports' : JSON.stringify(connectedports)}}));\n }\n }\n setTimeout(function () {\n checkWorkerAlive();\n }, 5000);\n };\n checkWorkerAlive();\n"},scheduleConnectMonitor:function(){SW.unscheduleConnectMonitor(),SW.connecttimer=setTimeout(function(){$ZSIQUTS.storeInLocalStorage("sw_url","",-1e3),SW.init(!1)},500)},unscheduleConnectMonitor:function(){clearTimeout(SW.connecttimer)},onMessage:function(data){SW.logInfo("onMessage -"+JSON.stringify(data));var operation=data.operation,payload=data.payload;if(operation)switch(operation){case"connect":uts.net.connAlive(),$ZUserStatus.init(),SW.unscheduleConnectMonitor(),SW.logFine("connected to worker - your id:"+payload.id);var workerid=payload.id,masterworkerid=payload.mastertabid,isfirsttimeconnection=!1;if(0==SW.workerid&&(isfirsttimeconnection=!0),SW.workerid=workerid,SW.mastertabworkerid=masterworkerid,SW.initAccessTimePoll(),isfirsttimeconnection&&-1!=SW.mastertabworkerid&&SW.workerid!=SW.mastertabworkerid){var navdata={};navdata.cpage=document.location.href.substring(0,3072),navdata.ptitle=document.title.substring(0,3072),navdata.referer=document.referrer.substring(0,3072),uts.notifier.updateNavigtion(navdata)}break;case"makemaster":SW.mastertabworkerid=SW.workerid,uts.init(!1,!0);break;case"alive":SW.workerid!=SW.mastertabworkerid&&uts.net.connAlive();break;case"tomaster":if(0!=SW.workerid&&SW.workerid!=SW.mastertabworkerid)return;payload=payload.data,uts.notifier.notifyServer(payload);break;case"tononmaster":uts.net.handleResponse(payload.data,!0)}},initAccessTimePoll:function(){SW.clearAccessTimepoll(),SW.lapolltimer=setInterval(function(){SW.pollLATime()},5e3)},clearAccessTimepoll:function(){clearTimeout(SW.lapolltimer)},pollLATime:function(){SW.sendMessage("lapoll",{id:SW.workerid})},send:function(data){SW.sendMessage("tomaster",{id:SW.workerid,data:data})},sendResponseToOthers:function(data){SW.sendMessage("tononmaster",{id:SW.workerid,data:JSON.stringify(data)})},sendMessage:function(command,data){command&&data&&(SW.utsworker?(SW.logTrace("sendMessage "+JSON.stringify({operation:command,payload:JSON.stringify(data)})),SW.utsworker.port.postMessage({operation:command,payload:JSON.stringify(data)})):SW.logTrace("utsworker itself not initialised"+SW.utsworker))},disableConnection:function(){uts.net.disableConnection()},constructPayload:function(parammap,isnotifyothers){var payload={};if(payload.id=workerid,payload.isNotifyTabs=!1,isNotifyOtherTab&&(payload.isNotifyTabs=!0),!parammap||Object.keys(parammap).length<1)return payload;for(var key in parammap)payload[key]=parammap[key];return payload}},WS={id:null,wsScheme:getURLScheme(window,!0),_WEBSOCK:{},pingTimer:{},recontimer:null,readystate:{CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},initialized:!1,init:function(){if(uts.seqmsg.isconnectionmade=!1,_utsmode=UTSMODE_WS,"off"!==apivalues.tracking){uts.net.scheduleFallback();try{var url=WS.wsScheme+_utsserver+"/watchws?";url+=uts.util.composeUrl();var connectioncount=$ZSIQUTS.getFromSession("connection_count")||0;connectioncount=parseInt(connectioncount),connectioncount++,$ZSIQUTS.storeInSession("connection_count",JSON.stringify(connectioncount)),url+="&connection_count="+connectioncount;try{"WebSocket"in window&&void 0!==window.WebSocket?WS._WEBSOCK=new WebSocket(url):"MozWebSocket"in window&&(WS._WEBSOCK=new MozWebSocket(url))}catch(e){return SW.logFine("Exception on new websocket "+e),clearTimeout(uts.net.fallbacktimer),void(uts.net.fallbacktimer=setTimeout(uts.net.fallbackToCR,0))}SW.logFine("BEFORE WS.id - "+WS.id),WS._WEBSOCK.id=(new Date).getTime(),WS.id=WS._WEBSOCK.id,SW.logFine("WS.id - "+WS.id),WS._WEBSOCK.onopen=function(evt){WS.onOpen(evt)},WS._WEBSOCK.onclose=function(evt){SW.logFine(" WS._WEBSOCK.onclose - "+this.id),SW.logObj(evt),WS.id===this.id&&WS.onClose(evt)},WS._WEBSOCK.onerror=function(evt){WS.onError(evt)},WS._WEBSOCK.onmessage=function(evt){try{WS.onMessage(evt)}catch(e){uts.notifier.doLog("Exception in WebSocket: message - "+e.message+" stack - "+e.stack)}}}catch(e){}}},onMessage:function(evt){SW.logFine(" WS.onMessage - "+JSON.stringify(evt)+" WS.initialized -> "+WS.initialized+" WS.id -> "+WS.id),uts.net.connAlive(),consecutivefailurecnt=0,uts.net.requestSuccess(),WS.initialized||uts.net.scheduleFallback();var data=evt.data;if("//1//"!==data){if(""!==data){if(","===data)return SW.logFine("data = ,"),void WS.init();uts.net.handleResponse(data),clearInterval(WS.pingTimer),WS.pingTimer=setTimeout(WS.pingcb,1e4)}}else WS.setInitialized()},pingcb:function(){if(15e3<new Date-uts.net.lpt)try{WS._WEBSOCK.readyState===WS.readystate.OPEN&&WS._WEBSOCK.send(JSON.stringify({data:"-",seqno:uts.seqmsg.getSequenceNo()}))}catch(e){uts.notifier.doLog("Exception in WebSocket: ping - "+e.message+" stack - "+e.stack+" name:"+e.name)}WS.pingTimer=setTimeout(WS.pingcb,1e4)},onOpen:function(evt){SW.logFine("inside ws.onopen - WS.recontimer - must be cleared"),clearTimeout(WS.recontimer),$ZUserStatus.init()},onError:function(evt){SW.logFine("inside ws.onError - evt -> "+JSON.stringify(evt)),SW.logObj(evt)},onClose:function(evt){if(SW.logFine("inside ws.close - evt -> "+JSON.stringify(evt)),uts.util.checkMode(UTSMODE_WS)){setSource("WS.onClose_"+ ++consecutivefailurecnt),uts.net.goOffline(),clearTimeout(WS.recontimer);var timeout=(new Date).getTime()%20;WS.recontimer=setTimeout(function(){WS.bind()},1e3*timeout)}},bind:function(){!0!==disablebind&&uts.util.checkMode(UTSMODE_WS)&&(WS._WEBSOCK.readyState!==WS.readystate.CONNECTING&&WS._WEBSOCK.readyState!==WS.readystate.OPEN||(SW.logFine("websocet closed - WS._WEBSOCK.readyState - "+WS._WEBSOCK.readyState),WS._WEBSOCK.close(),uts.seqmsg.isconnectionmade=!1),clearTimeout(WS.recontimer),SW.logFine("inside ws.bind"),WS.init(),uts.net.connAlive())},disableConnection:function(){try{SW.logFine("websocket closed - by disableconnection"),WS._WEBSOCK.close(),uts.seqmsg.isconnectionmade=!1}catch(e){}},ping:function(){uts.util.checkMode(UTSMODE_WS)&&(WS.initialized=!1,WS._WEBSOCK.readyState===WS.readystate.OPEN&&WS._WEBSOCK.send("--1--"))},setInitialized:function(){uts.util.checkMode(UTSMODE_WS)&&(WS.initialized=!0,uts.net.unscheduleFallback())}},CR={lastevttime:0,reqobjs:[],fullTripTimer:null,respTimer:null,ajax:function(props){var ajaxreq,type=props.type||"GET",isasync=props.async||!0,onsuccess=props.onSuccess||function(){},onfailure=props.onFailure||function(){},url=props.url,options=props.options||{};if("withCredentials"in(ajaxreq=new XMLHttpRequest)){(ajaxreq=new XMLHttpRequest).open(type,url,isasync),ajaxreq.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),options.ajaxreq=ajaxreq;try{ajaxreq.onreadystatechange=function(){4===ajaxreq.readyState&&(200===ajaxreq.status?onsuccess(options):onfailure(options))}}catch(e){throw clearTimeout(CR.respTimer),setSource("withCreds_catch_"+e.message),CR.respTimer=setTimeout(function(){CR.bind()},1e4),consecutivefailurecnt++,uts.net.goOffline(),e}}else if("undefined"!=typeof XDomainRequest){(ajaxreq=new XDomainRequest).open("GET",url),options.ajaxreq=ajaxreq;try{ajaxreq.onprogress=function(){},ajaxreq.ontimeout=function(){},ajaxreq.onload=function(){onsuccess(options)},ajaxreq.onerror=function(){onfailure(options)}}catch(e){throw setSource("XDR_catch_"+e.message),clearTimeout(CR.respTimer),CR.respTimer=setTimeout(function(){CR.bind()},1e4),consecutivefailurecnt++,uts.net.goOffline(),e}}return setTimeout(function(){ajaxreq.send(props.qp)},0),ajaxreq},sendReq:function(url,qp){var starttime=(new Date).getTime(),ajaxprops={url:url,qp:qp,type:"POST",onSuccess:function(options){var evtstarttime=options.evtstarttime,response=options.ajaxreq.responseText;if(!(4e4<CR.lastevttime-evtstarttime&&""===response)&&(uts.net.handleResponse(response),uts.seqmsg.isconnectionmade&&uts.net.connAlive(),uts.net.requestSuccess(),consecutivefailurecnt=0,""!==response)){try{var data=JSON.parse(response);if(null!=data.sseqno)return;if(isArray(data))for(var i=0;i<data.length;i++){var servermsg,singledata=data[i];if("4"==singledata.o&&(servermsg=singledata.d)&&null!=servermsg.sseqno)return}else if("4"==data.o&&(servermsg=data.d)&&null!=servermsg.sseqno)return}catch(e){return}setSource("sendReq_success_"+response),CR.bind()}},onFailure:function(options){var status=options.ajaxreq.status;CR.reqobjs[0]&&CR.reqobjs[0].abort(),setSource("sendReq_failure_"+status),clearTimeout(CR.respTimer),CR.respTimer=setTimeout(function(){CR.bind()},1e4),500!==status&&304!==status&&404!==status&&400!==status&&(consecutivefailurecnt++,uts.net.goOffline())},options:{evtstarttime:CR.lastevttime=starttime}},ajaxreq=CR.ajax(ajaxprops);CR.reqobjs[0]=CR.reqobjs[1],CR.reqobjs[1]=ajaxreq},init:function(){if(uts.seqmsg.isconnectionmade=!1,_utsmode=UTSMODE_CORS,"off"!==apivalues.tracking){var url=urlscheme+_utsserver+"/watch",connectioncount=$ZSIQUTS.getFromSession("connection_count")||0;connectioncount=parseInt(connectioncount),connectioncount++,$ZSIQUTS.storeInSession("connection_count",JSON.stringify(connectioncount));try{CR.sendReq(url,uts.util.composeUrl()+"&nocache="+(new Date).getTime()+"&connection_count="+connectioncount)}catch(e){return}$ZUserStatus.init()}},bind:function(data,isqueue){if(!0!==disablebind&&(null!==CR.respTimer&&clearTimeout(CR.respTimer),sid)){var url=urlscheme+_utsserver+"/bind",qp="sid="+encodeURIComponent(sid)+"&nocache="+(new Date).getTime();data&&(qp+="&",isqueue&&(qp+="q"),qp+="data="+encodeURIComponent(data),qp+="&",qp+="seqno="+uts.seqmsg.getSequenceNo()),uts.seqmsg.isconnectionmade&&uts.net.connAlive(),CR.sendReq(url,qp),clearTimeout(CR.fullTripTimer),CR.fullTripTimer=setTimeout(function(){setSource("self"),CR.bind()},2e4)}},disableConnection:function(){clearTimeout(CR.fullTripTimer),clearTimeout(CR.respTimer),uts.seqmsg.isconnectionmade=!1}};uts.init=function(isfirsttime,isfromworker){SW.logFine("uts -init"),isfirsttime&&uts.util.bindEvents();var connectionallowed=!(disablebind=!1);$ZSIQUTS.get("nextrecon")&&(connectionallowed=$ZSIQUTS.get("nextrecon")-(new Date).getTime()<0),connectionallowed&&(window.$UTSConnector?$zohosq.tracking.on():(!isfromworker&&window.SharedWorker,!disablews&&"WebSocket"in window&&void 0!==window.WebSocket||"MozWebSocket"in window?(SW.logFine("websocket - init"),WS.init()):("withCredentials"in new XMLHttpRequest||window.XDomainRequest)&&(SW.logFine("CORS - init"),CR.init())))};var reconnectiondelay,index,callbacktimer,tem,ua,M;return{SW:SW,store:function(key,value,expiry){storeInCookie(key,value,expiry),storeInLocalStorage(key,value,expiry)},storeInLocalStorage:storeInLocalStorage,getFromLocalStorage:getFromLocalStorage,removeFromSession:function(key){if(!isSessionStorageAvailable())return!1;key=getModifiedKey(key);var data=JSON.parse(sessionStorage.utsdb||"{}");return delete data[key],sessionStorage.utsdb=JSON.stringify(data),!0},storeInSession:function(key,value){if(!isSessionStorageAvailable())return!1;key=getModifiedKey(key);var data=JSON.parse(sessionStorage.utsdb||"{}");return data[key]=value,sessionStorage.utsdb=JSON.stringify(data),!0},get:function(key){return getFromCookie(key)||getFromLocalStorage(key)},getFromSession:function(key){if(isSessionStorageAvailable())return key=getModifiedKey(key),JSON.parse(sessionStorage.utsdb||"{}")[key]},updateAction:function(val){setSource("updateAction_"+JSON.stringify(val));var data={opr:"action",type:val.type};val.triggered_id&&(data.triggered_id=val.triggered_id),val.action_type&&(data.action_type=val.action_type),uts.notifier.notifyServer(data)},notifyCustomEvent:function(client_data){setSource("notifyCustomEvent_"+JSON.stringify(client_data));var data={opr:"customevent",data:client_data};uts.notifier.notifyServer(data)},handleApiChange:function(operation,val){switch(operation){case 1:"on"===val?(uts.init(),window.$UTSConnector&&($UTSConnector.util.net.disabled_by_server=!1)):"off"===val&&(setSource("handleApiChange"),uts.net.disableConnection());break;case 2:isNaN(val)||($ZUserStatus.idletime=60*val*1e3,$ZUserStatus.updateTimer());break;case 3:uts.notifier.updateInfo(val);break;case 4:uts.notifier.updateCustomAction(val);break;case 5:uts.notifier.updateGuessInfo(val);break;case 6:!function(){try{sessionStorage.utsdb=JSON.stringify("{}")}catch(e){}try{localStorage.utsdb=JSON.stringify("{}")}catch(e){}try{for(var keys=["_zldp","_zldt","nextrecon","sid","siq_ref","siq_isdirect","siq_name","siq_email","siq_phone"],keyindex=0;keyindex<keys.length;keyindex++){var key=keys[keyindex],cookie=(key=getModifiedKey(key))+"= ;expires= "+new Date(-1).toGMTString();cookie+=";path=/";try{var domain=$UTSHandler.getDomain();cookie+=domain?";domain="+domain:""}catch(e){}document.cookie=cookie}}catch(e){}}()}},init:function(isoverride){if(!_embedname||isoverride){var widgetdata=$ZSIQChat.getWidgetData(),floatobj=$ZSIQUtil.formWidgetObject(widgetdata.widgetobj),embedobj=widgetdata.embedobj;_embedname=floatobj.embedname,_screenname=floatobj.screenname,_utsserver=floatobj.utsserver,_zldvfp=floatobj.zldvp;var gdprpendingstatus=$ZSIQUtil.getGDPRPendingStatus(widgetdata,embedobj,_screenname);floatobj.forcehttps&&(window.$UTSConnector?$UTSConnector.enableForceSecure():(urlscheme="https://",WS.wsScheme="wss://")),apivalues=$UTSHandler.getAPIValuesForUTS(),$ZSIQ_UTSinitialized=!0,function(){sid=$ZSIQUTS.getFromSession("sid");try{window.opener&&window.parent.$ZSIQUTS.getFromSession("sid")===sid&&(sid="")}catch(e){}}();try{$ZSIQUTS.getFromSession("siq_isdirect")||$ZSIQUTS.getFromSession("siq_ref")||(document.referrer?$ZSIQUTS.storeInSession("siq_ref",document.referrer.substring(0,3072)):$ZSIQUTS.storeInSession("siq_isdirect",!0))}catch(e){}if(!(floatobj.istracking||apivalues.tracking&&"on"==apivalues.tracking)||"off"==apivalues.tracking||$ZSIQUtil.checkGDPRBannerStatus(2,_screenname,embedobj)||gdprpendingstatus){if(window.$UTSConnector){$UTSConnector.util.net.terminateConnection();var new_uvid=$UTSConnector.util.db.getFromCookie({key:"_zldt"});new_uvid&&$UTSHandler.setUVID(new_uvid)}}else _zldt=$ZSIQUTS.get("_zldt"),_zldp=$ZSIQUTS.get("_zldp")||_zldvfp,$zv.customaction&&$ZSIQUTS.handleApiChange(4,$zv.customaction),$zv.idletime&&$ZSIQUTS.handleApiChange(2,$zv.idletime),($zv.name||$zv.email||$zv.phone||$zv.info)&&$ZSIQUTS.handleApiChange(3,$zv),SW.logFine("very first time uts init"),uts.init(!0),window.$UTSConnector||uts.net.scheduleMonitor()}else SW.logFine("uts init already called - must be called twice")}}}(window);var $ZSIQUTSAction=$ZSIQUTSAction||function(window){var trigger_id,animationtypes={1:"left",2:"right",3:"bottom",4:"top"},action_type=0,action_time=0,action_value="",action_visitorinfo={},processTriggers=function(){if(0!=$UTSHandler.getFloatStatus()||10===action_type){var marktriggered=!0;switch(action_type){case 2:$UTSHandler.handleChatTriggers(action_type,action_value);break;case 3:$UTSHandler.openChatWindow();break;case 4:case 5:break;case 6:handleAnimate();break;case 7:$UTSHandler.showButton();break;case 8:handleButtonGlow();break;case 9:$UTSHandler.handleChatTriggers(action_type,action_value);break;case 10:!1===invokeJSAPI()&&(marktriggered=!1)}try{marktriggered&&$ZSIQUTS.updateAction({type:"7",action_type:action_type,triggered_id:trigger_id})}catch(e){}}},invokeJSAPI=function(){try{var data={triggername:action_value.triggername,visitorinfo:action_visitorinfo};return $zohosq._invoke("visitor.trigger",data)}catch(e){return!1}},parseTime=function(time){try{var str=String(time).toLowerCase();if(-1!=str.search(/hour/i))return 36e5*parseInt(str);if(-1!=str.search(/minute/i))return 6e4*parseInt(str);if(-1!=str.search(/second/i))return 1e3*parseInt(str)}catch(e){}return 0},handleAnimate=function(){var container=$UTSHandler.getFloatDiv(5);if(null!=container){var max,min=0,oppvalue={1:"right",2:"left",3:"top",4:"bottom"},animatevalue=animationtypes[action_value.animatetype];"left"===animatevalue||"right"===animatevalue?(max=window.innerWidth||document.body.clientWidth,max-=container.offsetWidth+10):(max=window.innerHeight||document.body.clientHeight,max-=container.offsetHeight+10);var duration=parseTime(action_value.duration)||50,oldvalue=container.currentStyle?container.currentStyle[animatevalue]:document.defaultView.getComputedStyle(container,null)[animatevalue],oldoppvalue=oppvalue[action_value.animatetype];oldoppvalue=container.currentStyle?container.currentStyle[oldoppvalue]:document.defaultView.getComputedStyle(container,null)[oldoppvalue],container.style[oppvalue[action_value.animatetype]]="auto",container.style[animatevalue]="0px",function doMove(){var currvalue=parseInt(container.style[animatevalue]),floatstate=$UTSHandler.getFloatState();if(currvalue<min||max<currvalue||"2"===floatstate)return container.style[animatevalue]=oldvalue,void(container.style[oppvalue[action_value.animatetype]]=oldoppvalue);container.style[animatevalue]=currvalue+10+"px",setTimeout(doMove,duration)}()}},handleButtonGlow=function(){var floatdiv=$UTSHandler.getFloatDiv(4);if(null!=floatdiv){var container=floatdiv.querySelector(".zsiq_float"),currcolor=container.currentStyle?container.currentStyle.backgroundColor:document.defaultView.getComputedStyle(container,null).backgroundColor;if(-1!==currcolor.indexOf("#")){var hex=currcolor;hex=hex.replace("#","");var hexint=parseInt(hex,16);currcolor=[hexint>>16&255,hexint>>8&255,255&hexint]}else currcolor=currcolor.replace("rgb(","").replace(")","").split(",");for(var i=0;i<currcolor.length;i++)currcolor[i]=Number(currcolor[i]);var stopanimation=!1;!function(){var darkercolor=getDarkerColor();!function animate(startcolor,endcolor,duration){var elem=container,floatstate=$UTSHandler.getFloatState();if(stopanimation&&startcolor===currcolor||"2"===floatstate)elem.style.backgroundColor="rgb("+currcolor+")";else{var steps=duration/100,r1=(endcolor[0]-startcolor[0])/steps,r2=(endcolor[1]-startcolor[1])/steps,r3=(endcolor[2]-startcolor[2])/steps,red=startcolor[0],green=startcolor[1],blue=startcolor[2],self=this;this.step=function(){0<--steps?(red=Math.floor(red+r1),green=Math.floor(green+r2),blue=Math.floor(blue+r3),elem.style.backgroundColor="rgb("+red+","+green+","+blue+")",window.setTimeout(function(){self.step()},100)):(elem.style.backgroundColor="rgb("+endcolor+")",timer=setTimeout(function(){animate(endcolor,startcolor,duration)},500))},step()}}(currcolor,darkercolor,1e3);var duration=parseTime(action_value.duration)||6e4;setTimeout(function(){stopanimation=!0},duration)}()}function getDarkerColor(){var luminance,rgb=currcolor,isdarkcolor=(luminance=.2126*currcolor[0]+.7152*currcolor[1]+.0722*currcolor[2],parseInt(luminance)<128);function lightens(color){return color=parseInt(color),isdarkcolor?Math.round(.6*(255-color)+color):Math.round(.2*(0-color)+color)}var red=lightens(rgb[0]),green=lightens(rgb[1]),blue=lightens(rgb[2]);return 255<red||255<green||255<blue?rgb:[red,green,blue]}},autopick={isloadedfirst:!0,zsiqformnames:["name","yourname","subscribername","contactname","customername"],zsiqformemails:["email","emailid","youremail","contactemail","subscriberemail","mail","customeremail","emailaddress"],zsiqformpnos:["phone","pno","phone no","phoneno","phno","tel","mobilenumber","contactphone"],zsiqattriblist:["id","name","type","siqatrib"],zsiqformcompany:["company"],zsiqfirstname:["first_name","firstname"],zsiqlastname:["last_name","lastname"]};return autopick.submit=autopick.submit||{},autopick.isnameset=!1,autopick.isemailset=!1,autopick.isphoneset=!1,autopick.iscompanyset=!1,autopick.isElementAvailable=function(element){return!(!element||0==element.length)},autopick.isEquals=function(value1,value2){return value1==value2},autopick.replaceSpecialChars=function(attrib){return attrib=attrib.replace(/[_.-]/g,"")},autopick.formatAttribValue=function(attrib){return attrib=attrib.toLowerCase().trim(),attrib=autopick.replaceSpecialChars(attrib)},autopick.checkInDOMAttrib=function(attriblist,valueslist,inputelement){for(var returnvalue,j=0;j<attriblist.length;j++){var attrib=inputelement.getAttribute(attriblist[j]);if(attrib){attrib=autopick.formatAttribValue(attrib);for(var i=0;i<valueslist.length;i++)if(autopick.isEquals(attrib,valueslist[i])){returnvalue=inputelement.value;break}if(returnvalue)break}}return returnvalue||""},autopick.getName=function(inputelement){if(!autopick.isnameset)return autopick.checkInDOMAttrib(autopick.zsiqattriblist,autopick.zsiqformnames,inputelement)},autopick.getEmail=function(inputelement,inputname){if(!autopick.isemailset)return autopick.checkInDOMAttrib(autopick.zsiqattriblist,autopick.zsiqformemails,inputelement)},autopick.getPhoneNo=function(inputelement,inputname){if(!autopick.isphoneset)return autopick.checkInDOMAttrib(autopick.zsiqattriblist,autopick.zsiqformpnos,inputelement)},autopick.getFirstName=function(inputelement,inputname){return autopick.checkInDOMAttrib(autopick.zsiqattriblist,autopick.zsiqfirstname,inputelement)},autopick.getLastName=function(inputelement,inputname){return autopick.checkInDOMAttrib(autopick.zsiqattriblist,autopick.zsiqlastname,inputelement)},autopick.getCompany=function(inputelement,inputname){if(!autopick.iscompanyset)return autopick.checkInDOMAttrib(autopick.zsiqattriblist,autopick.zsiqformcompany,inputelement)},autopick.getDetails=function(element){var details={};if(!autopick.isElementAvailable(element))return details;var inputelements=element.getElementsByTagName("input");if(!autopick.isElementAvailable(inputelements))return details;for(var name="",email="",phoneno="",firstName="",lastName="",company="",i=0;i<inputelements.length;i++){var inputelement=inputelements[i];inputelement.name;inputelement.value&&(""==name&&(name=autopick.getName(inputelement)),""==email&&(email=autopick.getEmail(inputelement)),""==phoneno&&(phoneno=autopick.getPhoneNo(inputelement)),""==firstName&&(firstName=autopick.getFirstName(inputelement)),""==lastName&&(lastName=autopick.getLastName(inputelement)),""==company&&(company=autopick.getCompany(inputelement)))}if(name)details.name=name,autopick.isnameset=!0;else if(firstName){var fullName=firstName;lastName&&(fullName=fullName+" "+lastName),details.name=fullName,autopick.isnameset=!0}return company&&(details.company=company,autopick.iscompanyset=!0),email&&/^([\w]([\w\-\.\+\'\/]*)@([\w\-\.]*)(\.[a-zA-Z]{2,22}(\.[a-zA-Z]{2}){0,2}))$/.test(email)&&(details.email=email,autopick.isemailset=!0),phoneno&&/^[+0-9A-Za-z():.\-\[\] ]{1,30}$/.test(phoneno)&&(details.phone=phoneno,autopick.isphoneset=!0),details},autopick.getObjKeyCount=function(obj){var count=0;if(null===obj||"object"!=typeof obj)return count;for(var property in obj)obj.hasOwnProperty(property)&&count++;return count},autopick.autoPickAndNotifyUTS=function(element){var details=autopick.getDetails(element);0!==autopick.getObjKeyCount(details)&&$zohosq.setValue("details",details,5)},autopick.overridedOnsubmit=function(event){try{event=event||window.event;var element=this;element||(element=event?event.target||event.srcElement:"");try{autopick.autoPickAndNotifyUTS(element)}catch(e){}var func_name=element.getAttribute("siq_id");if(func_name){var rvalue,temp=this.onsubmit;return this.onsubmit=autopick.submit[func_name],this.onsubmit&&(rvalue=this.onsubmit(event)),!1===rvalue&&(event.preventDefault?event.preventDefault():event.returnValue=!1),this.onsubmit=temp,rvalue}}catch(e){$ZNotifyTracking(5,{details:{isError:!0}})}},autopick.attachFormSubmit=function(forms){if(autopick.isElementAvailable(forms))for(var index=0;index<forms.length;index++){var cform=forms[index];if(autopick.isElementAvailable(cform)){var $zsqfunctionname,i=0;do{if($zsqfunctionname="autopick_"+Math.floor(1e4*Math.random()),!autopick.submit[$zsqfunctionname])break;i++}while(i<10);cform.setAttribute("siq_id",$zsqfunctionname),autopick.submit[$zsqfunctionname]=cform.onsubmit,cform.onsubmit=autopick.overridedOnsubmit}}},autopick.includeInForms=function(forms){forms=forms||document.forms,autopick.isElementAvailable(forms)&&autopick.attachFormSubmit(forms)},autopick.includeInFrames=function(iframes){iframes=iframes||document.getElementsByTagName("iframe");if(autopick.isElementAvailable(iframes))for(var i=0;i<iframes.length;i++)try{var forms=(iframes[i].contentDocument||iframes[i].contentWindow.document).getElementsByTagName("form");autopick.includeInForms(forms)}catch(e){}},autopick.isAutoPickDisabled=function(){return!$ZSIQAutopick.isenabled||!autopick.isloadedfirst||$ZSIQUTS.get("autopickdisabled")||0!=autopick.getObjKeyCount(autopick.submit)},autopick.isGuestToken=function(name,token){if(!name||name==token)return!0;var namearr=name.split(" ");return!isNaN(name)||"Guest"===name||"Visitor"===namearr[0]&&namearr[1]&&!isNaN(namearr[1])},{handleButtonGlow:handleButtonGlow,handleAnimate:handleAnimate,handle:function(triggers){if(triggers&&(action_type=parseInt(triggers.type),triggers.value)){if(action_value=JSON.parse(triggers.value),triggers.visitorinfo){for(var key in triggers.visitorinfo)if(triggers.visitorinfo.hasOwnProperty(key)){var value=triggers.visitorinfo[key];isNaN(value)||(triggers.visitorinfo[key]=parseInt(value))}action_visitorinfo=triggers.visitorinfo}0<(action_time=parseTime(action_value.time)-triggers.time)&&setTimeout(processTriggers,action_time),trigger_id=triggers.triggerid}},getUTSActionData:function(){},includeBeforeSubmit:function(utsobj){if(autopick.isnameset=!autopick.isGuestToken(utsobj.name,utsobj.token),autopick.isemailset=utsobj.isemailset||!1,autopick.isphoneset=utsobj.isphoneset||!1,autopick.iscompanyset=utsobj.iscompanyset||!1,!(autopick.isnameset&&autopick.isemailset&&autopick.isphoneset&&autopick.iscompanyset||autopick.isAutoPickDisabled()))try{autopick.includeInForms(),autopick.isloadedfirst=!1}catch(e){}}}}(window);var _ZLDReq=function(){};_ZLDReq.samples="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_ZLDReq.getC=function(str,i){var asci=str.charCodeAt(i);if(255<asci)throw"error";return asci},_ZLDReq.btoa=function(str){if(!str)return"";var i,sum,b64=[],maxinc=str.length-str.length%3;for(i=0;i<maxinc;i+=3)sum=_ZLDReq.getC(str,i)<<16|_ZLDReq.getC(str,i+1)<<8|_ZLDReq.getC(str,i+2),b64.push(_ZLDReq.samples.charAt(sum>>18)),b64.push(_ZLDReq.samples.charAt(sum>>12&63)),b64.push(_ZLDReq.samples.charAt(sum>>6&63)),b64.push(_ZLDReq.samples.charAt(63&sum));switch(str.length-maxinc){case 1:sum=_ZLDReq.getC(str,i)<<16,b64.push(_ZLDReq.samples.charAt(sum>>18)+_ZLDReq.samples.charAt(sum>>12&63)+"==");break;case 2:sum=_ZLDReq.getC(str,i)<<16|_ZLDReq.getC(str,i+1)<<8,b64.push(_ZLDReq.samples.charAt(sum>>18)+_ZLDReq.samples.charAt(sum>>12&63)+_ZLDReq.samples.charAt(sum>>6&63)+"=")}return b64.join("")};var $ZSIQChat=$ZSIQChat||function(){var widgetdata;SIQ_FLOAT=1,SIQ_BUTTON=2,SIQ_PERSONALIZE=3,_WINDOW_REPOPULATE=!1;var csslistmapping={},jslistmapping={};csslistmapping[SIQ_FLOAT]=["/styles/floatbutton.css"],csslistmapping[SIQ_BUTTON]=["/styles/buttonthemeWIDGTHEME.css"],csslistmapping[SIQ_PERSONALIZE]=["/styles/personalizethemeWIDGTHEME.css"],jslistmapping[SIQ_FLOAT]=["/js/floatbutton.js"],jslistmapping[SIQ_BUTTON]=["/js/newbutton.js"];var ispreview=!(jslistmapping[SIQ_PERSONALIZE]=["/js/personalizewidget.js"]),issignaturechat=!1;try{ispreview=_IS_PREVIEW}catch(e){}try{issignaturechat=_IS_SIGNATURE_CHAT}catch(e){}var getScriptSource=function(){return document.getElementById("zsiqscript").src},updateObject=function(widgetdata,newobj){if(null!=newobj.status)return widgetdata.widgetobj.status=newobj.status,widgetdata;var baseobj=widgetdata.widgetobj;if(5==_WIDGETTYPE&&(baseobj=newobj.theme||newobj.integprops?widgetdata.embedobj:widgetdata.embedobj.einfo.props),newobj.embedstatus)widgetdata.embedobj.einfo.embedstatus=newobj.embedstatus;else for(var key in newobj)baseobj[key]=newobj[key];return widgetdata.embedobj.einfo.embedstatus.STATUS=!newobj.toggleoffline,widgetdata};return loadStaticFiles=function(){var widgettype=widgetdata.widgettype,widgetthemeid=JSON.parse(widgetdata.widgetobj.sticker)[1].default,headArr=document.getElementsByTagName("head");headArr&&0!=headArr.length||((headArr=[])[0]=document.createElement("head"),document.insertBefore(document.body,headArr[0]));var isdev=widgetdata.commondata.isdev,schema=widgetdata.commondata.schema,server=getScriptSource().split("://")[1].replace("/widget",""),widcssversion=widgetdata.widgetobj.widcssversion,cssserverurl=schema+"://"+widgetdata.commondata.cssstatic+"/salesiq/"+widcssversion,jsstaticurl=widgetdata.commondata.jsstaticserver,csscdnserverurl=widgetdata.widgetobj.csscdnstaticserver,jscdnstaticurl=widgetdata.commondata.jscdnstaticserver;isdev&&(csscdnserverurl=cssserverurl=jsstaticurl=jscdnstaticurl=schema+"://"+server,csslistmapping[SIQ_FLOAT]=["/styles/common/gfonts.css","/styles/float/float-theme.css","/styles/float/font-icon.css","/styles/embed/new/common.css"],csslistmapping[SIQ_BUTTON]=["/styles/common/gfonts.css","/styles/embed/new/button/themeWIDGTHEME.css","/styles/embed/new/button/font-icon.css","/styles/embed/new/chatwindow/chatwindow.css","/styles/embed/new/common.css"],csslistmapping[SIQ_PERSONALIZE]=["/styles/common/gfonts.css","/styles/embed/new/personalize/common.css","/styles/embed/new/personalize/themeWIDGTHEME.css","/styles/embed/new/chatwindow/chatwindow.css","/styles/float/font-icon.css","/styles/embed/new/common.css"],jslistmapping[SIQ_FLOAT]=["/js/embed/new/chatwindow/chatwindow.js","/js/embed/new/float/float-template.js","/js/embed/new/float/floatbuttonui.js","/js/embed/new/float/floatbutton.js"],jslistmapping[SIQ_BUTTON]=["/js/embed/new/chatwindow/chatwindow.js","/js/embed/new/button/buttonui.js","/js/embed/new/button/button.js"],jslistmapping[SIQ_PERSONALIZE]=["/js/embed/new/chatwindow/chatwindow.js","/js/embed/new/personalize/personalizeui.js","/js/embed/new/personalize/personalize.js"]),ispreview&&(csslistmapping[SIQ_BUTTON]=["/styles/buttonpreviewtheme.css"],csslistmapping[SIQ_PERSONALIZE]=["/styles/personalizepreviewtheme.css"]);for(var csslist=csslistmapping[widgettype],jslist=jslistmapping[widgettype],i=0;i<csslist.length;i++){var cssurl=csscdnserverurl+csslist[i];cssurl=cssurl.replace(/WIDGTHEME/g,widgetthemeid);var csslink=document.createElement("link");csslink.rel="stylesheet",csslink.href=cssurl,notifyOnCDNFailure(csslink,headArr,(cssserverurl+csslist[i]).replace(/WIDGTHEME/g,widgetthemeid),"css"),headArr[0].appendChild(csslink)}for(i=0;i<jslist.length;i++){var wscript=document.createElement("script"),jsurl=jscdnstaticurl+jslist[i];wscript.src=jsurl,notifyOnCDNFailure(wscript,headArr,jsstaticurl+jslist[i],"js"),isdev&&(wscript.async=!1),headArr[0].appendChild(wscript)}},notifyOnCDNFailure=function(stag,headArr,src,type){stag.onerror=function(){$ZSIQCookie.set("cdn_status",1,1728e5);var link="";"js"==type?(link=document.createElement("script")).src=src:"css"==type&&((link=document.createElement("link")).rel="stylesheet",link.href=src),headArr[0].appendChild(link)}},{init:function(){try{widgetdata=WIDGET_DATA}catch(e){$ZSIQUtil.initializeAPIValues(),$ZSIQChat.getEmbedDetails()}},getWidgetData:function(){return widgetdata},getEmbedDetails:function(){var url=getScriptSource().replace("widget","getembeddetails.ls");url+="?widgetcode="+$zohosq.widgetcode;var data=$ZSIQUtil.getConfigFromStorage();data&&data.last_modified&&!ispreview&&(url=url+"&last_modified="+data.last_modified);var fetchavuid=!0;data&&data.widgetobj&&($ZSIQLSDB.get("ZLD"+data.widgetobj.lsid+"avuid")&&(fetchavuid=!1));url=url+"&fetchavuid="+fetchavuid,data&&data.version&&(url=url+"&version="+data.version);var api_lang=$ZSIQUtil.getAPILanguage();api_lang&&(url=url+"&lang_api="+api_lang),(0==api_lang.length&&data.widgetobj&&1==data.widgetobj.langchangeviaapi||0!=api_lang.length&&data.embedobj&&data.embedobj.lang!=api_lang)&&(url=url+"&fetchapilang="+!0);var browser_lang=$ZSIQUtil.getBrowserLanguage();browser_lang&&(url=url+"&lang_browser="+browser_lang);var isgeoinfoavailinclient=data&&data.geodetails;$ZSIQUtil.isFetchGeoDetails()&&!isgeoinfoavailinclient&&(url+="&fetchgeo=true");var domain,currdomain=((domain="")||(domain=location.hostname.toString().replace(/^w{3}\./,""),/^[a-zA-Z0-9-\.]+$/.test(domain)||(domain="")),domain||""),cpage=document.location.href,referrer=document.referrer,pagetitle=window.document.title;currdomain&&(url=url+"&currdomain="+encodeURIComponent(location.protocol+"//"+currdomain)),-1!=navigator.userAgent.indexOf("MSIE")||-1!=navigator.userAgent.indexOf("Trident")?window.btoa?(cpage=window.btoa(cpage),referrer=window.btoa(referrer)):(cpage=_ZLDReq.btoa(cpage),referrer=_ZLDReq.btoa(referrer)):(cpage=window.btoa(cpage),referrer=window.btoa(referrer)),url=url+"&pagetitle="+encodeURIComponent(pagetitle).substring(0,3e3)+"&cpage="+encodeURIComponent(cpage).substring(0,3e3),referrer&&(url=url+"&referrer="+encodeURIComponent(referrer).substring(0,3e3));var cookie=$ZSIQCookie.get("cdn_status");cookie&&(url=url+"&cdn_status="+encodeURIComponent(cookie));try{url=url+"&signature="+_IS_SIGNATURE_CHAT}catch(e){}ispreview&&0<_WIDGETTYPE&&_WIDGETTYPE<4&&(url=url+"&widgettype="+_WIDGETTYPE),ispreview&&(url=url+"&ispreview="+ispreview);$ZSIQUtil.ajax(url,function(response){var resp=$ZSIQUtil.parseToJSON(response);try{var objstr=resp[0].objString;$ZSIQChat.handleEmbedDetails(objstr,data)}catch(e){}},null,!0)},handleEmbedDetails:function(config,data){config.not_modified?(data.widgetobj.status=config.STATUS,data.widgetobj.hideembed=config.hideembed,data.commondata.jsstaticserver=config.jsstaticserver,data.commondata.imgstaticserver=config.imgstaticserver,data.widgetobj.cssstaticserver=config.cssstaticserver,data.commondata.jscdnstaticserver=config.jscdnstaticserver,data.widgetobj.csscdnstaticserver=config.csscdnstaticserver,data.commondata.cwrmjsstaticserver=config.cwrmjsstaticserver,data.commondata.cwumjsstaticserver=config.cwumjsstaticserver,data.widgetobj.wmsjsstaticserver=config.wmsjsstaticserver,data.widgetobj.widcssversion=config.widcssversion,data.embedobj.einfo.embedstatus.STATUS=config.STATUS,data.embedobj.einfo.embedstatus.DEPTLIST=config.DEPTLIST,data.embedobj.einfo.embedstatus.DEPARTMENTID=config.DEPARTMENTID,data.embedobj.params=config.params,config.userdetails&&(data.widgetobj.userdetails=config.userdetails,data.embedobj.einfo.userdetails=config.userdetails),config.geodetails&&(data.geodetails=config.geodetails),config.refreshapilang&&(data.embedobj.jsresource=config.jsresource,data.embedobj.lang=config.lang,data.embedobj.language=config.language,data.widgetobj.resourcefile=config.resourcefile,data.widgetobj.i18nkeys=config.i18nkeys),config.hasOwnProperty("isgdprenabled")&&(data.embedobj.pinfo.pinfo.isgdprenabled=config.isgdprenabled,data.embedobj.pinfo.pinfo.trackingprivacyconfig=config.trackingprivacyconfig,data.embedobj.pinfo.pinfo.chatprivacyconfig=config.chatprivacyconfig,data.embedobj.pinfo.pinfo.cookiepolicyurl=config.cookiepolicyurl,data.embedobj.pinfo.pinfo.chatcookiepolicyurl=config.chatcookiepolicyurl,data.embedobj.pinfo.pinfo.trackingprivacystatement=config.trackingprivacystatement),data.widgetobj.langchangeviaapi=config.langchangeviaapi,data.embedobj.ismailchimpenabled=config.ismailchimpenabled,data.embedobj.isaudiocallallowed=config.isaudiocallallowed,data.embedobj.cinfo=config.cinfo,delete config.not_modified):(data=config).widgetobj.avuid&&($ZSIQLSDB.set("ZLD"+data.widgetobj.lsid+"avuid",data.widgetobj.avuid),delete data.widgetobj.avuid),widgetdata=data,ispreview&&((widgetdata=updateObject(widgetdata,_MODIFIED_WIDGET_OBJ)).commondata.jscdnstaticserver=data.commondata.jsstaticserver,widgetdata.widgetobj.csscdnstaticserver=data.widgetobj.cssstaticserver),$UTSHandler.init(),$ZSIQUtil.startAfterReady(data.geodetails||{}),loadStaticFiles()},isPreview:function(){return ispreview},isSignatureChat:function(){return issignaturechat},updatePreviewConfig:function(){widgetdata=updateObject(widgetdata,_MODIFIED_WIDGET_OBJ)},loadPostMessage:function(){window.addEventListener?window.addEventListener("message",$ZSIQChat.handlePostMessage,!1):window.attachEvent("onmessage",$ZSIQChat.handlePostMessage)},handlePostMessage:function(event){try{var data=JSON.parse(event.data);if("zoho.salesiq.apimessage"===data.type){var value=data.visitor;value.name&&$zohosq.visitor.name(value.name),value.email&&$zohosq.visitor.email(value.email),value.contactnumber&&$zohosq.visitor.contactnumber(value.contactnumber)}else if("zoho.salesiq.gettrackingdetails"===data.type){var uvid=$UTSHandler.get("_zldt");if(!uvid)return;var message={type:"zoho.salesiq.trackingdetails"};message.trackingdetails={uvid:uvid},event.source.postMessage(JSON.stringify(message),"*")}}catch(e){}}}}();if(!$zoho.salesiq.init_called){var isdomloadhandled=!1;try{"async"!=$zoho.salesiq.mode&&($ZSIQChat.init(),isdomloadhandled=!0,$zoho.salesiq.init_called=!0)}catch(e){isdomloadhandled=!1}isdomloadhandled||($zoho.salesiq.init_called=!0,"complete"===document.readyState?$ZSIQChat.init():window.addEventListener?window.addEventListener("load",$ZSIQChat.init):window.attachEvent("onload",$ZSIQChat.init))}
