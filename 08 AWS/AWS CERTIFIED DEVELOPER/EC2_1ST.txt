---
AWSTemplateFormatVersion: "2010-09-09"
Description: REDHAT EC2

Parameters:
        SecurityGroupDescription:
                Description: Security Group Description
                Type: String

Resources:
        MyInstance:
                Type: AWS::EC2::Instance
                Properties:
                        InstanceType: t2.micro
                        ImageId: ami-052c08d70def0ac62 # REDHAT LINUX Mumbai region
                        SecurityGroups:
                                - !Ref SSHSecurityGroup

        #An Elastic IP
        MyEIP:
                Type: AWS::EC2::EIP
                Properties:
                        InstanceId: !Ref MyInstance

        #Security group
        SSHSecurityGroup:
                Type: AWS::EC2::SecurityGroup
                Properties:
                        GroupDescription: Enable ssh port
                        SecurityGroupIngress:
                        - CidrIp: 0.0.0.0/0
                          FromPort: 22
                          IpProtocol: tcp
                          ToPort: 22
                        - CidrIp: 0.0.0.0/0
                          FromPort: 80
                          IpProtocol: tcp
                          ToPort: 80
                        - CidrIp: 0.0.0.0/0
                          FromPort: 8080
                          IpProtocol: tcp
                          ToPort: 8080
