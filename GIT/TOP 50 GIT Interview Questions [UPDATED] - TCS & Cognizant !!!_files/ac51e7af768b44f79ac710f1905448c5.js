(function($){'use strict';if(typeof wpcf7==='undefined'||wpcf7===null){return;}
wpcf7=$.extend({cached:0,inputs:[]},wpcf7);$(function(){wpcf7.supportHtml5=(function(){var features={};var input=document.createElement('input');features.placeholder='placeholder'in input;var inputTypes=['email','url','tel','number','range','date'];$.each(inputTypes,function(index,value){input.setAttribute('type',value);features[value]=input.type!=='text';});return features;})();$('div.wpcf7 > form').each(function(){var $form=$(this);wpcf7.initForm($form);if(wpcf7.cached){wpcf7.refill($form);}});});wpcf7.getId=function(form){return parseInt($('input[name="_wpcf7"]',form).val(),10);};wpcf7.initForm=function(form){var $form=$(form);$form.submit(function(event){if(typeof window.FormData!=='function'){return;}
wpcf7.submit($form);event.preventDefault();});$('.wpcf7-submit',$form).after('<span class="ajax-loader"></span>');wpcf7.toggleSubmit($form);$form.on('click','.wpcf7-acceptance',function(){wpcf7.toggleSubmit($form);});$('.wpcf7-exclusive-checkbox',$form).on('click','input:checkbox',function(){var name=$(this).attr('name');$form.find('input:checkbox[name="'+name+'"]').not(this).prop('checked',false);});$('.wpcf7-list-item.has-free-text',$form).each(function(){var $freetext=$(':input.wpcf7-free-text',this);var $wrap=$(this).closest('.wpcf7-form-control');if($(':checkbox, :radio',this).is(':checked')){$freetext.prop('disabled',false);}else{$freetext.prop('disabled',true);}
$wrap.on('change',':checkbox, :radio',function(){var $cb=$('.has-free-text',$wrap).find(':checkbox, :radio');if($cb.is(':checked')){$freetext.prop('disabled',false).focus();}else{$freetext.prop('disabled',true);}});});if(!wpcf7.supportHtml5.placeholder){$('[placeholder]',$form).each(function(){$(this).val($(this).attr('placeholder'));$(this).addClass('placeheld');$(this).focus(function(){if($(this).hasClass('placeheld')){$(this).val('').removeClass('placeheld');}});$(this).blur(function(){if(''===$(this).val()){$(this).val($(this).attr('placeholder'));$(this).addClass('placeheld');}});});}
if(wpcf7.jqueryUi&&!wpcf7.supportHtml5.date){$form.find('input.wpcf7-date[type="date"]').each(function(){$(this).datepicker({dateFormat:'yy-mm-dd',minDate:new Date($(this).attr('min')),maxDate:new Date($(this).attr('max'))});});}
if(wpcf7.jqueryUi&&!wpcf7.supportHtml5.number){$form.find('input.wpcf7-number[type="number"]').each(function(){$(this).spinner({min:$(this).attr('min'),max:$(this).attr('max'),step:$(this).attr('step')});});}
$('.wpcf7-character-count',$form).each(function(){var $count=$(this);var name=$count.attr('data-target-name');var down=$count.hasClass('down');var starting=parseInt($count.attr('data-starting-value'),10);var maximum=parseInt($count.attr('data-maximum-value'),10);var minimum=parseInt($count.attr('data-minimum-value'),10);var updateCount=function(target){var $target=$(target);var length=$target.val().length;var count=down?starting-length:length;$count.attr('data-current-value',count);$count.text(count);if(maximum&&maximum<length){$count.addClass('too-long');}else{$count.removeClass('too-long');}
if(minimum&&length<minimum){$count.addClass('too-short');}else{$count.removeClass('too-short');}};$(':input[name="'+name+'"]',$form).each(function(){updateCount(this);$(this).keyup(function(){updateCount(this);});});});$form.on('change','.wpcf7-validates-as-url',function(){var val=$.trim($(this).val());if(val&&!val.match(/^[a-z][a-z0-9.+-]*:/i)&&-1!==val.indexOf('.')){val=val.replace(/^\/+/,'');val='http://'+val;}
$(this).val(val);});};wpcf7.submit=function(form){if(typeof window.FormData!=='function'){return;}
var $form=$(form);$('.ajax-loader',$form).addClass('is-active');$('[placeholder].placeheld',$form).each(function(i,n){$(n).val('');});wpcf7.clearResponse($form);var formData=new FormData($form.get(0));var detail={id:$form.closest('div.wpcf7').attr('id'),status:'init',inputs:[],formData:formData};$.each($form.serializeArray(),function(i,field){if('_wpcf7'==field.name){detail.contactFormId=field.value;}else if('_wpcf7_version'==field.name){detail.pluginVersion=field.value;}else if('_wpcf7_locale'==field.name){detail.contactFormLocale=field.value;}else if('_wpcf7_unit_tag'==field.name){detail.unitTag=field.value;}else if('_wpcf7_container_post'==field.name){detail.containerPostId=field.value;}else if(field.name.match(/^_wpcf7_\w+_free_text_/)){var owner=field.name.replace(/^_wpcf7_\w+_free_text_/,'');detail.inputs.push({name:owner+'-free-text',value:field.value});}else if(field.name.match(/^_/)){}else{detail.inputs.push(field);}});wpcf7.triggerEvent($form.closest('div.wpcf7'),'beforesubmit',detail);var ajaxSuccess=function(data,status,xhr,$form){detail.id=$(data.into).attr('id');detail.status=data.status;var $message=$('.wpcf7-response-output',$form);switch(data.status){case'validation_failed':$.each(data.invalidFields,function(i,n){$(n.into,$form).each(function(){wpcf7.notValidTip(this,n.message);$('.wpcf7-form-control',this).addClass('wpcf7-not-valid');$('[aria-invalid]',this).attr('aria-invalid','true');});});$message.addClass('wpcf7-validation-errors');$form.addClass('invalid');wpcf7.triggerEvent(data.into,'invalid',detail);break;case'spam':$message.addClass('wpcf7-spam-blocked');$form.addClass('spam');$('[name="g-recaptcha-response"]',$form).each(function(){if(''===$(this).val()){var $recaptcha=$(this).closest('.wpcf7-form-control-wrap');wpcf7.notValidTip($recaptcha,wpcf7.recaptcha.messages.empty);}});wpcf7.triggerEvent(data.into,'spam',detail);break;case'mail_sent':$message.addClass('wpcf7-mail-sent-ok');$form.addClass('sent');if(data.onSentOk){$.each(data.onSentOk,function(i,n){eval(n)});}
wpcf7.triggerEvent(data.into,'mailsent',detail);break;case'mail_failed':case'acceptance_missing':default:$message.addClass('wpcf7-mail-sent-ng');$form.addClass('failed');wpcf7.triggerEvent(data.into,'mailfailed',detail);}
wpcf7.refill($form,data);if(data.onSubmit){$.each(data.onSubmit,function(i,n){eval(n)});}
wpcf7.triggerEvent(data.into,'submit',detail);if('mail_sent'==data.status){$form.each(function(){this.reset();});}
$form.find('[placeholder].placeheld').each(function(i,n){$(n).val($(n).attr('placeholder'));});$message.html('').append(data.message).slideDown('fast');$message.attr('role','alert');$('.screen-reader-response',$form.closest('.wpcf7')).each(function(){var $response=$(this);$response.html('').attr('role','').append(data.message);if(data.invalidFields){var $invalids=$('<ul></ul>');$.each(data.invalidFields,function(i,n){if(n.idref){var $li=$('<li></li>').append($('<a></a>').attr('href','#'+n.idref).append(n.message));}else{var $li=$('<li></li>').append(n.message);}
$invalids.append($li);});$response.append($invalids);}
$response.attr('role','alert').focus();});};$.ajax({type:'POST',url:wpcf7.apiSettings.getRoute('/contact-forms/'+wpcf7.getId($form)+'/feedback'),data:formData,dataType:'json',processData:false,contentType:false}).done(function(data,status,xhr){ajaxSuccess(data,status,xhr,$form);$('.ajax-loader',$form).removeClass('is-active');}).fail(function(xhr,status,error){var $e=$('<div class="ajax-error"></div>').text(error.message);$form.after($e);});};wpcf7.triggerEvent=function(target,name,detail){var $target=$(target);var event=new CustomEvent('wpcf7'+name,{bubbles:true,detail:detail});$target.get(0).dispatchEvent(event);$target.trigger('wpcf7:'+name,detail);$target.trigger(name+'.wpcf7',detail);};wpcf7.toggleSubmit=function(form,state){var $form=$(form);var $submit=$('input:submit',$form);if(typeof state!=='undefined'){$submit.prop('disabled',!state);return;}
if($form.hasClass('wpcf7-acceptance-as-validation')){return;}
$submit.prop('disabled',false);$('input:checkbox.wpcf7-acceptance',$form).each(function(){var $a=$(this);if($a.hasClass('wpcf7-invert')&&$a.is(':checked')||!$a.hasClass('wpcf7-invert')&&!$a.is(':checked')){$submit.prop('disabled',true);return false;}});};wpcf7.notValidTip=function(target,message){var $target=$(target);$('.wpcf7-not-valid-tip',$target).remove();$('<span role="alert" class="wpcf7-not-valid-tip"></span>').text(message).appendTo($target);if($target.is('.use-floating-validation-tip *')){var fadeOut=function(target){$(target).not(':hidden').animate({opacity:0},'fast',function(){$(this).css({'z-index':-100});});};$target.on('mouseover','.wpcf7-not-valid-tip',function(){fadeOut(this);});$target.on('focus',':input',function(){fadeOut($('.wpcf7-not-valid-tip',$target));});}};wpcf7.refill=function(form,data){var $form=$(form);var refillCaptcha=function($form,items){$.each(items,function(i,n){$form.find(':input[name="'+i+'"]').val('');$form.find('img.wpcf7-captcha-'+i).attr('src',n);var match=/([0-9]+)\.(png|gif|jpeg)$/.exec(n);$form.find('input:hidden[name="_wpcf7_captcha_challenge_'+i+'"]').attr('value',match[1]);});};var refillQuiz=function($form,items){$.each(items,function(i,n){$form.find(':input[name="'+i+'"]').val('');$form.find(':input[name="'+i+'"]').siblings('span.wpcf7-quiz-label').text(n[0]);$form.find('input:hidden[name="_wpcf7_quiz_answer_'+i+'"]').attr('value',n[1]);});};if(typeof data==='undefined'){$.ajax({type:'GET',url:wpcf7.apiSettings.getRoute('/contact-forms/'+wpcf7.getId($form)+'/refill'),beforeSend:function(xhr){var nonce=$form.find(':input[name="_wpnonce"]').val();if(nonce){xhr.setRequestHeader('X-WP-Nonce',nonce);}},dataType:'json'}).done(function(data,status,xhr){if(data.captcha){refillCaptcha($form,data.captcha);}
if(data.quiz){refillQuiz($form,data.quiz);}});}else{if(data.captcha){refillCaptcha($form,data.captcha);}
if(data.quiz){refillQuiz($form,data.quiz);}}};wpcf7.clearResponse=function(form){var $form=$(form);$form.removeClass('invalid spam sent failed');$form.siblings('.screen-reader-response').html('').attr('role','');$('.wpcf7-not-valid-tip',$form).remove();$('[aria-invalid]',$form).attr('aria-invalid','false');$('.wpcf7-form-control',$form).removeClass('wpcf7-not-valid');$('.wpcf7-response-output',$form).hide().empty().removeAttr('role').removeClass('wpcf7-mail-sent-ok wpcf7-mail-sent-ng wpcf7-validation-errors wpcf7-spam-blocked');};wpcf7.apiSettings.getRoute=function(path){var url=wpcf7.apiSettings.root;url=url.replace(wpcf7.apiSettings.namespace,wpcf7.apiSettings.namespace+path);return url;};})(jQuery);(function(){if(typeof window.CustomEvent==="function")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt;}
CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent;})();;if(typeof tb_pathToImage!='string'){var tb_pathToImage=thickboxL10n.loadingAnimation;}
/*!!!!!!!!!!!!!!!!! edit below this line at your own risk !!!!!!!!!!!!!!!!!!!!!!!*/
jQuery(document).ready(function(){tb_init('a.thickbox, area.thickbox, input.thickbox');imgLoader=new Image();imgLoader.src=tb_pathToImage;});function tb_init(domChunk){jQuery('body').on('click',domChunk,tb_click).on('thickbox:iframe:loaded',function(){jQuery('#TB_window').removeClass('thickbox-loading');});}
function tb_click(){var t=this.title||this.name||null;var a=this.href||this.alt;var g=this.rel||false;tb_show(t,a,g);this.blur();return false;}
function tb_show(caption,url,imageGroup){var $closeBtn;try{if(typeof document.body.style.maxHeight==="undefined"){jQuery("body","html").css({height:"100%",width:"100%"});jQuery("html").css("overflow","hidden");if(document.getElementById("TB_HideSelect")===null){jQuery("body").append("<iframe id='TB_HideSelect'>"+thickboxL10n.noiframes+"</iframe><div id='TB_overlay'></div><div id='TB_window' class='thickbox-loading'></div>");jQuery("#TB_overlay").click(tb_remove);}}else{if(document.getElementById("TB_overlay")===null){jQuery("body").append("<div id='TB_overlay'></div><div id='TB_window' class='thickbox-loading'></div>");jQuery("#TB_overlay").click(tb_remove);jQuery('body').addClass('modal-open');}}
if(tb_detectMacXFF()){jQuery("#TB_overlay").addClass("TB_overlayMacFFBGHack");}else{jQuery("#TB_overlay").addClass("TB_overlayBG");}
if(caption===null){caption="";}
jQuery("body").append("<div id='TB_load'><img src='"+imgLoader.src+"' width='208' /></div>");jQuery('#TB_load').show();var baseURL;if(url.indexOf("?")!==-1){baseURL=url.substr(0,url.indexOf("?"));}else{baseURL=url;}
var urlString=/\.jpg$|\.jpeg$|\.png$|\.gif$|\.bmp$/;var urlType=baseURL.toLowerCase().match(urlString);if(urlType=='.jpg'||urlType=='.jpeg'||urlType=='.png'||urlType=='.gif'||urlType=='.bmp'){TB_PrevCaption="";TB_PrevURL="";TB_PrevHTML="";TB_NextCaption="";TB_NextURL="";TB_NextHTML="";TB_imageCount="";TB_FoundURL=false;if(imageGroup){TB_TempArray=jQuery("a[rel="+imageGroup+"]").get();for(TB_Counter=0;((TB_Counter<TB_TempArray.length)&&(TB_NextHTML===""));TB_Counter++){var urlTypeTemp=TB_TempArray[TB_Counter].href.toLowerCase().match(urlString);if(!(TB_TempArray[TB_Counter].href==url)){if(TB_FoundURL){TB_NextCaption=TB_TempArray[TB_Counter].title;TB_NextURL=TB_TempArray[TB_Counter].href;TB_NextHTML="<span id='TB_next'>&nbsp;&nbsp;<a href='#'>"+thickboxL10n.next+"</a></span>";}else{TB_PrevCaption=TB_TempArray[TB_Counter].title;TB_PrevURL=TB_TempArray[TB_Counter].href;TB_PrevHTML="<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>"+thickboxL10n.prev+"</a></span>";}}else{TB_FoundURL=true;TB_imageCount=thickboxL10n.image+' '+(TB_Counter+1)+' '+thickboxL10n.of+' '+(TB_TempArray.length);}}}
imgPreloader=new Image();imgPreloader.onload=function(){imgPreloader.onload=null;var pagesize=tb_getPageSize();var x=pagesize[0]-150;var y=pagesize[1]-150;var imageWidth=imgPreloader.width;var imageHeight=imgPreloader.height;if(imageWidth>x){imageHeight=imageHeight*(x/imageWidth);imageWidth=x;if(imageHeight>y){imageWidth=imageWidth*(y/imageHeight);imageHeight=y;}}else if(imageHeight>y){imageWidth=imageWidth*(y/imageHeight);imageHeight=y;if(imageWidth>x){imageHeight=imageHeight*(x/imageWidth);imageWidth=x;}}
TB_WIDTH=imageWidth+30;TB_HEIGHT=imageHeight+60;jQuery("#TB_window").append("<a href='' id='TB_ImageOff'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><img id='TB_Image' src='"+url+"' width='"+imageWidth+"' height='"+imageHeight+"' alt='"+caption+"'/></a>"+"<div id='TB_caption'>"+caption+"<div id='TB_secondLine'>"+TB_imageCount+TB_PrevHTML+TB_NextHTML+"</div></div><div id='TB_closeWindow'><button type='button' id='TB_closeWindowButton'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><span class='tb-close-icon'></span></button></div>");jQuery("#TB_closeWindowButton").click(tb_remove);if(!(TB_PrevHTML==="")){function goPrev(){if(jQuery(document).unbind("click",goPrev)){jQuery(document).unbind("click",goPrev);}
jQuery("#TB_window").remove();jQuery("body").append("<div id='TB_window'></div>");tb_show(TB_PrevCaption,TB_PrevURL,imageGroup);return false;}
jQuery("#TB_prev").click(goPrev);}
if(!(TB_NextHTML==="")){function goNext(){jQuery("#TB_window").remove();jQuery("body").append("<div id='TB_window'></div>");tb_show(TB_NextCaption,TB_NextURL,imageGroup);return false;}
jQuery("#TB_next").click(goNext);}
jQuery(document).bind('keydown.thickbox',function(e){if(e.which==27){tb_remove();}else if(e.which==190){if(!(TB_NextHTML=="")){jQuery(document).unbind('thickbox');goNext();}}else if(e.which==188){if(!(TB_PrevHTML=="")){jQuery(document).unbind('thickbox');goPrev();}}
return false;});tb_position();jQuery("#TB_load").remove();jQuery("#TB_ImageOff").click(tb_remove);jQuery("#TB_window").css({'visibility':'visible'});};imgPreloader.src=url;}else{var queryString=url.replace(/^[^\?]+\??/,'');var params=tb_parseQuery(queryString);TB_WIDTH=(params['width']*1)+30||630;TB_HEIGHT=(params['height']*1)+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(url.indexOf('TB_iframe')!=-1){urlNoQuery=url.split('TB_');jQuery("#TB_iframeContent").remove();if(params['modal']!="true"){jQuery("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+caption+"</div><div id='TB_closeAjaxWindow'><button type='button' id='TB_closeWindowButton'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><span class='tb-close-icon'></span></button></div></div><iframe frameborder='0' hspace='0' allowtransparency='true' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;' >"+thickboxL10n.noiframes+"</iframe>");}else{jQuery("#TB_overlay").unbind();jQuery("#TB_window").append("<iframe frameborder='0' hspace='0' allowtransparency='true' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;'>"+thickboxL10n.noiframes+"</iframe>");}}else{if(jQuery("#TB_window").css("visibility")!="visible"){if(params['modal']!="true"){jQuery("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+caption+"</div><div id='TB_closeAjaxWindow'><button type='button' id='TB_closeWindowButton'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><span class='tb-close-icon'></span></button></div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px'></div>");}else{jQuery("#TB_overlay").unbind();jQuery("#TB_window").append("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px;'></div>");}}else{jQuery("#TB_ajaxContent")[0].style.width=ajaxContentW+"px";jQuery("#TB_ajaxContent")[0].style.height=ajaxContentH+"px";jQuery("#TB_ajaxContent")[0].scrollTop=0;jQuery("#TB_ajaxWindowTitle").html(caption);}}
jQuery("#TB_closeWindowButton").click(tb_remove);if(url.indexOf('TB_inline')!=-1){jQuery("#TB_ajaxContent").append(jQuery('#'+params['inlineId']).children());jQuery("#TB_window").bind('tb_unload',function(){jQuery('#'+params['inlineId']).append(jQuery("#TB_ajaxContent").children());});tb_position();jQuery("#TB_load").remove();jQuery("#TB_window").css({'visibility':'visible'});}else if(url.indexOf('TB_iframe')!=-1){tb_position();jQuery("#TB_load").remove();jQuery("#TB_window").css({'visibility':'visible'});}else{var load_url=url;load_url+=-1===url.indexOf('?')?'?':'&';jQuery("#TB_ajaxContent").load(load_url+="random="+(new Date().getTime()),function(){tb_position();jQuery("#TB_load").remove();tb_init("#TB_ajaxContent a.thickbox");jQuery("#TB_window").css({'visibility':'visible'});});}}
if(!params['modal']){jQuery(document).bind('keydown.thickbox',function(e){if(e.which==27){tb_remove();return false;}});}
$closeBtn=jQuery('#TB_closeWindowButton');if($closeBtn.find('.tb-close-icon').is(':visible')){$closeBtn.focus();}}catch(e){}}
function tb_showIframe(){jQuery("#TB_load").remove();jQuery("#TB_window").css({'visibility':'visible'}).trigger('thickbox:iframe:loaded');}
function tb_remove(){jQuery("#TB_imageOff").unbind("click");jQuery("#TB_closeWindowButton").unbind("click");jQuery('#TB_window').fadeOut('fast',function(){jQuery('#TB_window, #TB_overlay, #TB_HideSelect').trigger('tb_unload').unbind().remove();jQuery('body').trigger('thickbox:removed');});jQuery('body').removeClass('modal-open');jQuery("#TB_load").remove();if(typeof document.body.style.maxHeight=="undefined"){jQuery("body","html").css({height:"auto",width:"auto"});jQuery("html").css("overflow","");}
jQuery(document).unbind('.thickbox');return false;}
function tb_position(){var isIE6=typeof document.body.style.maxHeight==="undefined";jQuery("#TB_window").css({marginLeft:'-'+parseInt((TB_WIDTH/2),10)+'px',width:TB_WIDTH+'px'});if(!isIE6){jQuery("#TB_window").css({marginTop:'-'+parseInt((TB_HEIGHT/2),10)+'px'});}}
function tb_parseQuery(query){var Params={};if(!query){return Params;}
var Pairs=query.split(/[;&]/);for(var i=0;i<Pairs.length;i++){var KeyVal=Pairs[i].split('=');if(!KeyVal||KeyVal.length!=2){continue;}
var key=unescape(KeyVal[0]);var val=unescape(KeyVal[1]);val=val.replace(/\+/g,' ');Params[key]=val;}
return Params;}
function tb_getPageSize(){var de=document.documentElement;var w=window.innerWidth||self.innerWidth||(de&&de.clientWidth)||document.body.clientWidth;var h=window.innerHeight||self.innerHeight||(de&&de.clientHeight)||document.body.clientHeight;arrayPageSize=[w,h];return arrayPageSize;}
function tb_detectMacXFF(){var userAgent=navigator.userAgent.toLowerCase();if(userAgent.indexOf('mac')!=-1&&userAgent.indexOf('firefox')!=-1){return true;}};(function($){$.expr[":"].onScreen=function(elem){var $window=$(window);var viewport_top=$window.scrollTop()
var viewport_height=$window.height()
var viewport_bottom=viewport_top+viewport_height
var $elem=$(elem)
var top=$elem.offset().top
var height=$elem.height()
var bottom=top+height
return(top>=viewport_top&&top<viewport_bottom)||(bottom>viewport_top&&bottom<=viewport_bottom)||(height>viewport_height&&top<=viewport_top&&bottom>=viewport_bottom)}})(jQuery);jQuery(document).ready(function($){$(window).scroll(function(){$('.animate').filter(":onScreen").not('.load').each(function(i){var $this=$(this);var ind=i*100;var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$this.offset().top;if(docViewBottom>=elemTop){setTimeout(function(){$this.trigger('load');},ind);}});});$('.animate').on('load',function(){$(this).addClass('load');});$('.form_field').click(function(){$(this).removeAttr('style');});});jQuery(document).ready(function($){$('.v_parallax_block').each(function(){var $bgobj=$(this);var i=parseInt($bgobj.attr('data-scroll'));var rev=parseInt($bgobj.attr('data-rev'));var ptop=$bgobj.parent().position().top;var adjust=parseInt($bgobj.attr('data-adjust'));var height=$bgobj.height();var v_parallax_block_height=$bgobj.find('.parallax_content').height();if(height<v_parallax_block_height)
height=v_parallax_block_height;if(rev==2){}else{var $parent=$bgobj.parent().parent();if($parent.hasClass('stripe')){$parent.css('height',height+'px');}}
$(window).scroll(function(e){e.preventDefault();var $window=jQuery(window);var yPos=Math.round((($window.scrollTop())/i));var coords;if(rev!=undefined){if(rev==2){yPos=Math.round((($window.scrollTop()-ptop)/i));$bgobj.parent().css('-webkit-transform','translateY('+yPos+'px)');$bgobj.parent().css('transform','translateY('+yPos+'px)');}else if(rev==1){yPos=yPos-adjust;coords='50% '+yPos+'px';$bgobj.css('background-position',coords);}else{yPos=adjust-yPos;coords='50% '+yPos+'px';$bgobj.css('background-position',coords);}}});});$('section.stripe').each(function(){var style=$(this).find('.v_column.stripe_container .v_module').attr('data-class');if(style){style='stripe '+style;$(this).find('.v_column.stripe .v_module').removeAttr('data-class');$(this).attr('class',style);}
var style=$(this).find('.v_column.stripe .v_module').attr('data-class');if(style){style='stripe '+style;$(this).find('.v_column.stripe .v_module').removeAttr('data-class');$(this).attr('class',style);}});});jQuery(document).ready(function($){$('.nav-tabs').each(function(){if(!$(this).find('li').hasClass('active')){$(this).find('a:first').tab('show');$(this).find('li:first').addClass('active');}});$('.nav-tabs a').click(function(e){e.preventDefault();if((typeof $().tab=='function')){$(this).tab('show');}});$('.accordion').each(function(){if($(this).hasClass('load_first')){$(this).find('.accordion-group:first-child').addClass('check_load_first');$(this).find('.accordion-group:first-child .accordion-toggle').trigger('click');}});jQuery(document).ready(function($){if($('.accordion-group.panel').is(':not(.check_load_first)')){$('.accordion').on('shown.bs.collapse',function(){var offset=$(this).find('.collapse.in').prev('.accordion-heading');if(offset){$('html,body').animate({scrollTop:$(offset).offset().top-150},500);}});}});$('.image_slider').each(function(){$(this).flexslider({prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",});});if($.isFunction($.fn.magnificPopup)){$('.ajax-popup-link').magnificPopup({type:'ajax',alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:'auto',closeBtnInside:true,preloader:false,midClick:true,removalDelay:300,mainClass:'my-mfp-zoom-in'});jQuery('.pop').magnificPopup({type:'image',gallery:{enabled:true}});jQuery('.gallery').magnificPopup({delegate:'a',type:'image',tLoading:'Loading image #%curr%...',mainClass:'mfp-img-mobile',gallery:{enabled:true,navigateByImgClick:true,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(item){return item.el.attr('title');}}});};$('.knob').each(function(){var $this=$(this).find('.dial');var myVal=$this.val();$this.knob({draw:function(){if(this.$.data('skin')=='tron'){var a=this.angle(this.cv),sa=this.startAngle,sat=this.startAngle,ea,eat=sat+a,r=true;this.g.lineWidth=this.lineWidth;this.o.cursor&&(sat=eat-0.3)&&(eat=eat+0.3);if(this.o.displayPrevious){ea=this.startAngle+this.angle(this.value);this.o.cursor&&(sa=ea-0.3)&&(ea=ea+0.3);this.g.beginPath();this.g.strokeStyle=this.previousColor;this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,sa,ea,false);this.g.stroke();}
this.g.beginPath();this.g.strokeStyle=r?this.o.fgColor:this.fgColor;this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,sat,eat,false);this.g.stroke();this.g.lineWidth=2;this.g.beginPath();this.g.strokeStyle=this.o.fgColor;this.g.arc(this.xy,this.xy,this.radius-this.lineWidth+1+this.lineWidth*2/3,0,2*Math.PI,false);this.g.stroke();return false;}}});$({value:0}).animate({value:myVal},{duration:2400,easing:'swing',step:function(){$this.val(Math.ceil(this.value)).trigger('change');}})});});jQuery(document).ready(function($){$('body').delegate('.form .form_submit','click',function(event){event.preventDefault();var parent=$(this).parent();var $response=parent.find(".response");var nonce=$response.attr('data-security');var error='';var to=[]
var data=[];var label=[];var regex=[];var to=parent.attr('data-to');var subject=parent.attr('data-subject');regex['email']=/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z]{2,4}$)/i;regex['phone']=/[A-Z0-9]{7}|[A-Z0-9][A-Z0-9-]{7}/i;regex['numeric']=/^[0-9]+$/i;regex['captcha']=/^[0-9]+$/i;regex['required']=/([^\s])/;var i=0;parent.find('.form_field').each(function(){i++;var validate=$(this).attr('data-validate');var value=$(this).val();if(!value.match(regex[validate])){error+=' '+vibe_shortcode_strings.invalid_string+$(this).attr('placeholder');$(this).css('border-color','#e16038');}else{data[i]=value;label[i]=$(this).attr('placeholder');if(parent.hasClass('isocharset')){label[i]=encodeURI(label[i]);data[i]=encodeURI(value);}}
if(validate==='captcha'&&error===""){var $num=$(this).attr('id');var $sum=$(this).closest('.math-sum');var num1=parseInt($('#'+$num+'-1').text());var num2=parseInt($('#'+$num+'-2').text());var sumval=parseInt($(this).val());if(sumval!=(num1+num2))
error+=vibe_shortcode_strings.captcha_mismatch;}});if(error!==""){$response.fadeIn("slow");$response.html("<span style='color:#D03922;'>"+vibe_shortcode_strings.error_string+" "+error+"</span>");}else{$response.css("display","block");$response.html("<span style='color:#0E7A00;'>"+vibe_shortcode_strings.sending_mail+"... </span>");$response.fadeIn("slow");setTimeout(function(){sendmail(to,subject,data,label,parent,nonce);},2000);}
return false;});function sendmail(to,subject,formdata,labels,parent,nonce){var $response=parent.find(".response");var isocharset=false;if(parent.hasClass('isocharset'))
isocharset=true;$.ajax({type:"POST",url:ajaxurl,data:{action:'vibe_form_submission',to:to,subject:subject,data:JSON.stringify(formdata),label:JSON.stringify(labels),isocharset:isocharset,security:nonce},cache:false,success:function(html){console.log(html);$response.fadeIn("slow");$response.html(html);if(html.indexOf('<span')===0){parent.find('textarea').val('');parent.find('input[type="text"]').val('');}
setTimeout(function(){$response.fadeOut("slow");},10000);}});}});jQuery(document).load(function($){$('.mejs-container').each(function(){$(this).addClass('mejs-mejskin');});});jQuery(document).ready(function($){if($.isFunction($.fn.flexslider)){$('.image_slider').each(function(){$(this).flexslider({prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",});});$('.vibe_carousel.flexslider').each(function(){var $this=$(this);if($(this).find('.slides').length){var dnav=parseInt($this.attr('data-directionnav'));if(typeof dnav===typeof undefined||dnav===false){dnav=1;}
$this.flexslider({animation:"slide",controlNav:parseInt($this.attr('data-controlnav')),directionNav:dnav,animationLoop:parseInt($this.attr('data-autoslide')),slideshow:parseInt($this.attr('data-autoslide')),itemWidth:parseInt($this.attr('data-block-width')),itemMargin:30,minItems:parseInt($this.attr('data-block-min')),maxItems:parseInt($this.attr('data-block-max')),prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",move:parseInt($this.attr('data-block-move')),start:function(slider){$(slider).removeClass('loading');},before:function(slider){console.log(slider);},after:function(slider){console.log(slider);}});}
if($this.hasClass('woocommerce')){$this.flexslider({selector:".products > li",animation:"slide",controlNav:false,directionNav:true,animationLoop:false,slideshow:false,minItems:1,maxItems:1,itemWidth:100,itemMargin:0,prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",});}
if($this.find('.woocommerce').length){$this.find('.woocommerce').flexslider({selector:".products > li",animation:"slide",controlNav:false,directionNav:true,animationLoop:false,slideshow:false,minItems:1,maxItems:1,itemWidth:100,itemMargin:0,prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",});}});}});jQuery(window).load(function($){var $=jQuery;$('.custom_post_filterable').each(function(){var $container=$(this).find('.filterableitems_container'),$filtersdiv=$(this).find('.vibe_filterable'),$checkboxes=$(this).find('.vibe_filterable a');if(jQuery.fn.imagesLoaded){$container.imagesLoaded(function(){$container.isotope({itemSelector:'.filteritem'});});}else{$container.isotope({itemSelector:'.filteritem'});}
$checkboxes.click(function(event){event.preventDefault();var me=$(this);$filtersdiv.find('.active').removeClass();var filters=me.attr('data-filter');me.parent().addClass('active');$container.isotope({filter:filters});});$('.vibe_filterable a:first').trigger('click');$('.vibe_filterable a:first').parent().addClass('active');});});jQuery(window).load(function($){jQuery('.grid.masonry').each(function($){var $container=jQuery(this);$container.imagesLoaded(function(){var width=parseInt($container.attr('data-width'));var gutter=parseInt($container.attr('data-gutter'));if(jQuery('body').hasClass('rtl')){$container.isotope({itemSelector:'.grid-item',columnWidth:width,gutterWidth:gutter,layoutMode:'masonry',isRTL:true,});}else{$container.isotope({itemSelector:'.grid-item',columnWidth:width,gutterWidth:gutter,layoutMode:'masonry',});}});});});jQuery(document).ready(function($){$('.fitvids').each(function(){$(this).fitVids();});if($('.vibe_grid').length&&$('.vibe_grid').hasClass('inifnite_scroll')){var $this=$('.vibe_grid.inifnite_scroll:not(.loaded)');var end=$this.parent().find('.end_grid');var load=$this.parent().find('.load_grid');var args=$this.find('.wp_query_args').html();var max=parseInt($this.find('.wp_query_args').attr('data-max-pages'));var top=$('.vibe_grid.inifnite_scroll:not(.loaded) li:last').offset().top-500;var rel=parseInt($('.vibe_grid.inifnite_scroll:not(.loaded)').attr('data-page'));$(window).data('ajaxready',true).scroll(function(e){if($(window).data('ajaxready')==false)return;if(!$('.vibe_grid.inifnite_scroll').hasClass('loaded'))
top=$('.vibe_grid.inifnite_scroll:not(.loaded) li:last').offset().top-500;else
rel=max;if($(window).scrollTop()>=top&&rel<max){$(window).data('ajaxready',false);$.ajax({type:"POST",url:ajaxurl,data:{action:'grid_scroll',args:args,page:rel},cache:false,success:function(html){if(html){rel++;$this.attr('data-page',rel);if($this.hasClass('masonry')){$('.vibe_grid.inifnite_scroll .grid.masonry').isotope('insert',$(html));$('.vibe_grid.inifnite_scroll .grid.masonry').imagesLoaded(function(){$('.vibe_grid.inifnite_scroll .grid.masonry').isotope('layout');});}else{$('.vibe_grid.inifnite_scroll:not(.loaded)>.grid>li:last').after(html);}}
$(window).data('ajaxready',true);}});}else{if(rel==max){end.fadeIn(200);load.fadeOut(200);$this.addClass('loaded');}}});}});jQuery(document).ready(function($){var zip_uploader;jQuery('#upload_zip_button').on('click',function(event){event.preventDefault();var url=$(this).attr('data-admin-url')+'media-upload.php?type=upload&tab=upload&TB_iframe=1';tb_show('Upload ZIP package',url);});});jQuery(document).ready(function($){$('.submit_registration_form').on('click',function(event){event.preventDefault();window.onbeforeunload=null;var $this=$(this);var parent=$this.closest('.wplms_registration_form');parent.find('.message').remove();if($this.hasClass('loading'))
return;$('.field_error').each(function(){$(this).removeClass('field_error')});$this.addClass('loading');var settings=[];parent.find('input,textarea,select').each(function(){if($(this).is(':radio')){if($(this).is(':checked')){var data={id:$(this).attr('name'),value:$(this).val()};}}else if($(this).is(':checkbox')){if($(this).is(':checked')){var data={id:$(this).attr('name'),value:$(this).val()};}}else if($(this).is('select')){var data={id:$(this).attr('name'),value:$(this).val()};}else if($(this).is('input')){var data={id:$(this).attr('name'),value:$(this).val()};}else if($(this).is('textarea')){if($(this).hasClass('wp-editor-area')&&$(this).attr('aria-hidden')=='true'){var data={id:$(this).attr('name'),value:tinyMCE.get($(this).attr('id')).getContent({format:'raw'})};}else{var data={id:$(this).attr('name'),value:$(this).val()};}}
if(data)
settings.push(data);});var response='';if(typeof grecaptcha!='undefined'&&$('.g-recaptcha').length!=0){response=grecaptcha.getResponse();if(response.length==0){parent.append('<div class="message">'+vibe_shortcode_strings.captcha_mismatch+'</div>');$this.removeClass('loading');return;}}
$.ajax({type:"POST",url:ajaxurl,data:{action:'wplms_register_user',name:$this.parent().parent().closest('.wplms_registration_form').data('form-name'),security:$('#_wpnonce').val(),settings:JSON.stringify(settings)},cache:false,success:function(html){$this.removeClass('loading');parent.append(html);$('.field_error .message.error').click(function(){$(this).fadeOut(100);});}});});});;(function(window,document,exports,global,define,undefined){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.0.1
 */
(function(){function r(a,b){n[l]=a;n[l+1]=b;l+=2;2===l&&A()}function s(a){return"function"===typeof a}function F(){return function(){process.nextTick(t)}}function G(){var a=0,b=new B(t),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function H(){var a=new MessageChannel;a.port1.onmessage=t;return function(){a.port2.postMessage(0)}}function I(){return function(){setTimeout(t,1)}}function t(){for(var a=0;a<l;a+=2)(0,n[a])(n[a+1]),n[a]=void 0,n[a+1]=void 0;l=0}function p(){}function J(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function K(a,b,c){r(function(a){var e=!1,f=J(c,b,function(c){e||(e=!0,b!==c?q(a,c):m(a,c))},function(b){e||(e=!0,g(a,b))});!e&&f&&(e=!0,g(a,f))},a)}function L(a,b){1===b.a?m(a,b.b):2===a.a?g(a,b.b):u(b,void 0,function(b){q(a,b)},function(b){g(a,b)})}function q(a,b){if(a===b)g(a,new TypeError("You cannot resolve a promise with itself"));else if("function"===typeof b||"object"===typeof b&&null!==b)if(b.constructor===a.constructor)L(a,b);else{var c;try{c=b.then}catch(d){v.error=d,c=v}c===v?g(a,v.error):void 0===c?m(a,b):s(c)?K(a,b,c):m(a,b)}else m(a,b)}function M(a){a.f&&a.f(a.b);x(a)}function m(a,b){void 0===a.a&&(a.b=b,a.a=1,0!==a.e.length&&r(x,a))}function g(a,b){void 0===a.a&&(a.a=2,a.b=b,r(M,a))}function u(a,b,c,d){var e=a.e,f=e.length;a.f=null;e[f]=b;e[f+1]=c;e[f+2]=d;0===f&&a.a&&r(x,a)}function x(a){var b=a.e,c=a.a;if(0!==b.length){for(var d,e,f=a.b,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a.e.length=0}}function D(){this.error=null}function C(a,b,c,d){var e=s(c),f,k,h,l;if(e){try{f=c(d)}catch(n){y.error=n,f=y}f===y?(l=!0,k=f.error,f=null):h=!0;if(b===f){g(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,h=!0;void 0===b.a&&(e&&h?q(b,f):l?g(b,k):1===a?m(b,f):2===a&&g(b,f))}function N(a,b){try{b(function(b){q(a,b)},function(b){g(a,b)})}catch(c){g(a,c)}}function k(a,b,c,d){this.n=a;this.c=new a(p,d);this.i=c;this.o(b)?(this.m=b,this.d=this.length=b.length,this.l(),0===this.length?m(this.c,this.b):(this.length=this.length||0,this.k(),0===this.d&&m(this.c,this.b))):g(this.c,this.p())}function h(a){O++;this.b=this.a=void 0;this.e=[];if(p!==a){if(!s(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof h))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");N(this,a)}}var E=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},l=0,w="undefined"!==typeof window?window:{},B=w.MutationObserver||w.WebKitMutationObserver,w="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,n=Array(1E3),A;A="undefined"!==typeof process&&"[object process]"==={}.toString.call(process)?F():B?G():w?H():I();var v=new D,y=new D;k.prototype.o=function(a){return E(a)};k.prototype.p=function(){return Error("Array Methods must be provided an Array")};k.prototype.l=function(){this.b=Array(this.length)};k.prototype.k=function(){for(var a=this.length,b=this.c,c=this.m,d=0;void 0===b.a&&d<a;d++)this.j(c[d],d)};k.prototype.j=function(a,b){var c=this.n;"object"===typeof a&&null!==a?a.constructor===c&&void 0!==a.a?(a.f=null,this.g(a.a,b,a.b)):this.q(c.resolve(a),b):(this.d--,this.b[b]=this.h(a))};k.prototype.g=function(a,b,c){var d=this.c;void 0===d.a&&(this.d--,this.i&&2===a?g(d,c):this.b[b]=this.h(c));0===this.d&&m(d,this.b)};k.prototype.h=function(a){return a};k.prototype.q=function(a,b){var c=this;u(a,void 0,function(a){c.g(1,b,a)},function(a){c.g(2,b,a)})};var O=0;h.all=function(a,b){return(new k(this,a,!0,b)).c};h.race=function(a,b){function c(a){q(e,a)}function d(a){g(e,a)}var e=new this(p,b);if(!E(a))return(g(e,new TypeError("You must pass an array to race.")),e);for(var f=a.length,h=0;void 0===e.a&&h<f;h++)u(this.resolve(a[h]),void 0,c,d);return e};h.resolve=function(a,b){if(a&&"object"===typeof a&&a.constructor===this)return a;var c=new this(p,b);q(c,a);return c};h.reject=function(a,b){var c=new this(p,b);g(c,a);return c};h.prototype={constructor:h,then:function(a,b){var c=this.a;if(1===c&&!a||2===c&&!b)return this;var d=new this.constructor(p),e=this.b;if(c){var f=arguments[c-1];r(function(){C(c,d,f,e)})}else u(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}};var z={Promise:h,polyfill:function(){var a;a="undefined"!==typeof global?global:"undefined"!==typeof window&&window.document?window:self;"Promise"in a&&"resolve"in
a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;new a.Promise(function(a){b=a});return s(b)}()||(a.Promise=h)}};"function"===typeof define&&define.amd?define(function(){return z}):"undefined"!==typeof module&&module.exports?module.exports=z:"undefined"!==typeof this&&(this.ES6Promise=z);}).call(window);if(window){window.ES6Promise.polyfill();}
if(typeof(document)==="undefined"||typeof(Object.create)!=="function"||typeof(document.createElement("canvas").getContext)!=="function"){(window||module.exports).html2canvas=function(){return Promise.reject("No canvas support");};return;};
/*! https://mths.be/punycode v1.3.1 by @mathias */
(function(root){var freeExports=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=='object'&&module&&!module.nodeType&&module;var freeGlobal=typeof global=='object'&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal;}
var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter='-',regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={'overflow':'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw RangeError(errors[type]);}
function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length]);}
return result;}
function mapDomain(string,fn){var parts=string.split('@');var result='';if(parts.length>1){result=parts[0]+'@';string=parts[1];}
var labels=string.split(regexSeparators);var encoded=map(labels,fn).join('.');return result+encoded;}
function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}
return output;}
function ucs2encode(array){return map(array,function(value){var output='';if(value>0xFFFF){value-=0x10000;output+=stringFromCharCode(value>>>10&0x3FF|0xD800);value=0xDC00|value&0x3FF;}
output+=stringFromCharCode(value);return output;}).join('');}
function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22;}
if(codePoint-65<26){return codePoint-65;}
if(codePoint-97<26){return codePoint-97;}
return base;}
function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5);}
function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin);}
return floor(k+(baseMinusTMin+1)*delta/(delta+skew));}
function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0;}
for(j=0;j<basic;++j){if(input.charCodeAt(j)>=0x80){error('not-basic');}
output.push(input.charCodeAt(j));}
for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error('invalid-input');}
digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error('overflow');}
i+=digit*w;t=k<=bias?tMin:(k>=bias+tMax?tMax:k-bias);if(digit<t){break;}
baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error('overflow');}
w*=baseMinusT;}
out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error('overflow');}
n+=floor(i/out);i%=out;output.splice(i++,0,n);}
return ucs2encode(output);}
function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<0x80){output.push(stringFromCharCode(currentValue));}}
handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter);}
while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue;}}
handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error('overflow');}
delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error('overflow');}
if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:(k>=bias+tMax?tMax:k-bias);if(q<t){break;}
qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT);}
output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}
++delta;++n;}
return output.join('');}
function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string;});}
function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?'xn--'+encode(string):string;});}
punycode={'version':'1.3.1','ucs2':{'decode':ucs2decode,'encode':ucs2encode},'decode':decode,'encode':encode,'toASCII':toASCII,'toUnicode':toUnicode};if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){define('punycode',function(){return punycode;});}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode;}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);}}}else{root.punycode=punycode;}}(this));var html2canvasNodeAttribute="data-html2canvas-node";var html2canvasCanvasCloneAttribute="data-html2canvas-canvas-clone";var html2canvasCanvasCloneIndex=0;var html2canvasCloneIndex=0;window.html2canvas=function(nodeList,options){var index=html2canvasCloneIndex++;options=options||{};if(options.logging){window.html2canvas.logging=true;window.html2canvas.start=Date.now();}
options.async=typeof(options.async)==="undefined"?true:options.async;options.allowTaint=typeof(options.allowTaint)==="undefined"?false:options.allowTaint;options.removeContainer=typeof(options.removeContainer)==="undefined"?true:options.removeContainer;options.javascriptEnabled=typeof(options.javascriptEnabled)==="undefined"?false:options.javascriptEnabled;options.imageTimeout=typeof(options.imageTimeout)==="undefined"?10000:options.imageTimeout;options.renderer=typeof(options.renderer)==="function"?options.renderer:CanvasRenderer;options.strict=!!options.strict;if(typeof(nodeList)==="string"){if(typeof(options.proxy)!=="string"){return Promise.reject("Proxy must be used when rendering url");}
var width=options.width!=null?options.width:window.innerWidth;var height=options.height!=null?options.height:window.innerHeight;return loadUrlDocument(absoluteUrl(nodeList),options.proxy,document,width,height,options).then(function(container){return renderWindow(container.contentWindow.document.documentElement,container,options,width,height);});}
var node=((nodeList===undefined)?[document.documentElement]:((nodeList.length)?nodeList:[nodeList]))[0];node.setAttribute(html2canvasNodeAttribute+index,index);return renderDocument(node.ownerDocument,options,node.ownerDocument.defaultView.innerWidth,node.ownerDocument.defaultView.innerHeight,index).then(function(canvas){if(typeof(options.onrendered)==="function"){log("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas");options.onrendered(canvas);}
return canvas;});};window.html2canvas.punycode=this.punycode;window.html2canvas.proxy={};function renderDocument(document,options,windowWidth,windowHeight,html2canvasIndex){return createWindowClone(document,document,windowWidth,windowHeight,options,document.defaultView.pageXOffset,document.defaultView.pageYOffset).then(function(container){log("Document cloned");var attributeName=html2canvasNodeAttribute+html2canvasIndex;var selector="["+attributeName+"='"+html2canvasIndex+"']";document.querySelector(selector).removeAttribute(attributeName);var clonedWindow=container.contentWindow;var node=clonedWindow.document.querySelector(selector);var oncloneHandler=(typeof(options.onclone)==="function")?Promise.resolve(options.onclone(clonedWindow.document)):Promise.resolve(true);return oncloneHandler.then(function(){return renderWindow(node,container,options,windowWidth,windowHeight);});});}
function renderWindow(node,container,options,windowWidth,windowHeight){var clonedWindow=container.contentWindow;var support=new Support(clonedWindow.document);var imageLoader=new ImageLoader(options,support);var bounds=getBounds(node);var width=options.type==="view"?windowWidth:documentWidth(clonedWindow.document);var height=options.type==="view"?windowHeight:documentHeight(clonedWindow.document);var renderer=new options.renderer(width,height,imageLoader,options,document);var parser=new NodeParser(node,renderer,support,imageLoader,options);return parser.ready.then(function(){log("Finished rendering");var canvas;if(options.type==="view"){canvas=crop(renderer.canvas,{width:renderer.canvas.width,height:renderer.canvas.height,top:0,left:0,x:0,y:0});}else if(node===clonedWindow.document.body||node===clonedWindow.document.documentElement||options.canvas!=null){canvas=renderer.canvas;}else{canvas=crop(renderer.canvas,{width:options.width!=null?options.width:bounds.width,height:options.height!=null?options.height:bounds.height,top:bounds.top,left:bounds.left,x:clonedWindow.pageXOffset,y:clonedWindow.pageYOffset});}
cleanupContainer(container,options);return canvas;});}
function cleanupContainer(container,options){if(options.removeContainer){container.parentNode.removeChild(container);log("Cleaned up container");}}
function crop(canvas,bounds){var croppedCanvas=document.createElement("canvas");var x1=Math.min(canvas.width-1,Math.max(0,bounds.left));var x2=Math.min(canvas.width,Math.max(1,bounds.left+bounds.width));var y1=Math.min(canvas.height-1,Math.max(0,bounds.top));var y2=Math.min(canvas.height,Math.max(1,bounds.top+bounds.height));croppedCanvas.width=bounds.width;croppedCanvas.height=bounds.height;log("Cropping canvas at:","left:",bounds.left,"top:",bounds.top,"width:",(x2-x1),"height:",(y2-y1));log("Resulting crop with width",bounds.width,"and height",bounds.height," with x",x1,"and y",y1);croppedCanvas.getContext("2d").drawImage(canvas,x1,y1,x2-x1,y2-y1,bounds.x,bounds.y,x2-x1,y2-y1);return croppedCanvas;}
function documentWidth(doc){return Math.max(Math.max(doc.body.scrollWidth,doc.documentElement.scrollWidth),Math.max(doc.body.offsetWidth,doc.documentElement.offsetWidth),Math.max(doc.body.clientWidth,doc.documentElement.clientWidth));}
function documentHeight(doc){return Math.max(Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight),Math.max(doc.body.offsetHeight,doc.documentElement.offsetHeight),Math.max(doc.body.clientHeight,doc.documentElement.clientHeight));}
function smallImage(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";}
function isIE9(){return document.documentMode&&document.documentMode<=9;}
function cloneNodeIE9(node,javascriptEnabled){var clone=node.nodeType===3?document.createTextNode(node.nodeValue):node.cloneNode(false);var child=node.firstChild;while(child){if(javascriptEnabled===true||child.nodeType!==1||child.nodeName!=='SCRIPT'){clone.appendChild(cloneNodeIE9(child,javascriptEnabled));}
child=child.nextSibling;}
return clone;}
function createWindowClone(ownerDocument,containerDocument,width,height,options,x,y){labelCanvasElements(ownerDocument);var documentElement=isIE9()?cloneNodeIE9(ownerDocument.documentElement,options.javascriptEnabled):ownerDocument.documentElement.cloneNode(true);var container=containerDocument.createElement("iframe");container.className="html2canvas-container";container.style.visibility="hidden";container.style.position="fixed";container.style.left="-10000px";container.style.top="0px";container.style.border="0";container.width=width;container.height=height;container.scrolling="no";containerDocument.body.appendChild(container);return new Promise(function(resolve){var documentClone=container.contentWindow.document;cloneNodeValues(ownerDocument.documentElement,documentElement,"textarea");cloneNodeValues(ownerDocument.documentElement,documentElement,"select");container.contentWindow.onload=container.onload=function(){var interval=setInterval(function(){if(documentClone.body.childNodes.length>0){cloneCanvasContents(ownerDocument,documentClone);clearInterval(interval);if(options.type==="view"){container.contentWindow.scrollTo(x,y);}
resolve(container);}},50);};documentClone.open();documentClone.write("<!DOCTYPE html><html></html>");restoreOwnerScroll(ownerDocument,x,y);documentClone.replaceChild(options.javascriptEnabled===true?documentClone.adoptNode(documentElement):removeScriptNodes(documentClone.adoptNode(documentElement)),documentClone.documentElement);documentClone.close();});}
function cloneNodeValues(document,clone,nodeName){var originalNodes=document.getElementsByTagName(nodeName);var clonedNodes=clone.getElementsByTagName(nodeName);var count=originalNodes.length;for(var i=0;i<count;i++){clonedNodes[i].value=originalNodes[i].value;}}
function restoreOwnerScroll(ownerDocument,x,y){if(ownerDocument.defaultView&&(x!==ownerDocument.defaultView.pageXOffset||y!==ownerDocument.defaultView.pageYOffset)){ownerDocument.defaultView.scrollTo(x,y);}}
function loadUrlDocument(src,proxy,document,width,height,options){return new Proxy(src,proxy,window.document).then(documentFromHTML(src)).then(function(doc){return createWindowClone(doc,document,width,height,options,0,0);});}
function documentFromHTML(src){return function(html){var parser=new DOMParser(),doc;try{doc=parser.parseFromString(html,"text/html");}catch(e){log("DOMParser not supported, falling back to createHTMLDocument");doc=document.implementation.createHTMLDocument("");try{doc.open();doc.write(html);doc.close();}catch(ee){log("createHTMLDocument write not supported, falling back to document.body.innerHTML");doc.body.innerHTML=html;}}
var b=doc.querySelector("base");if(!b||!b.href.host){var base=doc.createElement("base");base.href=src;doc.head.insertBefore(base,doc.head.firstChild);}
return doc;};}
function labelCanvasElements(ownerDocument){[].slice.call(ownerDocument.querySelectorAll("canvas"),0).forEach(function(canvas){canvas.setAttribute(html2canvasCanvasCloneAttribute,"canvas-"+html2canvasCanvasCloneIndex++);});}
function cloneCanvasContents(ownerDocument,documentClone){[].slice.call(ownerDocument.querySelectorAll("["+html2canvasCanvasCloneAttribute+"]"),0).forEach(function(canvas){try{var clonedCanvas=documentClone.querySelector('['+html2canvasCanvasCloneAttribute+'="'+canvas.getAttribute(html2canvasCanvasCloneAttribute)+'"]');if(clonedCanvas){clonedCanvas.width=canvas.width;clonedCanvas.height=canvas.height;clonedCanvas.getContext("2d").putImageData(canvas.getContext("2d").getImageData(0,0,canvas.width,canvas.height),0,0);}}catch(e){log("Unable to copy canvas content from",canvas,e);}
canvas.removeAttribute(html2canvasCanvasCloneAttribute);});}
function removeScriptNodes(parent){[].slice.call(parent.childNodes,0).filter(isElementNode).forEach(function(node){if(node.tagName==="SCRIPT"){parent.removeChild(node);}else{removeScriptNodes(node);}});return parent;}
function isElementNode(node){return node.nodeType===Node.ELEMENT_NODE;}
function absoluteUrl(url){var link=document.createElement("a");link.href=url;link.href=link.href;return link;}
function Color(value){this.r=0;this.g=0;this.b=0;this.a=null;var result=this.fromArray(value)||this.namedColor(value)||this.rgb(value)||this.rgba(value)||this.hex6(value)||this.hex3(value);}
Color.prototype.darken=function(amount){var a=1-amount;return new Color([Math.round(this.r*a),Math.round(this.g*a),Math.round(this.b*a),this.a]);};Color.prototype.isTransparent=function(){return this.a===0;};Color.prototype.isBlack=function(){return this.r===0&&this.g===0&&this.b===0;};Color.prototype.fromArray=function(array){if(Array.isArray(array)){this.r=Math.min(array[0],255);this.g=Math.min(array[1],255);this.b=Math.min(array[2],255);if(array.length>3){this.a=array[3];}}
return(Array.isArray(array));};var _hex3=/^#([a-f0-9]{3})$/i;Color.prototype.hex3=function(value){var match=null;if((match=value.match(_hex3))!==null){this.r=parseInt(match[1][0]+match[1][0],16);this.g=parseInt(match[1][1]+match[1][1],16);this.b=parseInt(match[1][2]+match[1][2],16);}
return match!==null;};var _hex6=/^#([a-f0-9]{6})$/i;Color.prototype.hex6=function(value){var match=null;if((match=value.match(_hex6))!==null){this.r=parseInt(match[1].substring(0,2),16);this.g=parseInt(match[1].substring(2,4),16);this.b=parseInt(match[1].substring(4,6),16);}
return match!==null;};var _rgb=/^rgb\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3})\)$/;Color.prototype.rgb=function(value){var match=null;if((match=value.match(_rgb))!==null){this.r=Number(match[1]);this.g=Number(match[2]);this.b=Number(match[3]);}
return match!==null;};var _rgba=/^rgba\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d+\.?\d*)\)$/;Color.prototype.rgba=function(value){var match=null;if((match=value.match(_rgba))!==null){this.r=Number(match[1]);this.g=Number(match[2]);this.b=Number(match[3]);this.a=Number(match[4]);}
return match!==null;};Color.prototype.toString=function(){return this.a!==null&&this.a!==1?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")";};Color.prototype.namedColor=function(value){var color=colors[value.toLowerCase()];if(color){this.r=color[0];this.g=color[1];this.b=color[2];}else if(value.toLowerCase()==="transparent"){this.r=this.g=this.b=this.a=0;return true;}
return!!color;};Color.prototype.isColor=true;var colors={"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aqua":[0,255,255],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"black":[0,0,0],"blanchedalmond":[255,235,205],"blue":[0,0,255],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"fuchsia":[255,0,255],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"gray":[128,128,128],"green":[0,128,0],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"lime":[0,255,0],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"maroon":[128,0,0],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"navy":[0,0,128],"oldlace":[253,245,230],"olive":[128,128,0],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"purple":[128,0,128],"rebeccapurple":[102,51,153],"red":[255,0,0],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"silver":[192,192,192],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"teal":[0,128,128],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"white":[255,255,255],"whitesmoke":[245,245,245],"yellow":[255,255,0],"yellowgreen":[154,205,50]};function DummyImageContainer(src){this.src=src;log("DummyImageContainer for",src);if(!this.promise||!this.image){log("Initiating DummyImageContainer");DummyImageContainer.prototype.image=new Image();var image=this.image;DummyImageContainer.prototype.promise=new Promise(function(resolve,reject){image.onload=resolve;image.onerror=reject;image.src=smallImage();if(image.complete===true){resolve(image);}});}}
function Font(family,size){var container=document.createElement('div'),img=document.createElement('img'),span=document.createElement('span'),sampleText='Hidden Text',baseline,middle;container.style.visibility="hidden";container.style.fontFamily=family;container.style.fontSize=size;container.style.margin=0;container.style.padding=0;document.body.appendChild(container);img.src=smallImage();img.width=1;img.height=1;img.style.margin=0;img.style.padding=0;img.style.verticalAlign="baseline";span.style.fontFamily=family;span.style.fontSize=size;span.style.margin=0;span.style.padding=0;span.appendChild(document.createTextNode(sampleText));container.appendChild(span);container.appendChild(img);baseline=(img.offsetTop-span.offsetTop)+1;container.removeChild(span);container.appendChild(document.createTextNode(sampleText));container.style.lineHeight="normal";img.style.verticalAlign="super";middle=(img.offsetTop-container.offsetTop)+1;document.body.removeChild(container);this.baseline=baseline;this.lineWidth=1;this.middle=middle;}
function FontMetrics(){this.data={};}
FontMetrics.prototype.getMetrics=function(family,size){if(this.data[family+"-"+size]===undefined){this.data[family+"-"+size]=new Font(family,size);}
return this.data[family+"-"+size];};function FrameContainer(container,sameOrigin,options){this.image=null;this.src=container;var self=this;var bounds=getBounds(container);this.promise=(!sameOrigin?this.proxyLoad(options.proxy,bounds,options):new Promise(function(resolve){if(container.contentWindow.document.URL==="about:blank"||container.contentWindow.document.documentElement==null){container.contentWindow.onload=container.onload=function(){resolve(container);};}else{resolve(container);}})).then(function(container){return html2canvas(container.contentWindow.document.documentElement,{type:'view',width:container.width,height:container.height,proxy:options.proxy,javascriptEnabled:options.javascriptEnabled,removeContainer:options.removeContainer,allowTaint:options.allowTaint,imageTimeout:options.imageTimeout/2});}).then(function(canvas){return self.image=canvas;});}
FrameContainer.prototype.proxyLoad=function(proxy,bounds,options){var container=this.src;return loadUrlDocument(container.src,proxy,container.ownerDocument,bounds.width,bounds.height,options);};function GradientContainer(imageData){this.src=imageData.value;this.colorStops=[];this.type=null;this.x0=0.5;this.y0=0.5;this.x1=0.5;this.y1=0.5;this.promise=Promise.resolve(true);}
GradientContainer.prototype.TYPES={LINEAR:1,RADIAL:2};function ImageContainer(src,cors){this.src=src;this.image=new Image();var self=this;this.tainted=null;this.promise=new Promise(function(resolve,reject){self.image.onload=resolve;self.image.onerror=reject;if(cors){self.image.crossOrigin="anonymous";}
self.image.src=src;if(self.image.complete===true){resolve(self.image);}});}
function ImageLoader(options,support){this.link=null;this.options=options;this.support=support;this.origin=this.getOrigin(window.location.href);}
ImageLoader.prototype.findImages=function(nodes){var images=[];nodes.reduce(function(imageNodes,container){switch(container.node.nodeName){case"IMG":return imageNodes.concat([{args:[container.node.src],method:"url"}]);case"svg":case"IFRAME":return imageNodes.concat([{args:[container.node],method:container.node.nodeName}]);}
return imageNodes;},[]).forEach(this.addImage(images,this.loadImage),this);return images;};ImageLoader.prototype.findBackgroundImage=function(images,container){container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images,this.loadImage),this);return images;};ImageLoader.prototype.addImage=function(images,callback){return function(newImage){newImage.args.forEach(function(image){if(!this.imageExists(images,image)){images.splice(0,0,callback.call(this,newImage));log('Added image #'+(images.length),typeof(image)==="string"?image.substring(0,100):image);}},this);};};ImageLoader.prototype.hasImageBackground=function(imageData){return imageData.method!=="none";};ImageLoader.prototype.loadImage=function(imageData){if(imageData.method==="url"){var src=imageData.args[0];if(this.isSVG(src)&&!this.support.svg&&!this.options.allowTaint){return new SVGContainer(src);}else if(src.match(/data:image\/.*;base64,/i)){return new ImageContainer(src.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,''),false);}else if(this.isSameOrigin(src)||this.options.allowTaint===true||this.isSVG(src)){return new ImageContainer(src,false);}else if(this.support.cors&&!this.options.allowTaint&&this.options.useCORS){return new ImageContainer(src,true);}else if(this.options.proxy){return new ProxyImageContainer(src,this.options.proxy);}else{return new DummyImageContainer(src);}}else if(imageData.method==="linear-gradient"){return new LinearGradientContainer(imageData);}else if(imageData.method==="gradient"){return new WebkitGradientContainer(imageData);}else if(imageData.method==="svg"){return new SVGNodeContainer(imageData.args[0],this.support.svg);}else if(imageData.method==="IFRAME"){return new FrameContainer(imageData.args[0],this.isSameOrigin(imageData.args[0].src),this.options);}else{return new DummyImageContainer(imageData);}};ImageLoader.prototype.isSVG=function(src){return src.substring(src.length-3).toLowerCase()==="svg"||SVGContainer.prototype.isInline(src);};ImageLoader.prototype.imageExists=function(images,src){return images.some(function(image){return image.src===src;});};ImageLoader.prototype.isSameOrigin=function(url){return(this.getOrigin(url)===this.origin);};ImageLoader.prototype.getOrigin=function(url){var link=this.link||(this.link=document.createElement("a"));link.href=url;link.href=link.href;return link.protocol+link.hostname+link.port;};ImageLoader.prototype.getPromise=function(container){return this.timeout(container,this.options.imageTimeout)['catch'](function(){var dummy=new DummyImageContainer(container.src);return dummy.promise.then(function(image){container.image=image;});});};ImageLoader.prototype.get=function(src){var found=null;return this.images.some(function(img){return(found=img).src===src;})?found:null;};ImageLoader.prototype.fetch=function(nodes){this.images=nodes.reduce(bind(this.findBackgroundImage,this),this.findImages(nodes));this.images.forEach(function(image,index){image.promise.then(function(){log("Succesfully loaded image #"+(index+1),image);},function(e){log("Failed loading image #"+(index+1),image,e);});});this.ready=Promise.all(this.images.map(this.getPromise,this));log("Finished searching images");return this;};ImageLoader.prototype.timeout=function(container,timeout){var timer;var promise=Promise.race([container.promise,new Promise(function(res,reject){timer=setTimeout(function(){log("Timed out loading image",container);reject(container);},timeout);})]).then(function(container){clearTimeout(timer);return container;});promise['catch'](function(){clearTimeout(timer);});return promise;};function LinearGradientContainer(imageData){GradientContainer.apply(this,arguments);this.type=this.TYPES.LINEAR;var hasDirection=imageData.args[0].match(this.stepRegExp)===null;if(hasDirection){imageData.args[0].split(" ").reverse().forEach(function(position){switch(position){case"left":this.x0=0;this.x1=1;break;case"top":this.y0=0;this.y1=1;break;case"right":this.x0=1;this.x1=0;break;case"bottom":this.y0=1;this.y1=0;break;case"to":var y0=this.y0;var x0=this.x0;this.y0=this.y1;this.x0=this.x1;this.x1=x0;this.y1=y0;break;}},this);}else{this.y0=0;this.y1=1;}
this.colorStops=imageData.args.slice(hasDirection?1:0).map(function(colorStop){var colorStopMatch=colorStop.match(this.stepRegExp);return{color:new Color(colorStopMatch[1]),stop:colorStopMatch[3]==="%"?colorStopMatch[2]/100:null};},this);if(this.colorStops[0].stop===null){this.colorStops[0].stop=0;}
if(this.colorStops[this.colorStops.length-1].stop===null){this.colorStops[this.colorStops.length-1].stop=1;}
this.colorStops.forEach(function(colorStop,index){if(colorStop.stop===null){this.colorStops.slice(index).some(function(find,count){if(find.stop!==null){colorStop.stop=((find.stop-this.colorStops[index-1].stop)/(count+1))+this.colorStops[index-1].stop;return true;}else{return false;}},this);}},this);}
LinearGradientContainer.prototype=Object.create(GradientContainer.prototype);LinearGradientContainer.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/;function log(){if(window.html2canvas.logging&&window.console&&window.console.log){Function.prototype.bind.call(window.console.log,(window.console)).apply(window.console,[(Date.now()-window.html2canvas.start)+"ms","html2canvas:"].concat([].slice.call(arguments,0)));}}
function NodeContainer(node,parent){this.node=node;this.parent=parent;this.stack=null;this.bounds=null;this.borders=null;this.clip=[];this.backgroundClip=[];this.offsetBounds=null;this.visible=null;this.computedStyles=null;this.colors={};this.styles={};this.backgroundImages=null;this.transformData=null;this.transformMatrix=null;this.isPseudoElement=false;this.opacity=null;}
NodeContainer.prototype.cloneTo=function(stack){stack.visible=this.visible;stack.borders=this.borders;stack.bounds=this.bounds;stack.clip=this.clip;stack.backgroundClip=this.backgroundClip;stack.computedStyles=this.computedStyles;stack.styles=this.styles;stack.backgroundImages=this.backgroundImages;stack.opacity=this.opacity;};NodeContainer.prototype.getOpacity=function(){return this.opacity===null?(this.opacity=this.cssFloat('opacity')):this.opacity;};NodeContainer.prototype.assignStack=function(stack){this.stack=stack;stack.children.push(this);};NodeContainer.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:(this.css('display')!=="none"&&this.css('visibility')!=="hidden"&&!this.node.hasAttribute("data-html2canvas-ignore")&&(this.node.nodeName!=="INPUT"||this.node.getAttribute("type")!=="hidden"));};NodeContainer.prototype.css=function(attribute){if(!this.computedStyles){this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null);}
return this.styles[attribute]||(this.styles[attribute]=this.computedStyles[attribute]);};NodeContainer.prototype.prefixedCss=function(attribute){var prefixes=["webkit","moz","ms","o"];var value=this.css(attribute);if(value===undefined){prefixes.some(function(prefix){value=this.css(prefix+attribute.substr(0,1).toUpperCase()+attribute.substr(1));return value!==undefined;},this);}
return value===undefined?null:value;};NodeContainer.prototype.computedStyle=function(type){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,type);};NodeContainer.prototype.cssInt=function(attribute){var value=parseInt(this.css(attribute),10);return(isNaN(value))?0:value;};NodeContainer.prototype.color=function(attribute){return this.colors[attribute]||(this.colors[attribute]=new Color(this.css(attribute)));};NodeContainer.prototype.cssFloat=function(attribute){var value=parseFloat(this.css(attribute));return(isNaN(value))?0:value;};NodeContainer.prototype.fontWeight=function(){var weight=this.css("fontWeight");switch(parseInt(weight,10)){case 401:weight="bold";break;case 400:weight="normal";break;}
return weight;};NodeContainer.prototype.parseClip=function(){var matches=this.css('clip').match(this.CLIP);if(matches){return{top:parseInt(matches[1],10),right:parseInt(matches[2],10),bottom:parseInt(matches[3],10),left:parseInt(matches[4],10)};}
return null;};NodeContainer.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=parseBackgrounds(this.css("backgroundImage")));};NodeContainer.prototype.cssList=function(property,index){var value=(this.css(property)||'').split(',');value=value[index||0]||value[0]||'auto';value=value.trim().split(' ');if(value.length===1){value=[value[0],value[0]];}
return value;};NodeContainer.prototype.parseBackgroundSize=function(bounds,image,index){var size=this.cssList("backgroundSize",index);var width,height;if(isPercentage(size[0])){width=bounds.width*parseFloat(size[0])/100;}else if(/contain|cover/.test(size[0])){var targetRatio=bounds.width/bounds.height,currentRatio=image.width/image.height;return(targetRatio<currentRatio^size[0]==='contain')?{width:bounds.height*currentRatio,height:bounds.height}:{width:bounds.width,height:bounds.width/currentRatio};}else{width=parseInt(size[0],10);}
if(size[0]==='auto'&&size[1]==='auto'){height=image.height;}else if(size[1]==='auto'){height=width/image.width*image.height;}else if(isPercentage(size[1])){height=bounds.height*parseFloat(size[1])/100;}else{height=parseInt(size[1],10);}
if(size[0]==='auto'){width=height/image.height*image.width;}
return{width:width,height:height};};NodeContainer.prototype.parseBackgroundPosition=function(bounds,image,index,backgroundSize){var position=this.cssList('backgroundPosition',index);var left,top;if(isPercentage(position[0])){left=(bounds.width-(backgroundSize||image).width)*(parseFloat(position[0])/100);}else{left=parseInt(position[0],10);}
if(position[1]==='auto'){top=left/image.width*image.height;}else if(isPercentage(position[1])){top=(bounds.height-(backgroundSize||image).height)*parseFloat(position[1])/100;}else{top=parseInt(position[1],10);}
if(position[0]==='auto'){left=top/image.height*image.width;}
return{left:left,top:top};};NodeContainer.prototype.parseBackgroundRepeat=function(index){return this.cssList("backgroundRepeat",index)[0];};NodeContainer.prototype.parseTextShadows=function(){var textShadow=this.css("textShadow");var results=[];if(textShadow&&textShadow!=='none'){var shadows=textShadow.match(this.TEXT_SHADOW_PROPERTY);for(var i=0;shadows&&(i<shadows.length);i++){var s=shadows[i].match(this.TEXT_SHADOW_VALUES);results.push({color:new Color(s[0]),offsetX:s[1]?parseFloat(s[1].replace('px','')):0,offsetY:s[2]?parseFloat(s[2].replace('px','')):0,blur:s[3]?s[3].replace('px',''):0});}}
return results;};NodeContainer.prototype.parseTransform=function(){if(!this.transformData){if(this.hasTransform()){var offset=this.parseBounds();var origin=this.prefixedCss("transformOrigin").split(" ").map(removePx).map(asFloat);origin[0]+=offset.left;origin[1]+=offset.top;this.transformData={origin:origin,matrix:this.parseTransformMatrix()};}else{this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};}}
return this.transformData;};NodeContainer.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var transform=this.prefixedCss("transform");var matrix=transform?parseMatrix(transform.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=matrix?matrix:[1,0,0,1,0,0];}
return this.transformMatrix;};NodeContainer.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?offsetBounds(this.node):getBounds(this.node));};NodeContainer.prototype.hasTransform=function(){return this.parseTransformMatrix().join(",")!=="1,0,0,1,0,0"||(this.parent&&this.parent.hasTransform());};NodeContainer.prototype.getValue=function(){var value=this.node.value||"";if(this.node.tagName==="SELECT"){value=selectionValue(this.node);}else if(this.node.type==="password"){value=Array(value.length+1).join('\u2022');}
return value.length===0?(this.node.placeholder||""):value;};NodeContainer.prototype.MATRIX_PROPERTY=/(matrix)\((.+)\)/;NodeContainer.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;NodeContainer.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;NodeContainer.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;function selectionValue(node){var option=node.options[node.selectedIndex||0];return option?(option.text||""):"";}
function parseMatrix(match){if(match&&match[1]==="matrix"){return match[2].split(",").map(function(s){return parseFloat(s.trim());});}}
function isPercentage(value){return value.toString().indexOf("%")!==-1;}
function parseBackgrounds(backgroundImage){var whitespace=' \r\n\t',method,definition,prefix,prefix_i,block,results=[],mode=0,numParen=0,quote,args;var appendResult=function(){if(method){if(definition.substr(0,1)==='"'){definition=definition.substr(1,definition.length-2);}
if(definition){args.push(definition);}
if(method.substr(0,1)==='-'&&(prefix_i=method.indexOf('-',1)+1)>0){prefix=method.substr(0,prefix_i);method=method.substr(prefix_i);}
results.push({prefix:prefix,method:method.toLowerCase(),value:block,args:args,image:null});}
args=[];method=prefix=definition=block='';};args=[];method=prefix=definition=block='';backgroundImage.split("").forEach(function(c){if(mode===0&&whitespace.indexOf(c)>-1){return;}
switch(c){case'"':if(!quote){quote=c;}else if(quote===c){quote=null;}
break;case'(':if(quote){break;}else if(mode===0){mode=1;block+=c;return;}else{numParen++;}
break;case')':if(quote){break;}else if(mode===1){if(numParen===0){mode=0;block+=c;appendResult();return;}else{numParen--;}}
break;case',':if(quote){break;}else if(mode===0){appendResult();return;}else if(mode===1){if(numParen===0&&!method.match(/^url$/i)){args.push(definition);definition='';block+=c;return;}}
break;}
block+=c;if(mode===0){method+=c;}else{definition+=c;}});appendResult();return results;}
function removePx(str){return str.replace("px","");}
function asFloat(str){return parseFloat(str);}
function getBounds(node){if(node.getBoundingClientRect){var clientRect=node.getBoundingClientRect();var width=node.offsetWidth==null?clientRect.width:node.offsetWidth;return{top:clientRect.top,bottom:clientRect.bottom||(clientRect.top+clientRect.height),right:clientRect.left+width,left:clientRect.left,width:width,height:node.offsetHeight==null?clientRect.height:node.offsetHeight};}
return{};}
function offsetBounds(node){var parent=node.offsetParent?offsetBounds(node.offsetParent):{top:0,left:0};return{top:node.offsetTop+parent.top,bottom:node.offsetTop+node.offsetHeight+parent.top,right:node.offsetLeft+parent.left+node.offsetWidth,left:node.offsetLeft+parent.left,width:node.offsetWidth,height:node.offsetHeight};}
function NodeParser(element,renderer,support,imageLoader,options){log("Starting NodeParser");this.renderer=renderer;this.options=options;this.range=null;this.support=support;this.renderQueue=[];this.stack=new StackingContext(true,1,element.ownerDocument,null);var parent=new NodeContainer(element,null);if(options.background){renderer.rectangle(0,0,renderer.width,renderer.height,new Color(options.background));}
if(element===element.ownerDocument.documentElement){var canvasBackground=new NodeContainer(parent.color('backgroundColor').isTransparent()?element.ownerDocument.body:element.ownerDocument.documentElement,null);renderer.rectangle(0,0,renderer.width,renderer.height,canvasBackground.color('backgroundColor'));}
parent.visibile=parent.isElementVisible();this.createPseudoHideStyles(element.ownerDocument);this.disableAnimations(element.ownerDocument);this.nodes=flatten([parent].concat(this.getChildren(parent)).filter(function(container){return container.visible=container.isElementVisible();}).map(this.getPseudoElements,this));this.fontMetrics=new FontMetrics();log("Fetched nodes, total:",this.nodes.length);log("Calculate overflow clips");this.calculateOverflowClips();log("Start fetching images");this.images=imageLoader.fetch(this.nodes.filter(isElement));this.ready=this.images.ready.then(bind(function(){log("Images loaded, starting parsing");log("Creating stacking contexts");this.createStackingContexts();log("Sorting stacking contexts");this.sortStackingContexts(this.stack);this.parse(this.stack);log("Render queue created with "+this.renderQueue.length+" items");return new Promise(bind(function(resolve){if(!options.async){this.renderQueue.forEach(this.paint,this);resolve();}else if(typeof(options.async)==="function"){options.async.call(this,this.renderQueue,resolve);}else if(this.renderQueue.length>0){this.renderIndex=0;this.asyncRenderer(this.renderQueue,resolve);}else{resolve();}},this));},this));}
NodeParser.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(container){if(isElement(container)){if(isPseudoElement(container)){container.appendToDOM();}
container.borders=this.parseBorders(container);var clip=(container.css('overflow')==="hidden")?[container.borders.clip]:[];var cssClip=container.parseClip();if(cssClip&&["absolute","fixed"].indexOf(container.css('position'))!==-1){clip.push([["rect",container.bounds.left+cssClip.left,container.bounds.top+cssClip.top,cssClip.right-cssClip.left,cssClip.bottom-cssClip.top]]);}
container.clip=hasParentClip(container)?container.parent.clip.concat(clip):clip;container.backgroundClip=(container.css('overflow')!=="hidden")?container.clip.concat([container.borders.clip]):container.clip;if(isPseudoElement(container)){container.cleanDOM();}}else if(isTextNode(container)){container.clip=hasParentClip(container)?container.parent.clip:[];}
if(!isPseudoElement(container)){container.bounds=null;}},this);};function hasParentClip(container){return container.parent&&container.parent.clip.length;}
NodeParser.prototype.asyncRenderer=function(queue,resolve,asyncTimer){asyncTimer=asyncTimer||Date.now();this.paint(queue[this.renderIndex++]);if(queue.length===this.renderIndex){resolve();}else if(asyncTimer+20>Date.now()){this.asyncRenderer(queue,resolve,asyncTimer);}else{setTimeout(bind(function(){this.asyncRenderer(queue,resolve);},this),0);}};NodeParser.prototype.createPseudoHideStyles=function(document){this.createStyles(document,'.'+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }'+'.'+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }');};NodeParser.prototype.disableAnimations=function(document){this.createStyles(document,'* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; '+'-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');};NodeParser.prototype.createStyles=function(document,styles){var hidePseudoElements=document.createElement('style');hidePseudoElements.innerHTML=styles;document.body.appendChild(hidePseudoElements);};NodeParser.prototype.getPseudoElements=function(container){var nodes=[[container]];if(container.node.nodeType===Node.ELEMENT_NODE){var before=this.getPseudoElement(container,":before");var after=this.getPseudoElement(container,":after");if(before){nodes.push(before);}
if(after){nodes.push(after);}}
return flatten(nodes);};function toCamelCase(str){return str.replace(/(\-[a-z])/g,function(match){return match.toUpperCase().replace('-','');});}
NodeParser.prototype.getPseudoElement=function(container,type){var style=container.computedStyle(type);if(!style||!style.content||style.content==="none"||style.content==="-moz-alt-content"||style.display==="none"){return null;}
var content=stripQuotes(style.content);var isImage=content.substr(0,3)==='url';var pseudoNode=document.createElement(isImage?'img':'html2canvaspseudoelement');var pseudoContainer=new PseudoElementContainer(pseudoNode,container,type);for(var i=style.length-1;i>=0;i--){var property=toCamelCase(style.item(i));pseudoNode.style[property]=style[property];}
pseudoNode.className=PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;if(isImage){pseudoNode.src=parseBackgrounds(content)[0].args[0];return[pseudoContainer];}else{var text=document.createTextNode(content);pseudoNode.appendChild(text);return[pseudoContainer,new TextContainer(text,pseudoContainer)];}};NodeParser.prototype.getChildren=function(parentContainer){return flatten([].filter.call(parentContainer.node.childNodes,renderableNode).map(function(node){var container=[node.nodeType===Node.TEXT_NODE?new TextContainer(node,parentContainer):new NodeContainer(node,parentContainer)].filter(nonIgnoredElement);return node.nodeType===Node.ELEMENT_NODE&&container.length&&node.tagName!=="TEXTAREA"?(container[0].isElementVisible()?container.concat(this.getChildren(container[0])):[]):container;},this));};NodeParser.prototype.newStackingContext=function(container,hasOwnStacking){var stack=new StackingContext(hasOwnStacking,container.getOpacity(),container.node,container.parent);container.cloneTo(stack);var parentStack=hasOwnStacking?stack.getParentStack(this):stack.parent.stack;parentStack.contexts.push(stack);container.stack=stack;};NodeParser.prototype.createStackingContexts=function(){this.nodes.forEach(function(container){if(isElement(container)&&(this.isRootElement(container)||hasOpacity(container)||isPositionedForStacking(container)||this.isBodyWithTransparentRoot(container)||container.hasTransform())){this.newStackingContext(container,true);}else if(isElement(container)&&((isPositioned(container)&&zIndex0(container))||isInlineBlock(container)||isFloating(container))){this.newStackingContext(container,false);}else{container.assignStack(container.parent.stack);}},this);};NodeParser.prototype.isBodyWithTransparentRoot=function(container){return container.node.nodeName==="BODY"&&container.parent.color('backgroundColor').isTransparent();};NodeParser.prototype.isRootElement=function(container){return container.parent===null;};NodeParser.prototype.sortStackingContexts=function(stack){stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));stack.contexts.forEach(this.sortStackingContexts,this);};NodeParser.prototype.parseTextBounds=function(container){return function(text,index,textList){if(container.parent.css("textDecoration").substr(0,4)!=="none"||text.trim().length!==0){if(this.support.rangeBounds&&!container.parent.hasTransform()){var offset=textList.slice(0,index).join("").length;return this.getRangeBounds(container.node,offset,text.length);}else if(container.node&&typeof(container.node.data)==="string"){var replacementNode=container.node.splitText(text.length);var bounds=this.getWrapperBounds(container.node,container.parent.hasTransform());container.node=replacementNode;return bounds;}}else if(!this.support.rangeBounds||container.parent.hasTransform()){container.node=container.node.splitText(text.length);}
return{};};};NodeParser.prototype.getWrapperBounds=function(node,transform){var wrapper=node.ownerDocument.createElement('html2canvaswrapper');var parent=node.parentNode,backupText=node.cloneNode(true);wrapper.appendChild(node.cloneNode(true));parent.replaceChild(wrapper,node);var bounds=transform?offsetBounds(wrapper):getBounds(wrapper);parent.replaceChild(backupText,wrapper);return bounds;};NodeParser.prototype.getRangeBounds=function(node,offset,length){var range=this.range||(this.range=node.ownerDocument.createRange());range.setStart(node,offset);range.setEnd(node,offset+length);return range.getBoundingClientRect();};function ClearTransform(){}
NodeParser.prototype.parse=function(stack){var negativeZindex=stack.contexts.filter(negativeZIndex);var descendantElements=stack.children.filter(isElement);var descendantNonFloats=descendantElements.filter(not(isFloating));var nonInlineNonPositionedDescendants=descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel));var nonPositionedFloats=descendantElements.filter(not(isPositioned)).filter(isFloating);var inFlow=descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel);var stackLevel0=stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0);var text=stack.children.filter(isTextNode).filter(hasText);var positiveZindex=stack.contexts.filter(positiveZIndex);negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats).concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container){this.renderQueue.push(container);if(isStackingContext(container)){this.parse(container);this.renderQueue.push(new ClearTransform());}},this);};NodeParser.prototype.paint=function(container){try{if(container instanceof ClearTransform){this.renderer.ctx.restore();}else if(isTextNode(container)){if(isPseudoElement(container.parent)){container.parent.appendToDOM();}
this.paintText(container);if(isPseudoElement(container.parent)){container.parent.cleanDOM();}}else{this.paintNode(container);}}catch(e){log(e);if(this.options.strict){throw e;}}};NodeParser.prototype.paintNode=function(container){if(isStackingContext(container)){this.renderer.setOpacity(container.opacity);this.renderer.ctx.save();if(container.hasTransform()){this.renderer.setTransform(container.parseTransform());}}
if(container.node.nodeName==="INPUT"&&container.node.type==="checkbox"){this.paintCheckbox(container);}else if(container.node.nodeName==="INPUT"&&container.node.type==="radio"){this.paintRadio(container);}else{this.paintElement(container);}};NodeParser.prototype.paintElement=function(container){var bounds=container.parseBounds();this.renderer.clip(container.backgroundClip,function(){this.renderer.renderBackground(container,bounds,container.borders.borders.map(getWidth));},this);this.renderer.clip(container.clip,function(){this.renderer.renderBorders(container.borders.borders);},this);this.renderer.clip(container.backgroundClip,function(){switch(container.node.nodeName){case"svg":case"IFRAME":var imgContainer=this.images.get(container.node);if(imgContainer){this.renderer.renderImage(container,bounds,container.borders,imgContainer);}else{log("Error loading <"+container.node.nodeName+">",container.node);}
break;case"IMG":var imageContainer=this.images.get(container.node.src);if(imageContainer){this.renderer.renderImage(container,bounds,container.borders,imageContainer);}else{log("Error loading <img>",container.node.src);}
break;case"CANVAS":this.renderer.renderImage(container,bounds,container.borders,{image:container.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(container);break;}},this);};NodeParser.prototype.paintCheckbox=function(container){var b=container.parseBounds();var size=Math.min(b.width,b.height);var bounds={width:size-1,height:size-1,top:b.top,left:b.left};var r=[3,3];var radius=[r,r,r,r];var borders=[1,1,1,1].map(function(w){return{color:new Color('#A5A5A5'),width:w};});var borderPoints=calculateCurvePoints(bounds,radius,borders);this.renderer.clip(container.backgroundClip,function(){this.renderer.rectangle(bounds.left+1,bounds.top+1,bounds.width-2,bounds.height-2,new Color("#DEDEDE"));this.renderer.renderBorders(calculateBorders(borders,bounds,borderPoints,radius));if(container.node.checked){this.renderer.font(new Color('#424242'),'normal','normal','bold',(size-3)+"px",'arial');this.renderer.text("\u2714",bounds.left+size/6,bounds.top+size-1);}},this);};NodeParser.prototype.paintRadio=function(container){var bounds=container.parseBounds();var size=Math.min(bounds.width,bounds.height)-2;this.renderer.clip(container.backgroundClip,function(){this.renderer.circleStroke(bounds.left+1,bounds.top+1,size,new Color('#DEDEDE'),1,new Color('#A5A5A5'));if(container.node.checked){this.renderer.circle(Math.ceil(bounds.left+size/4)+1,Math.ceil(bounds.top+size/4)+1,Math.floor(size/2),new Color('#424242'));}},this);};NodeParser.prototype.paintFormValue=function(container){var value=container.getValue();if(value.length>0){var document=container.node.ownerDocument;var wrapper=document.createElement('html2canvaswrapper');var properties=['lineHeight','textAlign','fontFamily','fontWeight','fontSize','color','paddingLeft','paddingTop','paddingRight','paddingBottom','width','height','borderLeftStyle','borderTopStyle','borderLeftWidth','borderTopWidth','boxSizing','whiteSpace','wordWrap'];properties.forEach(function(property){try{wrapper.style[property]=container.css(property);}catch(e){log("html2canvas: Parse: Exception caught in renderFormValue: "+e.message);}});var bounds=container.parseBounds();wrapper.style.position="fixed";wrapper.style.left=bounds.left+"px";wrapper.style.top=bounds.top+"px";wrapper.textContent=value;document.body.appendChild(wrapper);this.paintText(new TextContainer(wrapper.firstChild,container));document.body.removeChild(wrapper);}};NodeParser.prototype.paintText=function(container){container.applyTextTransform();var characters=window.html2canvas.punycode.ucs2.decode(container.node.data);var textList=(!this.options.letterRendering||noLetterSpacing(container))&&!hasUnicode(container.node.data)?getWords(characters):characters.map(function(character){return window.html2canvas.punycode.ucs2.encode([character]);});var weight=container.parent.fontWeight();var size=container.parent.css('fontSize');var family=container.parent.css('fontFamily');var shadows=container.parent.parseTextShadows();this.renderer.font(container.parent.color('color'),container.parent.css('fontStyle'),container.parent.css('fontVariant'),weight,size,family);if(shadows.length){this.renderer.fontShadow(shadows[0].color,shadows[0].offsetX,shadows[0].offsetY,shadows[0].blur);}else{this.renderer.clearShadow();}
this.renderer.clip(container.parent.clip,function(){textList.map(this.parseTextBounds(container),this).forEach(function(bounds,index){if(bounds){this.renderer.text(textList[index],bounds.left,bounds.bottom);this.renderTextDecoration(container.parent,bounds,this.fontMetrics.getMetrics(family,size));}},this);},this);};NodeParser.prototype.renderTextDecoration=function(container,bounds,metrics){switch(container.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(bounds.left,Math.round(bounds.top+metrics.baseline+metrics.lineWidth),bounds.width,1,container.color("color"));break;case"overline":this.renderer.rectangle(bounds.left,Math.round(bounds.top),bounds.width,1,container.color("color"));break;case"line-through":this.renderer.rectangle(bounds.left,Math.ceil(bounds.top+metrics.middle+metrics.lineWidth),bounds.width,1,container.color("color"));break;}};var borderColorTransforms={inset:[["darken",0.60],["darken",0.10],["darken",0.10],["darken",0.60]]};NodeParser.prototype.parseBorders=function(container){var nodeBounds=container.parseBounds();var radius=getBorderRadiusData(container);var borders=["Top","Right","Bottom","Left"].map(function(side,index){var style=container.css('border'+side+'Style');var color=container.color('border'+side+'Color');if(style==="inset"&&color.isBlack()){color=new Color([255,255,255,color.a]);}
var colorTransform=borderColorTransforms[style]?borderColorTransforms[style][index]:null;return{width:container.cssInt('border'+side+'Width'),color:colorTransform?color[colorTransform[0]](colorTransform[1]):color,args:null};});var borderPoints=calculateCurvePoints(nodeBounds,radius,borders);return{clip:this.parseBackgroundClip(container,borderPoints,borders,radius,nodeBounds),borders:calculateBorders(borders,nodeBounds,borderPoints,radius)};};function calculateBorders(borders,nodeBounds,borderPoints,radius){return borders.map(function(border,borderSide){if(border.width>0){var bx=nodeBounds.left;var by=nodeBounds.top;var bw=nodeBounds.width;var bh=nodeBounds.height-(borders[2].width);switch(borderSide){case 0:bh=borders[0].width;border.args=drawSide({c1:[bx,by],c2:[bx+bw,by],c3:[bx+bw-borders[1].width,by+bh],c4:[bx+borders[3].width,by+bh]},radius[0],radius[1],borderPoints.topLeftOuter,borderPoints.topLeftInner,borderPoints.topRightOuter,borderPoints.topRightInner);break;case 1:bx=nodeBounds.left+nodeBounds.width-(borders[1].width);bw=borders[1].width;border.args=drawSide({c1:[bx+bw,by],c2:[bx+bw,by+bh+borders[2].width],c3:[bx,by+bh],c4:[bx,by+borders[0].width]},radius[1],radius[2],borderPoints.topRightOuter,borderPoints.topRightInner,borderPoints.bottomRightOuter,borderPoints.bottomRightInner);break;case 2:by=(by+nodeBounds.height)-(borders[2].width);bh=borders[2].width;border.args=drawSide({c1:[bx+bw,by+bh],c2:[bx,by+bh],c3:[bx+borders[3].width,by],c4:[bx+bw-borders[3].width,by]},radius[2],radius[3],borderPoints.bottomRightOuter,borderPoints.bottomRightInner,borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner);break;case 3:bw=borders[3].width;border.args=drawSide({c1:[bx,by+bh+borders[2].width],c2:[bx,by],c3:[bx+bw,by+borders[0].width],c4:[bx+bw,by+bh]},radius[3],radius[0],borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner,borderPoints.topLeftOuter,borderPoints.topLeftInner);break;}}
return border;});}
NodeParser.prototype.parseBackgroundClip=function(container,borderPoints,borders,radius,bounds){var backgroundClip=container.css('backgroundClip'),borderArgs=[];switch(backgroundClip){case"content-box":case"padding-box":parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftInner,borderPoints.topRightInner,bounds.left+borders[3].width,bounds.top+borders[0].width);parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightInner,borderPoints.bottomRightInner,bounds.left+bounds.width-borders[1].width,bounds.top+borders[0].width);parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightInner,borderPoints.bottomLeftInner,bounds.left+bounds.width-borders[1].width,bounds.top+bounds.height-borders[2].width);parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftInner,borderPoints.topLeftInner,bounds.left+borders[3].width,bounds.top+bounds.height-borders[2].width);break;default:parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftOuter,borderPoints.topRightOuter,bounds.left,bounds.top);parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightOuter,borderPoints.bottomRightOuter,bounds.left+bounds.width,bounds.top);parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightOuter,borderPoints.bottomLeftOuter,bounds.left+bounds.width,bounds.top+bounds.height);parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftOuter,borderPoints.topLeftOuter,bounds.left,bounds.top+bounds.height);break;}
return borderArgs;};function getCurvePoints(x,y,r1,r2){var kappa=4*((Math.sqrt(2)-1)/3);var ox=(r1)*kappa,oy=(r2)*kappa,xm=x+r1,ym=y+r2;return{topLeft:bezierCurve({x:x,y:ym},{x:x,y:ym-oy},{x:xm-ox,y:y},{x:xm,y:y}),topRight:bezierCurve({x:x,y:y},{x:x+ox,y:y},{x:xm,y:ym-oy},{x:xm,y:ym}),bottomRight:bezierCurve({x:xm,y:y},{x:xm,y:y+oy},{x:x+ox,y:ym},{x:x,y:ym}),bottomLeft:bezierCurve({x:xm,y:ym},{x:xm-ox,y:ym},{x:x,y:y+oy},{x:x,y:y})};}
function calculateCurvePoints(bounds,borderRadius,borders){var x=bounds.left,y=bounds.top,width=bounds.width,height=bounds.height,tlh=borderRadius[0][0],tlv=borderRadius[0][1],trh=borderRadius[1][0],trv=borderRadius[1][1],brh=borderRadius[2][0],brv=borderRadius[2][1],blh=borderRadius[3][0],blv=borderRadius[3][1];var topWidth=width-trh,rightHeight=height-brv,bottomWidth=width-brh,leftHeight=height-blv;return{topLeftOuter:getCurvePoints(x,y,tlh,tlv).topLeft.subdivide(0.5),topLeftInner:getCurvePoints(x+borders[3].width,y+borders[0].width,Math.max(0,tlh-borders[3].width),Math.max(0,tlv-borders[0].width)).topLeft.subdivide(0.5),topRightOuter:getCurvePoints(x+topWidth,y,trh,trv).topRight.subdivide(0.5),topRightInner:getCurvePoints(x+Math.min(topWidth,width+borders[3].width),y+borders[0].width,(topWidth>width+borders[3].width)?0:trh-borders[3].width,trv-borders[0].width).topRight.subdivide(0.5),bottomRightOuter:getCurvePoints(x+bottomWidth,y+rightHeight,brh,brv).bottomRight.subdivide(0.5),bottomRightInner:getCurvePoints(x+Math.min(bottomWidth,width-borders[3].width),y+Math.min(rightHeight,height+borders[0].width),Math.max(0,brh-borders[1].width),brv-borders[2].width).bottomRight.subdivide(0.5),bottomLeftOuter:getCurvePoints(x,y+leftHeight,blh,blv).bottomLeft.subdivide(0.5),bottomLeftInner:getCurvePoints(x+borders[3].width,y+leftHeight,Math.max(0,blh-borders[3].width),blv-borders[2].width).bottomLeft.subdivide(0.5)};}
function bezierCurve(start,startControl,endControl,end){var lerp=function(a,b,t){return{x:a.x+(b.x-a.x)*t,y:a.y+(b.y-a.y)*t};};return{start:start,startControl:startControl,endControl:endControl,end:end,subdivide:function(t){var ab=lerp(start,startControl,t),bc=lerp(startControl,endControl,t),cd=lerp(endControl,end,t),abbc=lerp(ab,bc,t),bccd=lerp(bc,cd,t),dest=lerp(abbc,bccd,t);return[bezierCurve(start,ab,abbc,dest),bezierCurve(dest,bccd,cd,end)];},curveTo:function(borderArgs){borderArgs.push(["bezierCurve",startControl.x,startControl.y,endControl.x,endControl.y,end.x,end.y]);},curveToReversed:function(borderArgs){borderArgs.push(["bezierCurve",endControl.x,endControl.y,startControl.x,startControl.y,start.x,start.y]);}};}
function drawSide(borderData,radius1,radius2,outer1,inner1,outer2,inner2){var borderArgs=[];if(radius1[0]>0||radius1[1]>0){borderArgs.push(["line",outer1[1].start.x,outer1[1].start.y]);outer1[1].curveTo(borderArgs);}else{borderArgs.push(["line",borderData.c1[0],borderData.c1[1]]);}
if(radius2[0]>0||radius2[1]>0){borderArgs.push(["line",outer2[0].start.x,outer2[0].start.y]);outer2[0].curveTo(borderArgs);borderArgs.push(["line",inner2[0].end.x,inner2[0].end.y]);inner2[0].curveToReversed(borderArgs);}else{borderArgs.push(["line",borderData.c2[0],borderData.c2[1]]);borderArgs.push(["line",borderData.c3[0],borderData.c3[1]]);}
if(radius1[0]>0||radius1[1]>0){borderArgs.push(["line",inner1[1].end.x,inner1[1].end.y]);inner1[1].curveToReversed(borderArgs);}else{borderArgs.push(["line",borderData.c4[0],borderData.c4[1]]);}
return borderArgs;}
function parseCorner(borderArgs,radius1,radius2,corner1,corner2,x,y){if(radius1[0]>0||radius1[1]>0){borderArgs.push(["line",corner1[0].start.x,corner1[0].start.y]);corner1[0].curveTo(borderArgs);corner1[1].curveTo(borderArgs);}else{borderArgs.push(["line",x,y]);}
if(radius2[0]>0||radius2[1]>0){borderArgs.push(["line",corner2[0].start.x,corner2[0].start.y]);}}
function negativeZIndex(container){return container.cssInt("zIndex")<0;}
function positiveZIndex(container){return container.cssInt("zIndex")>0;}
function zIndex0(container){return container.cssInt("zIndex")===0;}
function inlineLevel(container){return["inline","inline-block","inline-table"].indexOf(container.css("display"))!==-1;}
function isStackingContext(container){return(container instanceof StackingContext);}
function hasText(container){return container.node.data.trim().length>0;}
function noLetterSpacing(container){return(/^(normal|none|0px)$/.test(container.parent.css("letterSpacing")));}
function getBorderRadiusData(container){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(side){var value=container.css('border'+side+'Radius');var arr=value.split(" ");if(arr.length<=1){arr[1]=arr[0];}
return arr.map(asInt);});}
function renderableNode(node){return(node.nodeType===Node.TEXT_NODE||node.nodeType===Node.ELEMENT_NODE);}
function isPositionedForStacking(container){var position=container.css("position");var zIndex=(["absolute","relative","fixed"].indexOf(position)!==-1)?container.css("zIndex"):"auto";return zIndex!=="auto";}
function isPositioned(container){return container.css("position")!=="static";}
function isFloating(container){return container.css("float")!=="none";}
function isInlineBlock(container){return["inline-block","inline-table"].indexOf(container.css("display"))!==-1;}
function not(callback){var context=this;return function(){return!callback.apply(context,arguments);};}
function isElement(container){return container.node.nodeType===Node.ELEMENT_NODE;}
function isPseudoElement(container){return container.isPseudoElement===true;}
function isTextNode(container){return container.node.nodeType===Node.TEXT_NODE;}
function zIndexSort(contexts){return function(a,b){return(a.cssInt("zIndex")+(contexts.indexOf(a)/contexts.length))-(b.cssInt("zIndex")+(contexts.indexOf(b)/contexts.length));};}
function hasOpacity(container){return container.getOpacity()<1;}
function bind(callback,context){return function(){return callback.apply(context,arguments);};}
function asInt(value){return parseInt(value,10);}
function getWidth(border){return border.width;}
function nonIgnoredElement(nodeContainer){return(nodeContainer.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(nodeContainer.node.nodeName)===-1);}
function flatten(arrays){return[].concat.apply([],arrays);}
function stripQuotes(content){var first=content.substr(0,1);return(first===content.substr(content.length-1)&&first.match(/'|"/))?content.substr(1,content.length-2):content;}
function getWords(characters){var words=[],i=0,onWordBoundary=false,word;while(characters.length){if(isWordBoundary(characters[i])===onWordBoundary){word=characters.splice(0,i);if(word.length){words.push(window.html2canvas.punycode.ucs2.encode(word));}
onWordBoundary=!onWordBoundary;i=0;}else{i++;}
if(i>=characters.length){word=characters.splice(0,i);if(word.length){words.push(window.html2canvas.punycode.ucs2.encode(word));}}}
return words;}
function isWordBoundary(characterCode){return[32,13,10,9,45].indexOf(characterCode)!==-1;}
function hasUnicode(string){return(/[^\u0000-\u00ff]/).test(string);}
function Proxy(src,proxyUrl,document){if(!proxyUrl){return Promise.reject("No proxy configured");}
var callback=createCallback(supportsCORS);var url=createProxyUrl(proxyUrl,src,callback);return supportsCORS?XHR(url):(jsonp(document,url,callback).then(function(response){return decode64(response.content);}));}
var proxyCount=0;var supportsCORS=('withCredentials'in new XMLHttpRequest());var supportsCORSImage=('crossOrigin'in new Image());function ProxyURL(src,proxyUrl,document){var callback=createCallback(supportsCORSImage);var url=createProxyUrl(proxyUrl,src,callback);return(supportsCORSImage?Promise.resolve(url):jsonp(document,url,callback).then(function(response){return"data:"+response.type+";base64,"+response.content;}));}
function jsonp(document,url,callback){return new Promise(function(resolve,reject){var s=document.createElement("script");var cleanup=function(){delete window.html2canvas.proxy[callback];document.body.removeChild(s);};window.html2canvas.proxy[callback]=function(response){cleanup();resolve(response);};s.src=url;s.onerror=function(e){cleanup();reject(e);};document.body.appendChild(s);});}
function createCallback(useCORS){return!useCORS?"html2canvas_"+Date.now()+"_"+(++proxyCount)+"_"+Math.round(Math.random()*100000):"";}
function createProxyUrl(proxyUrl,src,callback){return proxyUrl+"?url="+encodeURIComponent(src)+(callback.length?"&callback=html2canvas.proxy."+callback:"");}
function ProxyImageContainer(src,proxy){var script=document.createElement("script");var link=document.createElement("a");link.href=src;src=link.href;this.src=src;this.image=new Image();var self=this;this.promise=new Promise(function(resolve,reject){self.image.crossOrigin="Anonymous";self.image.onload=resolve;self.image.onerror=reject;new ProxyURL(src,proxy,document).then(function(url){self.image.src=url;})['catch'](reject);});}
function PseudoElementContainer(node,parent,type){NodeContainer.call(this,node,parent);this.isPseudoElement=true;this.before=type===":before";}
PseudoElementContainer.prototype.cloneTo=function(stack){PseudoElementContainer.prototype.cloneTo.call(this,stack);stack.isPseudoElement=true;stack.before=this.before;};PseudoElementContainer.prototype=Object.create(NodeContainer.prototype);PseudoElementContainer.prototype.appendToDOM=function(){if(this.before){this.parent.node.insertBefore(this.node,this.parent.node.firstChild);}else{this.parent.node.appendChild(this.node);}
this.parent.node.className+=" "+this.getHideClass();};PseudoElementContainer.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"");};PseudoElementContainer.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")];};PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";function Renderer(width,height,images,options,document){this.width=width;this.height=height;this.images=images;this.options=options;this.document=document;}
Renderer.prototype.renderImage=function(container,bounds,borderData,imageContainer){var paddingLeft=container.cssInt('paddingLeft'),paddingTop=container.cssInt('paddingTop'),paddingRight=container.cssInt('paddingRight'),paddingBottom=container.cssInt('paddingBottom'),borders=borderData.borders;var width=bounds.width-(borders[1].width+borders[3].width+paddingLeft+paddingRight);var height=bounds.height-(borders[0].width+borders[2].width+paddingTop+paddingBottom);this.drawImage(imageContainer,0,0,imageContainer.image.width||width,imageContainer.image.height||height,bounds.left+paddingLeft+borders[3].width,bounds.top+paddingTop+borders[0].width,width,height);};Renderer.prototype.renderBackground=function(container,bounds,borderData){if(bounds.height>0&&bounds.width>0){this.renderBackgroundColor(container,bounds);this.renderBackgroundImage(container,bounds,borderData);}};Renderer.prototype.renderBackgroundColor=function(container,bounds){var color=container.color("backgroundColor");if(!color.isTransparent()){this.rectangle(bounds.left,bounds.top,bounds.width,bounds.height,color);}};Renderer.prototype.renderBorders=function(borders){borders.forEach(this.renderBorder,this);};Renderer.prototype.renderBorder=function(data){if(!data.color.isTransparent()&&data.args!==null){this.drawShape(data.args,data.color);}};Renderer.prototype.renderBackgroundImage=function(container,bounds,borderData){var backgroundImages=container.parseBackgroundImages();backgroundImages.reverse().forEach(function(backgroundImage,index,arr){switch(backgroundImage.method){case"url":var image=this.images.get(backgroundImage.args[0]);if(image){this.renderBackgroundRepeating(container,bounds,image,arr.length-(index+1),borderData);}else{log("Error loading background-image",backgroundImage.args[0]);}
break;case"linear-gradient":case"gradient":var gradientImage=this.images.get(backgroundImage.value);if(gradientImage){this.renderBackgroundGradient(gradientImage,bounds,borderData);}else{log("Error loading background-image",backgroundImage.args[0]);}
break;case"none":break;default:log("Unknown background-image type",backgroundImage.args[0]);}},this);};Renderer.prototype.renderBackgroundRepeating=function(container,bounds,imageContainer,index,borderData){var size=container.parseBackgroundSize(bounds,imageContainer.image,index);var position=container.parseBackgroundPosition(bounds,imageContainer.image,index,size);var repeat=container.parseBackgroundRepeat(index);switch(repeat){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(imageContainer,position,size,bounds,bounds.left+borderData[3],bounds.top+position.top+borderData[0],99999,size.height,borderData);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(imageContainer,position,size,bounds,bounds.left+position.left+borderData[3],bounds.top+borderData[0],size.width,99999,borderData);break;case"no-repeat":this.backgroundRepeatShape(imageContainer,position,size,bounds,bounds.left+position.left+borderData[3],bounds.top+position.top+borderData[0],size.width,size.height,borderData);break;default:this.renderBackgroundRepeat(imageContainer,position,size,{top:bounds.top,left:bounds.left},borderData[3],borderData[0]);break;}};function StackingContext(hasOwnStacking,opacity,element,parent){NodeContainer.call(this,element,parent);this.ownStacking=hasOwnStacking;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*opacity;}
StackingContext.prototype=Object.create(NodeContainer.prototype);StackingContext.prototype.getParentStack=function(context){var parentStack=(this.parent)?this.parent.stack:null;return parentStack?(parentStack.ownStacking?parentStack:parentStack.getParentStack(context)):context.stack;};function Support(document){this.rangeBounds=this.testRangeBounds(document);this.cors=this.testCORS();this.svg=this.testSVG();}
Support.prototype.testRangeBounds=function(document){var range,testElement,rangeBounds,rangeHeight,support=false;if(document.createRange){range=document.createRange();if(range.getBoundingClientRect){testElement=document.createElement('boundtest');testElement.style.height="123px";testElement.style.display="block";document.body.appendChild(testElement);range.selectNode(testElement);rangeBounds=range.getBoundingClientRect();rangeHeight=rangeBounds.height;if(rangeHeight===123){support=true;}
document.body.removeChild(testElement);}}
return support;};Support.prototype.testCORS=function(){return typeof((new Image()).crossOrigin)!=="undefined";};Support.prototype.testSVG=function(){var img=new Image();var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");img.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{ctx.drawImage(img,0,0);canvas.toDataURL();}catch(e){return false;}
return true;};function SVGContainer(src){this.src=src;this.image=null;var self=this;this.promise=this.hasFabric().then(function(){return(self.isInline(src)?Promise.resolve(self.inlineFormatting(src)):XHR(src));}).then(function(svg){return new Promise(function(resolve){html2canvas.fabric.loadSVGFromString(svg,self.createCanvas.call(self,resolve));});});}
SVGContainer.prototype.hasFabric=function(){return!html2canvas.fabric?Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg")):Promise.resolve();};SVGContainer.prototype.inlineFormatting=function(src){return(/^data:image\/svg\+xml;base64,/.test(src))?this.decode64(this.removeContentType(src)):this.removeContentType(src);};SVGContainer.prototype.removeContentType=function(src){return src.replace(/^data:image\/svg\+xml(;base64)?,/,'');};SVGContainer.prototype.isInline=function(src){return(/^data:image\/svg\+xml/i.test(src));};SVGContainer.prototype.createCanvas=function(resolve){var self=this;return function(objects,options){var canvas=new html2canvas.fabric.StaticCanvas('c');self.image=canvas.lowerCanvasEl;canvas.setWidth(options.width).setHeight(options.height).add(html2canvas.fabric.util.groupSVGElements(objects,options)).renderAll();resolve(canvas.lowerCanvasEl);};};SVGContainer.prototype.decode64=function(str){return(typeof(window.atob)==="function")?window.atob(str):decode64(str);};function decode64(base64){var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var len=base64.length,i,encoded1,encoded2,encoded3,encoded4,byte1,byte2,byte3;var output="";for(i=0;i<len;i+=4){encoded1=chars.indexOf(base64[i]);encoded2=chars.indexOf(base64[i+1]);encoded3=chars.indexOf(base64[i+2]);encoded4=chars.indexOf(base64[i+3]);byte1=(encoded1<<2)|(encoded2>>4);byte2=((encoded2&15)<<4)|(encoded3>>2);byte3=((encoded3&3)<<6)|encoded4;if(encoded3===64){output+=String.fromCharCode(byte1);}else if(encoded4===64||encoded4===-1){output+=String.fromCharCode(byte1,byte2);}else{output+=String.fromCharCode(byte1,byte2,byte3);}}
return output;}
function SVGNodeContainer(node,native){this.src=node;this.image=null;var self=this;this.promise=native?new Promise(function(resolve,reject){self.image=new Image();self.image.onload=resolve;self.image.onerror=reject;self.image.src="data:image/svg+xml,"+(new XMLSerializer()).serializeToString(node);if(self.image.complete===true){resolve(self.image);}}):this.hasFabric().then(function(){return new Promise(function(resolve){html2canvas.fabric.parseSVGDocument(node,self.createCanvas.call(self,resolve));});});}
SVGNodeContainer.prototype=Object.create(SVGContainer.prototype);function TextContainer(node,parent){NodeContainer.call(this,node,parent);}
TextContainer.prototype=Object.create(NodeContainer.prototype);TextContainer.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"));};TextContainer.prototype.transform=function(transform){var text=this.node.data;switch(transform){case"lowercase":return text.toLowerCase();case"capitalize":return text.replace(/(^|\s|:|-|\(|\))([a-z])/g,capitalize);case"uppercase":return text.toUpperCase();default:return text;}};function capitalize(m,p1,p2){if(m.length>0){return p1+p2.toUpperCase();}}
function WebkitGradientContainer(imageData){GradientContainer.apply(this,arguments);this.type=(imageData.args[0]==="linear")?this.TYPES.LINEAR:this.TYPES.RADIAL;}
WebkitGradientContainer.prototype=Object.create(GradientContainer.prototype);function XHR(url){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.open('GET',url);xhr.onload=function(){if(xhr.status===200){resolve(xhr.responseText);}else{reject(new Error(xhr.statusText));}};xhr.onerror=function(){reject(new Error("Network Error"));};xhr.send();});}
function CanvasRenderer(width,height){Renderer.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");if(!this.options.canvas){this.canvas.width=width;this.canvas.height=height;}
this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};log("Initialized CanvasRenderer with size",width,"x",height);}
CanvasRenderer.prototype=Object.create(Renderer.prototype);CanvasRenderer.prototype.setFillStyle=function(fillStyle){this.ctx.fillStyle=typeof(fillStyle)==="object"&&!!fillStyle.isColor?fillStyle.toString():fillStyle;return this.ctx;};CanvasRenderer.prototype.rectangle=function(left,top,width,height,color){this.setFillStyle(color).fillRect(left,top,width,height);};CanvasRenderer.prototype.circle=function(left,top,size,color){this.setFillStyle(color);this.ctx.beginPath();this.ctx.arc(left+size/2,top+size/2,size/2,0,Math.PI*2,true);this.ctx.closePath();this.ctx.fill();};CanvasRenderer.prototype.circleStroke=function(left,top,size,color,stroke,strokeColor){this.circle(left,top,size,color);this.ctx.strokeStyle=strokeColor.toString();this.ctx.stroke();};CanvasRenderer.prototype.drawShape=function(shape,color){this.shape(shape);this.setFillStyle(color).fill();};CanvasRenderer.prototype.taints=function(imageContainer){if(imageContainer.tainted===null){this.taintCtx.drawImage(imageContainer.image,0,0);try{this.taintCtx.getImageData(0,0,1,1);imageContainer.tainted=false;}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d");imageContainer.tainted=true;}}
return imageContainer.tainted;};CanvasRenderer.prototype.drawImage=function(imageContainer,sx,sy,sw,sh,dx,dy,dw,dh){if(!this.taints(imageContainer)||this.options.allowTaint){this.ctx.drawImage(imageContainer.image,sx,sy,sw,sh,dx,dy,dw,dh);}};CanvasRenderer.prototype.clip=function(shapes,callback,context){this.ctx.save();shapes.filter(hasEntries).forEach(function(shape){this.shape(shape).clip();},this);callback.call(context);this.ctx.restore();};CanvasRenderer.prototype.shape=function(shape){this.ctx.beginPath();shape.forEach(function(point,index){if(point[0]==="rect"){this.ctx.rect.apply(this.ctx,point.slice(1));}else{this.ctx[(index===0)?"moveTo":point[0]+"To"].apply(this.ctx,point.slice(1));}},this);this.ctx.closePath();return this.ctx;};CanvasRenderer.prototype.font=function(color,style,variant,weight,size,family){this.setFillStyle(color).font=[style,variant,weight,size,family].join(" ").split(",")[0];};CanvasRenderer.prototype.fontShadow=function(color,offsetX,offsetY,blur){this.setVariable("shadowColor",color.toString()).setVariable("shadowOffsetY",offsetX).setVariable("shadowOffsetX",offsetY).setVariable("shadowBlur",blur);};CanvasRenderer.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)");};CanvasRenderer.prototype.setOpacity=function(opacity){this.ctx.globalAlpha=opacity;};CanvasRenderer.prototype.setTransform=function(transform){this.ctx.translate(transform.origin[0],transform.origin[1]);this.ctx.transform.apply(this.ctx,transform.matrix);this.ctx.translate(-transform.origin[0],-transform.origin[1]);};CanvasRenderer.prototype.setVariable=function(property,value){if(this.variables[property]!==value){this.variables[property]=this.ctx[property]=value;}
return this;};CanvasRenderer.prototype.text=function(text,left,bottom){this.ctx.fillText(text,left,bottom);};CanvasRenderer.prototype.backgroundRepeatShape=function(imageContainer,backgroundPosition,size,bounds,left,top,width,height,borderData){var shape=[["line",Math.round(left),Math.round(top)],["line",Math.round(left+width),Math.round(top)],["line",Math.round(left+width),Math.round(height+top)],["line",Math.round(left),Math.round(height+top)]];this.clip([shape],function(){this.renderBackgroundRepeat(imageContainer,backgroundPosition,size,bounds,borderData[3],borderData[0]);},this);};CanvasRenderer.prototype.renderBackgroundRepeat=function(imageContainer,backgroundPosition,size,bounds,borderLeft,borderTop){var offsetX=Math.round(bounds.left+backgroundPosition.left+borderLeft),offsetY=Math.round(bounds.top+backgroundPosition.top+borderTop);this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer,size),"repeat"));this.ctx.translate(offsetX,offsetY);this.ctx.fill();this.ctx.translate(-offsetX,-offsetY);};CanvasRenderer.prototype.renderBackgroundGradient=function(gradientImage,bounds){if(gradientImage instanceof LinearGradientContainer){var gradient=this.ctx.createLinearGradient(bounds.left+bounds.width*gradientImage.x0,bounds.top+bounds.height*gradientImage.y0,bounds.left+bounds.width*gradientImage.x1,bounds.top+bounds.height*gradientImage.y1);gradientImage.colorStops.forEach(function(colorStop){gradient.addColorStop(colorStop.stop,colorStop.color.toString());});this.rectangle(bounds.left,bounds.top,bounds.width,bounds.height,gradient);}};CanvasRenderer.prototype.resizeImage=function(imageContainer,size){var image=imageContainer.image;if(image.width===size.width&&image.height===size.height){return image;}
var ctx,canvas=document.createElement('canvas');canvas.width=size.width;canvas.height=size.height;ctx=canvas.getContext("2d");ctx.drawImage(image,0,0,image.width,image.height,0,0,size.width,size.height);return canvas;};function hasEntries(array){return array.length>0;}}).call({},typeof(window)!=="undefined"?window:undefined,typeof(document)!=="undefined"?document:undefined);
/*!
 * jquery.confirm
 *
 * @version 2.0.1
 *
 * @author My C-Labs
 * @author Matthieu Napoli <matthieu@mnapoli.fr>
 * @author Russel Vela
 *
 * @license MIT
 * @url http://myclabs.github.io/jquery.confirm/
 */
(function($){$.fn.confirm=function(options){if(typeof options==="undefined"){options={}}this.click(function(e){e.preventDefault();var newOptions=$.extend({button:$(this)},options);$.confirm(newOptions,e)});return this};$.confirm=function(options,e){var settings=$.extend({text:"Are you sure?",title:"",confirmButton:"Yes",cancelButton:"Cancel",post:false,confirm:function(o){var url=e.currentTarget.attributes["href"].value;if(options.post){var form=$('<form method="post" class="hide" action="'+url+'"></form>');$("body").append(form);form.submit()}else{window.location=url}},cancel:function(o){},button:null},options);var modalHeader="";if(settings.title!==""){modalHeader="<div class=modal-header>"+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'<h4 class="modal-title">'+settings.title+"</h4>"+"</div>"}var modalHTML='<div class="confirmation-modal modal fade" tabindex="-1" role="dialog">'+'<div class="modal-dialog">'+'<div class="modal-content">'+modalHeader+'<div class="modal-body">'+settings.text+"</div>"+'<div class="modal-footer">'+'<button class="confirm btn btn-primary" type="button" data-dismiss="modal">'+settings.confirmButton+"</button>"+'<button class="cancel btn btn-default" type="button" data-dismiss="modal">'+settings.cancelButton+"</div>"+"</div>"+"</div>"+"</div>"+"</div>";var modal=$(modalHTML);modal.on("shown",function(){modal.find(".btn-primary:first").focus()});modal.on("hidden",function(){modal.remove()});modal.find(".confirm").click(function(){settings.confirm(settings.button)});modal.find(".cancel").click(function(){settings.cancel(settings.button)});$("body").append(modal);modal.modal("show")}})(jQuery);var jsPDF=function(){function f(g,d,e,h){g="undefined"===typeof g?"p":g.toString().toLowerCase();"undefined"===typeof d&&(d="mm");"undefined"===typeof e&&(e="a4");"undefined"===typeof h&&"undefined"===typeof zpipe&&(h=!1);var a=e.toString().toLowerCase(),p=[],j=0,m=h;h={a3:[841.89,1190.55],a4:[595.28,841.89],a5:[420.94,595.28],letter:[612,792],legal:[612,1008]};var u="0 g",c=0,q=[],C=2,F=!1,H=[],n={},x={},z=16,A,y,s,r,I={title:"",subject:"",author:"",keywords:"",creator:""},w=0,aa=0,D={},G=new k(D),B,v=function(c){return c.toFixed(2)},V=function(c){var e=c.toFixed(0);return 10>c?"0"+e:e},l=function(e){F?q[c].push(e):(p.push(e),j+=e.length+1)},N=function(){C++;H[C]=j;l(C+" 0 obj");return C},Q=function(c){l("stream");l(c);l("endstream")},J,ca,R,t=function(c,e){var d;d=c;var j=e,a,h,b,p,g,m;void 0===j&&(j={});a=j.sourceEncoding?a:"Unicode";b=j.outputEncoding;if((j.autoencode||b)&&n[A].metadata&&n[A].metadata[a]&&n[A].metadata[a].encoding)if(a=n[A].metadata[a].encoding,!b&&n[A].encoding&&(b=n[A].encoding),!b&&a.codePages&&(b=a.codePages[0]),"string"===typeof b&&(b=a[b]),b){g=!1;p=[];a=0;for(h=d.length;a<h;a++)(m=b[d.charCodeAt(a)])?p.push(String.fromCharCode(m)):p.push(d[a]),p[a].charCodeAt(0)>>8&&(g=!0);d=p.join("")}for(a=d.length;void 0===g&&0!==a;)d.charCodeAt(a-1)>>8&&(g=!0),a--;if(g){p=j.noBOM?[]:[254,255];a=0;for(h=d.length;a<h;a++){m=d.charCodeAt(a);j=m>>8;if(j>>8)throw Error("Character at position "+a.toString(10)+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");p.push(j);p.push(m-(j<<8))}d=String.fromCharCode.apply(void 0,p)}return d.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},W=function(){c++;F=!0;q[c]=[];l(v(0.200025*r)+" w");l("0 G");0!==w&&l(w.toString(10)+" J");0!==aa&&l(aa.toString(10)+" j");G.publish("addPage",{pageNumber:c})},E=function(c,a){var d;void 0===c&&(c=n[A].fontName);void 0===a&&(a=n[A].fontStyle);try{d=x[c][a]}catch(e){d=void 0}if(!d)throw Error("Unable to look up font label for font '"+c+"', '"+a+"'. Refer to getFontList() for available fonts.");return d},K=function(){F=!1;p=[];H=[];l("%PDF-1.3");J=s*r;ca=y*r;var a,d,e,b,h;for(a=1;a<=c;a++){N();l("<</Type /Page");l("/Parent 1 0 R");l("/Resources 2 0 R");l("/Contents "+(C+1)+" 0 R>>");l("endobj");d=q[a].join("\n");N();if(m){e=[];for(b=0;b<d.length;++b)e[b]=d.charCodeAt(b);h=adler32cs.from(d);d=new Deflater(6);d.append(new Uint8Array(e));d=d.flush();e=[new Uint8Array([120,156]),new Uint8Array(d),new Uint8Array([h&255,h>>8&255,h>>16&255,h>>24&255])];d="";for(b in e)e.hasOwnProperty(b)&&(d+=String.fromCharCode.apply(null,e[b]));l("<</Length "+d.length+" /Filter [/FlateDecode]>>")}else l("<</Length "+d.length+">>");Q(d);l("endobj")}H[1]=j;l("1 0 obj");l("<</Type /Pages");R="/Kids [";for(b=0;b<c;b++)R+=3+2*b+" 0 R ";l(R+"]");l("/Count "+c);l("/MediaBox [0 0 "+v(J)+" "+v(ca)+"]");l(">>");l("endobj");for(var g in n)n.hasOwnProperty(g)&&(a=n[g],a.objectNumber=N(),l("<</BaseFont/"+a.PostScriptName+"/Type/Font"),"string"===typeof a.encoding&&l("/Encoding/"+a.encoding),l("/Subtype/Type1>>"),l("endobj"));G.publish("putResources");H[2]=j;l("2 0 obj");l("<<");l("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");l("/Font <<");for(var f in n)n.hasOwnProperty(f)&&l("/"+f+" "+n[f].objectNumber+" 0 R");l(">>");l("/XObject <<");G.publish("putXobjectDict");l(">>");l(">>");l("endobj");G.publish("postPutResources");N();l("<<");l("/Producer (jsPDF 20120619)");I.title&&l("/Title ("+t(I.title)+")");I.subject&&l("/Subject ("+t(I.subject)+")");I.author&&l("/Author ("+t(I.author)+")");I.keywords&&l("/Keywords ("+
t(I.keywords)+")");I.creator&&l("/Creator ("+t(I.creator)+")");g=new Date;l("/CreationDate (D:"+[g.getFullYear(),V(g.getMonth()+1),V(g.getDate()),V(g.getHours()),V(g.getMinutes()),V(g.getSeconds())].join("")+")");l(">>");l("endobj");N();l("<<");l("/Type /Catalog");l("/Pages 1 0 R");l("/OpenAction [3 0 R /FitH null]");l("/PageLayout /OneColumn");G.publish("putCatalog");l(">>");l("endobj");g=j;l("xref");l("0 "+(C+1));l("0000000000 65535 f ");for(f=1;f<=C;f++)a=H[f].toFixed(0),a=10>a.length?Array(11-
a.length).join("0")+a:a,l(a+" 00000 n ");l("trailer");l("<<");l("/Size "+(C+1));l("/Root "+C+" 0 R");l("/Info "+(C-1)+" 0 R");l(">>");l("startxref");l(g);l("%%EOF");F=!0;return p.join("\n")},Y=function(c){var a="S";if("F"===c)a="f";else if("FD"===c||"DF"===c)a="B";return a},Z=function(c,a){var d,e,b,j;switch(c){case void 0:return K();case"save":if(navigator.getUserMedia&&(void 0===window.URL||void 0===window.URL.createObjectURL))return D.output("dataurlnewwindow");d=K();e=d.length;b=new Uint8Array(new ArrayBuffer(e));for(j=0;j<e;j++)b[j]=d.charCodeAt(j);d=new Blob([b],{type:"application/pdf"});saveAs(d,a);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(K());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(K());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(K()));break;default:throw Error('Output type "'+c+'" is not supported.');}};if("pt"===d)r=1;else if("mm"===d)r=72/25.4;else if("cm"===d)r=72/2.54;else if("in"===d)r=72;else throw"Invalid unit: "+d;if(h.hasOwnProperty(a))y=h[a][1]/r,s=h[a][0]/r;else try{y=e[1],s=e[0]}catch(M){throw"Invalid format: "+e;}if("p"===g||"portrait"===g)g="p",s>y&&(g=s,s=y,y=g);else if("l"===g||"landscape"===g)g="l",y>s&&(g=s,s=y,y=g);else throw"Invalid orientation: "+g;D.internal={pdfEscape:t,getStyle:Y,getFont:function(){return n[E.apply(D,arguments)]},getFontSize:function(){return z},btoa:btoa,write:function(c,a,d,e){l(1===arguments.length?c:Array.prototype.join.call(arguments," "))},getCoordinateString:function(c){return v(c*r)},getVerticalCoordinateString:function(c){return v((y-c)*r)},collections:{},newObject:N,putStream:Q,events:G,scaleFactor:r,pageSize:{width:s,height:y},output:function(c,a){return Z(c,a)}};D.addPage=function(){W();return this};D.text=function(c,a,d,e){var b,j;"number"===typeof c&&(b=c,j=a,c=d,a=b,d=j);"string"===typeof c&&c.match(/[\n\r]/)&&(c=c.split(/\r\n|\r|\n/g));"undefined"===typeof e?e={noBOM:!0,autoencode:!0}:(void 0===e.noBOM&&(e.noBOM=!0),void 0===e.autoencode&&(e.autoencode=!0));if("string"===typeof c)e=t(c,e);else if(c instanceof Array){c=c.concat();for(b=c.length-1;-1!==b;b--)c[b]=t(c[b],e);e=c.join(") Tj\nT* (")}else throw Error('Type of text must be string or Array. "'+c+'" is not recognized.');l("BT\n/"+A+" "+z+" Tf\n"+z+" TL\n"+u+"\n"+v(a*r)+" "+v((y-d)*r)+" Td\n("+e+") Tj\nET");return this};D.line=function(c,a,d,e){l(v(c*r)+" "+v((y-a)*r)+" m "+v(d*r)+" "+v((y-e)*r)+" l S");return this};D.lines=function(c,a,d,e,b){var j,g,h,p,m,f,q,u;"number"===typeof c&&(j=c,g=a,c=d,a=j,d=g);b=Y(b);e=void 0===e?[1,1]:e;l((a*r).toFixed(3)+" "+((y-d)*r).toFixed(3)+" m ");j=e[0];e=e[1];g=c.length;u=d;for(d=0;d<g;d++)h=c[d],2===h.length?(a=h[0]*j+a,u=h[1]*e+u,l((a*r).toFixed(3)+" "+((y-u)*r).toFixed(3)+" l")):(p=h[0]*j+a,m=h[1]*e+u,f=h[2]*j+a,q=h[3]*e+u,a=h[4]*j+a,u=h[5]*e+u,l((p*r).toFixed(3)+" "+((y-m)*r).toFixed(3)+" "+(f*r).toFixed(3)+" "+((y-q)*r).toFixed(3)+" "+(a*r).toFixed(3)+" "+((y-u)*r).toFixed(3)+" c"));l(b);return this};D.rect=function(c,a,d,e,b){b=Y(b);l([v(c*r),v((y-a)*r),v(d*r),v(-e*r),"re",b].join(" "));return this};D.triangle=function(c,a,d,e,b,j,h){this.lines([[d-c,e-a],[b-d,j-e],[c-b,a-j]],c,a,[1,1],h);return this};D.roundedRect=function(c,a,d,e,b,j,h){var g=4/3*(Math.SQRT2-1);this.lines([[d-2*b,0],[b*g,0,b,j-j*g,b,j],[0,e-2*j],[0,j*g,-(b*g),j,-b,j],[-d+2*b,0],[-(b*g),0,-b,-(j*g),-b,-j],[0,-e+2*j],[0,-(j*g),b*g,-j,b,-j]],c+b,a,[1,1],h);return this};D.ellipse=function(c,a,d,e,b){b=Y(b);var j=4/3*(Math.SQRT2-
1)*d,g=4/3*(Math.SQRT2-1)*e;l([v((c+d)*r),v((y-a)*r),"m",v((c+d)*r),v((y-(a-g))*r),v((c+j)*r),v((y-(a-e))*r),v(c*r),v((y-(a-e))*r),"c"].join(" "));l([v((c-j)*r),v((y-(a-e))*r),v((c-d)*r),v((y-(a-g))*r),v((c-d)*r),v((y-a)*r),"c"].join(" "));l([v((c-d)*r),v((y-(a+g))*r),v((c-j)*r),v((y-(a+e))*r),v(c*r),v((y-(a+e))*r),"c"].join(" "));l([v((c+j)*r),v((y-(a+e))*r),v((c+d)*r),v((y-(a+g))*r),v((c+d)*r),v((y-a)*r),"c",b].join(" "));return this};D.circle=function(c,a,d,e){return this.ellipse(c,a,d,d,e)};D.setProperties=function(c){for(var a in I)I.hasOwnProperty(a)&&c[a]&&(I[a]=c[a]);return this};D.setFontSize=function(c){z=c;return this};D.setFont=function(c,a){A=E(c,a);return this};D.setFontStyle=D.setFontType=function(c){A=E(void 0,c);return this};D.getFontList=function(){var c={},a,d,e;for(a in x)if(x.hasOwnProperty(a))for(d in c[a]=e=[],x[a])x[a].hasOwnProperty(d)&&e.push(d);return c};D.setLineWidth=function(c){l((c*r).toFixed(2)+" w");return this};D.setDrawColor=function(c,a,d,e){c=void 0===a||void 0===e&&c===a===d?"string"===typeof c?c+" G":v(c/255)+" G":void 0===e?"string"===typeof c?[c,a,d,"RG"].join(" "):[v(c/255),v(a/255),v(d/255),"RG"].join(" "):"string"===typeof c?[c,a,d,e,"K"].join(" "):[v(c),v(a),v(d),v(e),"K"].join(" ");l(c);return this};D.setFillColor=function(c,a,d,e){c=void 0===a||void 0===e&&c===a===d?"string"===typeof c?c+" g":v(c/255)+" g":void 0===e?"string"===typeof c?[c,a,d,"rg"].join(" "):[v(c/255),v(a/255),v(d/255),"rg"].join(" "):"string"===typeof c?[c,a,d,e,"k"].join(" "):[v(c),v(a),v(d),v(e),"k"].join(" ");l(c);return this};D.setTextColor=function(c,a,d){u=0===c&&0===a&&0===d||"undefined"===typeof a?(c/255).toFixed(3)+" g":[(c/255).toFixed(3),(a/255).toFixed(3),(d/255).toFixed(3),"rg"].join(" ");return this};D.CapJoinStyles={"0":0,butt:0,but:0,bevel:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,milter:2};D.setLineCap=function(c){var a=this.CapJoinStyles[c];if(void 0===a)throw Error("Line cap style of '"+c+"' is not recognized. See or extend .CapJoinStyles property for valid styles");w=a;l(a.toString(10)+" J");return this};D.setLineJoin=function(c){var a=this.CapJoinStyles[c];if(void 0===a)throw Error("Line join style of '"+c+"' is not recognized. See or extend .CapJoinStyles property for valid styles");aa=a;l(a.toString(10)+" j");return this};D.output=Z;D.save=function(c){D.output("save",c)};for(B in f.API)if(f.API.hasOwnProperty(B))if("events"===B&&f.API.events.length){g=G;d=f.API.events;h=a=e=void 0;for(h=d.length-1;-1!==h;h--)e=d[h][0],a=d[h][1],g.subscribe.apply(g,[e].concat("function"===typeof a?[a]:a))}else D[B]=f.API[B];B=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]];g=0;for(d=B.length;g<d;g++){h=B[g][0];var T=B[g][1],a=B[g][2];e="F"+(b(n)+1).toString(10);h=n[e]={id:e,PostScriptName:h,fontName:T,fontStyle:a,encoding:"StandardEncoding",metadata:{}};var ha=e;void 0===x[T]&&(x[T]={});x[T][a]=ha;G.publish("addFont",h);a=e;e=B[g][0].split("-");h=e[0];e=e[1]||"";void 0===x[h]&&(x[h]={});x[h][e]=a}G.publish("addFonts",{fonts:n,dictionary:x});A="F1";W();G.publish("initialized");return D}"undefined"===typeof btoa&&(window.btoa=function(b){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),e,h,a,p,j=0,m=0,f="",f=[];do e=b.charCodeAt(j++),h=b.charCodeAt(j++),a=b.charCodeAt(j++),p=e<<16|h<<8|a,e=p>>18&63,h=p>>12&63,a=p>>6&63,p&=63,f[m++]=d[e]+d[h]+d[a]+d[p];while(j<b.length);f=f.join("");b=b.length%3;return(b?f.slice(0,b-3):f)+"===".slice(b||3)});"undefined"===typeof atob&&(window.atob=function(b){var d,e,h,a,p,j=0,m=0;a="";var f=[];if(!b)return b;b+="";do d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(j++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(j++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(j++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(j++)),h=d<<18|e<<12|a<<6|p,d=h>>16&255,e=h>>8&255,h&=255,64===a?f[m++]=String.fromCharCode(d):64===p?f[m++]=String.fromCharCode(d,e):f[m++]=String.fromCharCode(d,e,h);while(j<b.length);return a=f.join("")});var b="function"===typeof Object.keys?function(b){return Object.keys(b).length}:function(b){var d=0,e;for(e in b)b.hasOwnProperty(e)&&d++;return d},k=function(b){this.topics={};this.context=b;this.publish=function(d,b){if(this.topics[d]){var h=this.topics[d],a=[],p,j,g,f,c=function(){};b=Array.prototype.slice.call(arguments,1);j=0;for(g=h.length;j<g;j++)f=h[j],p=f[0],f[1]&&(f[0]=c,a.push(j)),p.apply(this.context,b);j=0;for(g=a.length;j<g;j++)h.splice(a[j],1)}};this.subscribe=function(d,b,h){this.topics[d]?this.topics[d].push([b,h]):this.topics[d]=[[b,h]];return{topic:d,callback:b}};this.unsubscribe=function(d){if(this.topics[d.topic]){var b=this.topics[d.topic],h,a;h=0;for(a=b.length;h<a;h++)b[h][0]===d.callback&&b.splice(h,1)}}};f.API={events:[]};return f}();(function(f){var b=function(){var b=this.internal.collections.addImage_images,d;for(d in b){var e=b[d],h=this.internal.newObject(),a=this.internal.write,p=this.internal.putStream;e.n=h;a("<</Type /XObject");a("/Subtype /Image");a("/Width "+e.w);a("/Height "+e.h);"Indexed"===e.cs?a("/ColorSpace [/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+(h+1)+" 0 R]"):(a("/ColorSpace /"+e.cs),"DeviceCMYK"===e.cs&&a("/Decode [1 0 1 0 1 0 1 0]"));a("/BitsPerComponent "+e.bpc);"f"in e&&a("/Filter /"+e.f);"dp"in e&&a("/DecodeParms <<"+e.dp+">>");if("trns"in e&&e.trns.constructor==Array)for(var j="",f=0;f<e.trns.length;f++)j+=e[j][f]+" "+e.trns[f]+" ",a("/Mask ["+j+"]");"smask"in e&&a("/SMask "+(h+1)+" 0 R");a("/Length "+e.data.length+">>");p(e.data);a("endobj")}},k=function(){var b=this.internal.collections.addImage_images,d=this.internal.write,e,h;for(h in b)e=b[h],d("/I"+e.i,e.n,"0","R")};f.addImage=function(g,d,e,h,a,p){if("object"===typeof g&&1===g.nodeType){d=document.createElement("canvas");d.width=g.clientWidth;d.height=g.clientHeight;var j=d.getContext("2d");if(!j)throw"addImage requires canvas to be supported by browser.";j.drawImage(g,0,0,d.width,d.height);g=d.toDataURL("image/jpeg");d="JPEG"}if("JPEG"!==d.toUpperCase())throw Error("addImage currently only supports format 'JPEG', not '"+d+"'");var f;d=this.internal.collections.addImage_images;var j=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;"data:image/jpeg;base64,"===g.substring(0,23)&&(g=atob(g.replace("data:image/jpeg;base64,","")));if(d)if(Object.keys)f=Object.keys(d).length;else{var c=d,q=0;for(f in c)c.hasOwnProperty(f)&&q++;f=q}else f=0,this.internal.collections.addImage_images=d={},this.internal.events.subscribe("putResources",b),this.internal.events.subscribe("putXobjectDict",k);a:{var c=g,C;if(255===!c.charCodeAt(0)||216===!c.charCodeAt(1)||255===!c.charCodeAt(2)||224===!c.charCodeAt(3)||74===!c.charCodeAt(6)||70===!c.charCodeAt(7)||73===!c.charCodeAt(8)||70===!c.charCodeAt(9)||0===!c.charCodeAt(10))throw Error("getJpegSize requires a binary jpeg file");C=256*c.charCodeAt(4)+c.charCodeAt(5);for(var q=4,F=c.length;q<F;){q+=C;if(255!==c.charCodeAt(q))throw Error("getJpegSize could not find the size of the image");if(192===c.charCodeAt(q+1)){C=256*c.charCodeAt(q+5)+c.charCodeAt(q+6);c=256*c.charCodeAt(q+7)+c.charCodeAt(q+8);c=[c,C];break a}else q+=2,C=256*c.charCodeAt(q)+c.charCodeAt(q+1)}c=void 0}g={w:c[0],h:c[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:f,data:g};d[f]=g;!a&&!p&&(p=a=-96);0>a&&(a=-72*g.w/a/this.internal.scaleFactor);0>p&&(p=-72*g.h/p/this.internal.scaleFactor);0===a&&(a=p*g.w/g.h);0===p&&(p=a*g.h/g.w);this.internal.write("q",j(a),"0 0",j(p),j(e),u(h+p),"cm /I"+g.i,"Do Q");return this}})(jsPDF.API);(function(f){function b(a,b,d,e){this.pdf=a;this.x=b;this.y=d;this.settings=e;this.init();return this}function k(b){var d=a[b];if(d)return d;d={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[b];if(void 0!==d||(d=parseFloat(b)))return a[b]=d/16;d=b.match(/([\d\.]+)(px)/);return 3===d.length?a[b]=parseFloat(d[1])/16:a[b]=1}function g(a,b,f){var u=a.childNodes,c;c=$(a);a={};for(var q,C=c.css("font-family").split(","),F=C.shift();!q&&F;)q=d[F.trim().toLowerCase()],F=C.shift();a["font-family"]=q||"times";a["font-style"]=h[c.css("font-style")]||"normal";q=e[c.css("font-weight")]||"normal";"bold"===q&&(a["font-style"]="normal"===a["font-style"]?q:q+a["font-style"]);a["font-size"]=k(c.css("font-size"))||1;a["line-height"]=k(c.css("line-height"))||1;a.display="inline"===c.css("display")?"inline":"block";"block"===a.display&&(a["margin-top"]=k(c.css("margin-top"))||0,a["margin-bottom"]=k(c.css("margin-bottom"))||0,a["padding-top"]=k(c.css("padding-top"))||0,a["padding-bottom"]=k(c.css("padding-bottom"))||0);if(q="block"===a.display)b.setBlockBoundary(),b.setBlockStyle(a);C=0;for(F=u.length;C<F;C++)if(c=u[C],"object"===typeof c)if(1===c.nodeType&&"SCRIPT"!=c.nodeName){var H=c,n=b,x=f,z=!1,A=void 0,y=void 0,s=x["#"+H.id];if(s)if("function"===typeof s)z=s(H,n);else{A=0;for(y=s.length;!z&&A!==y;)z=s[A](H,n),A++}s=x[H.nodeName];if(!z&&s)if("function"===typeof s)z=s(H,n);else{A=0;for(y=s.length;!z&&A!==y;)z=s[A](H,n),A++}z||g(c,b,f)}else 3===c.nodeType&&b.addText(c.nodeValue,a);else"string"===typeof c&&b.addText(c,a);q&&b.setBlockBoundary()}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")});String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")});b.prototype.init=function(){this.paragraph={text:[],style:[]};this.pdf.internal.write("q")};b.prototype.dispose=function(){this.pdf.internal.write("Q");return{x:this.x,y:this.y}};b.prototype.splitFragmentsIntoLines=function(a,b){for(var d=this.pdf.internal.scaleFactor,e={},c,h,g,f,k,n=[],x=[n],z=0,A=this.settings.width;a.length;)if(f=a.shift(),k=b.shift(),f)if(c=k["font-family"],h=k["font-style"],g=e[c+h],g||(g=this.pdf.internal.getFont(c,h).metadata.Unicode,e[c+h]=g),c={widths:g.widths,kerning:g.kerning,fontSize:12*k["font-size"],textIndent:z},h=this.pdf.getStringUnitWidth(f,c)*c.fontSize/d,z+h>A){f=this.pdf.splitTextToSize(f,A,c);for(n.push([f.shift(),k]);f.length;)n=[[f.shift(),k]],x.push(n);z=this.pdf.getStringUnitWidth(n[0][0],c)*c.fontSize/d}else n.push([f,k]),z+=h;return x};b.prototype.RenderTextFragment=function(a,b){var d=this.pdf.internal.getFont(b["font-family"],b["font-style"]);this.pdf.internal.write("/"+d.id,(12*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj")};b.prototype.renderParagraph=function(){for(var a=this.paragraph.text,b=0,d=a.length,e,c=!1,h=!1;!c&&b!==d;)(e=a[b]=a[b].trimLeft())&&(c=!0),b++;for(b=d-1;d&&!h&&-1!==b;)(e=a[b]=a[b].trimRight())&&(h=!0),b--;c=/\s+$/g;h=!0;for(b=0;b!==d;b++)e=a[b].replace(/\s+/g," "),h&&(e=e.trimLeft()),e&&(h=c.test(e)),a[b]=e;b=this.paragraph.style;e=(d=this.paragraph.blockstyle)||{};this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:d};if(a.join("").trim()){a=this.splitFragmentsIntoLines(a,b);b=12/this.pdf.internal.scaleFactor;c=(Math.max((d["margin-top"]||0)-(e["margin-bottom"]||0),0)+(d["padding-top"]||0))*b;d=((d["margin-bottom"]||0)+(d["padding-bottom"]||0))*b;e=this.pdf.internal.write;var g,f;this.y+=c;for(e("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");a.length;){c=a.shift();g=h=0;for(f=c.length;g!==f;g++)c[g][0].trim()&&(h=Math.max(h,c[g][1]["line-height"],c[g][1]["font-size"]));e(0,(-12*h).toFixed(2),"Td");g=0;for(f=c.length;g!==f;g++)c[g][0]&&this.RenderTextFragment(c[g][0],c[g][1]);this.y+=h*b}e("ET","Q");this.y+=d}};b.prototype.setBlockBoundary=function(){this.renderParagraph()};b.prototype.setBlockStyle=function(a){this.paragraph.blockstyle=a};b.prototype.addText=function(a,b){this.paragraph.text.push(a);this.paragraph.style.push(b)};var d={helvetica:"helvetica","sans-serif":"helvetica",serif:"times",times:"times","times new roman":"times",monospace:"courier",courier:"courier"},e={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},h={normal:"normal",italic:"italic",oblique:"italic"},a={normal:1};f.fromHTML=function(a,d,e,h){if("string"===typeof a){var c="jsPDFhtmlText"+Date.now().toString()+(1E3*Math.random()).toFixed(0);$('<div style="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;"><iframe style="height:1px;width:1px" name="'+c+'" /></div>').appendTo(document.body);a=$(window.frames[c].document.body).html(a)[0]}d=new b(this,d,e,h);g(a,d,h.elementHandlers);return d.dispose()}})(jsPDF.API);(function(f){f.addSVG=function(b,f,g,d,e){if(void 0===f||void 0===f)throw Error("addSVG needs values for 'x' and 'y'");var h=document.createElement("iframe"),a=document.createElement("style");a.type="text/css";a.styleSheet?a.styleSheet.cssText=".jsPDF_sillysvg_iframe {display:none;position:absolute;}":a.appendChild(document.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}"));document.getElementsByTagName("head")[0].appendChild(a);h.name="childframe";h.setAttribute("width",0);h.setAttribute("height",0);h.setAttribute("frameborder","0");h.setAttribute("scrolling","no");h.setAttribute("seamless","seamless");h.setAttribute("class","jsPDF_sillysvg_iframe");document.body.appendChild(h);h=(h.contentWindow||h.contentDocument).document;h.write(b);h.close();h=h.getElementsByTagName("svg")[0];b=[1,1];var a=parseFloat(h.getAttribute("width")),p=parseFloat(h.getAttribute("height"));a&&p&&(d&&e?b=[d/a,e/p]:d?b=[d/a,d/a]:e&&(b=[e/p,e/p]));h=h.childNodes;d=0;for(e=h.length;d<e;d++)if(a=h[d],a.tagName&&"PATH"===a.tagName.toUpperCase()){for(var a=a.getAttribute("d").split(" "),p=parseFloat(a[1]),j=parseFloat(a[2]),m=[],u=3,c=a.length;u<c;)"c"===a[u]?(m.push([parseFloat(a[u+1]),parseFloat(a[u+2]),parseFloat(a[u+3]),parseFloat(a[u+4]),parseFloat(a[u+5]),parseFloat(a[u+6])]),u+=7):"l"===a[u]?(m.push([parseFloat(a[u+1]),parseFloat(a[u+2])]),u+=3):u+=1;a=[p,j,m];a[0]=a[0]*b[0]+f;a[1]=a[1]*b[1]+g;this.lines.call(this,a[2],a[0],a[1],b)}return this}})(jsPDF.API);(function(f){var b=f.getCharWidthsArray=function(b,e){e||(e={});var h=e.widths?e.widths:this.internal.getFont().metadata.Unicode.widths,a=h.fof?h.fof:1,g=e.kerning?e.kerning:this.internal.getFont().metadata.Unicode.kerning,f=g.fof?g.fof:1,m,k,c,q=0,C=h[0]||a,F=[];m=0;for(k=b.length;m<k;m++)c=b.charCodeAt(m),F.push((h[c]||C)/a+(g[c]&&g[c][q]||0)/f),q=c;return F},k=function(b){for(var e=b.length,h=0;e;)e--,h+=b[e];return h};f.getStringUnitWidth=function(d,e){return k(b.call(this,d,e))};var g=function(d,e,h){h||(h={});var a=b(" ",h)[0],g=d.split(" "),f=[];d=[f];var m=h.textIndent||0,u=0,c=0,q,C,F,H;F=0;for(H=g.length;F<H;F++){q=g[F];C=b(q,h);c=k(C);if(m+u+c>e){if(c>e){for(var c=q,n=C,x=e,z=[],A=0,y=c.length,s=0;A!==y&&s+n[A]<e-(m+u);)s+=n[A],A++;z.push(c.slice(0,A));m=A;for(s=0;A!==y;)s+n[A]>x&&(z.push(c.slice(m,A)),s=0,m=A),s+=n[A],A++;m!==A&&z.push(c.slice(m,A));m=z;f.push(m.shift());for(f=[m.pop()];m.length;)d.push([m.shift()]);c=k(C.slice(q.length-f[0].length))}else f=[q];d.push(f);m=c}else f.push(q),m+=u+c;u=a}e=[];F=0;for(H=d.length;F<H;F++)e.push(d[F].join(" "));return e};f.splitTextToSize=function(b,e,h){h||(h={});var a=h.fontSize||this.internal.getFontSize(),f;var j=h;f={"0":1};var m={};!j.widths||!j.kerning?(j=this.internal.getFont(j.fontName,j.fontStyle),f=j.metadata.Unicode?{widths:j.metadata.Unicode.widths||f,kerning:j.metadata.Unicode.kerning||m}:{widths:f,kerning:m}):f={widths:j.widths,kerning:j.kerning};b=b.match(/[\n\r]/)?b.split(/\r\n|\r|\n/g):[b];e=1*this.internal.scaleFactor*e/a;f.textIndent=h.textIndent?1*h.textIndent*this.internal.scaleFactor/a:0;m=[];h=0;for(a=b.length;h<a;h++)m=m.concat(g(b[h],e,f));return m}})(jsPDF.API);(function(f){var b=function(b){for(var d={},a=0;16>a;a++)d["klmnopqrstuvwxyz"[a]]="0123456789abcdef"[a];for(var g={},f=1,m,k=g,c=[],q,C="",F="",H,n=b.length-1,a=1;a!=n;)q=b[a],a+=1,"'"==q?m?(H=m.join(""),m=void 0):m=[]:m?m.push(q):"{"==q?(c.push([k,H]),k={},H=void 0):"}"==q?(q=c.pop(),q[0][q[1]]=k,H=void 0,k=q[0]):"-"==q?f=-1:void 0===H?d.hasOwnProperty(q)?(C+=d[q],H=parseInt(C,16)*f,f=1,C=""):C+=q:d.hasOwnProperty(q)?(F+=d[q],k[H]=parseInt(F,16)*f,f=1,H=void 0,F=""):F+=q;return g},k={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:k,"Courier-Bold":k,"Courier-BoldOblique":k,"Courier-Oblique":k,Helvetica:k,"Helvetica-Bold":k,"Helvetica-BoldOblique":k,"Helvetica-Oblique":k,"Times-Roman":k,"Times-Bold":k,"Times-BoldItalic":k,"Times-Italic":k}},d={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};f.events.push(["addFonts",function(b){var h,a,f,j;for(a in b.fonts)if(b.fonts.hasOwnProperty(a)){h=b.fonts[a];if(f=d.Unicode[h.PostScriptName])j=h.metadata.Unicode?h.metadata.Unicode:h.metadata.Unicode={},j.widths=f.widths,j.kerning=f.kerning;if(f=g.Unicode[h.PostScriptName])j=h.metadata.Unicode?h.metadata.Unicode:h.metadata.Unicode={},j.encoding=f,f.codePages&&f.codePages.length&&(h.encoding=f.codePages[0])}}])})(jsPDF.API);var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder||function(f){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},k=function(){this.data=[]},g=function(a,b,c){this.data=a;this.size=a.length;this.type=b;this.encoding=c},d=k.prototype,e=g.prototype,h=f.FileReaderSync,a=function(a){this.code=this[this.name=a]},p="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=p.length,m=f.URL||f.webkitURL||f,u=m.createObjectURL,c=m.revokeObjectURL,q=m,C=f.btoa,F=f.atob,H=!1,n=function(a){H=!a},x=f.ArrayBuffer,z=f.Uint8Array;for(k.fake=e.fake=!0;j--;)a.prototype[p[j]]=j+1;try{z&&n.apply(0,new z(1))}catch(A){}m.createObjectURL||(q=f.URL={});q.createObjectURL=function(a){var b=a.type;null===b&&(b="application/octet-stream");if(a instanceof g)return b="data:"+b,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):C?b+";base64,"+C(a.data):b+","+encodeURIComponent(a.data);if(u)return u.call(m,a)};q.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&c&&c.call(m,a)};d.append=function(c){var d=this.data;if(z&&c instanceof x)if(H)d.push(String.fromCharCode.apply(String,new z(c)));else{d="";c=new z(c);for(var e=0,f=c.length;e<f;e++)d+=String.fromCharCode(c[e])}else if("Blob"===b(c)||"File"===b(c))if(h)e=new h,d.push(e.readAsBinaryString(c));else throw new a("NOT_READABLE_ERR");else c instanceof g?"base64"===c.encoding&&F?d.push(F(c.data)):"URI"===c.encoding?d.push(decodeURIComponent(c.data)):"raw"===c.encoding&&d.push(c.data):("string"!==typeof c&&(c+=""),d.push(unescape(encodeURIComponent(c))))};d.getBlob=function(a){arguments.length||(a=null);return new g(this.data.join(""),a,"raw")};d.toString=function(){return"[object BlobBuilder]"};e.slice=function(a,c,b){var d=arguments.length;3>d&&(b=null);return new g(this.data.slice(a,1<d?c:this.data.length),b,this.encoding)};e.toString=function(){return"[object Blob]"};return k}(self),saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(f){var b=f.document,k=f.URL||f.webkitURL||f,g=b.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in g,e=f.webkitRequestFileSystem,h=f.requestFileSystem||e||f.mozRequestFileSystem,a=function(a){(f.setImmediate||f.setTimeout)(function(){throw a;},0)},p=0,j=[],m=function(c,b,d){b=[].concat(b);for(var e=b.length;e--;){var f=c["on"+b[e]];if("function"===typeof f)try{f.call(c,d||c)}catch(h){a(h)}}},u=function(a,c){var k=this,u=a.type,n=!1,x,z,A=function(){var c=(f.URL||f.webkitURL||f).createObjectURL(a);j.push(c);return c},y=function(){m(k,["writestart","progress","write","writeend"])},s=function(){if(n||!x)x=A(a);z&&(z.location.href=x);k.readyState=k.DONE;y()},r=function(a){return function(){if(k.readyState!==k.DONE)return a.apply(this,arguments)}},I={create:!0,exclusive:!1},w;k.readyState=k.INIT;c||(c="download");if(d&&(x=A(a),g.href=x,g.download=c,w=b.createEvent("MouseEvents"),w.initMouseEvent("click",!0,!1,f,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(w))){k.readyState=k.DONE;y();return}f.chrome&&(u&&"application/octet-stream"!==u)&&(w=a.slice||a.webkitSlice,a=w.call(a,0,a.size,"application/octet-stream"),n=!0);e&&"download"!==c&&(c+=".download");z="application/octet-stream"===u||e?f:f.open();h?(p+=a.size,h(f.TEMPORARY,p,r(function(b){b.root.getDirectory("saved",I,r(function(b){var d=function(){b.getFile(c,I,r(function(c){c.createWriter(r(function(b){b.onwriteend=function(a){z.location.href=c.toURL();j.push(c);k.readyState=k.DONE;m(k,"writeend",a)};b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&s()};["writestart","progress","write","abort"].forEach(function(a){b["on"+a]=k["on"+a]});b.write(a);k.abort=function(){b.abort();k.readyState=k.DONE};k.readyState=k.WRITING}),s)}),s)};b.getFile(c,{create:!1},r(function(a){a.remove();d()}),r(function(a){a.code===a.NOT_FOUND_ERR?d():s()}))}),s)}),s)):s()},c=u.prototype;c.abort=function(){this.readyState=this.DONE;m(this,"abort")};c.readyState=c.INIT=0;c.WRITING=1;c.DONE=2;c.error=c.onwritestart=c.onprogress=c.onwrite=c.onabort=c.onerror=c.onwriteend=null;f.addEventListener("unload",function(){for(var a=j.length;a--;){var c=j[a];"string"===typeof c?k.revokeObjectURL(c):c.remove()}j.length=0},!1);return function(a,c){return new u(a,c)}}(self),MAX_BITS=15,D_CODES=30,BL_CODES=19,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,HEAP_SIZE=2*L_CODES+1,END_BLOCK=256,MAX_BL_BITS=7,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,Buf_size=16,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_DEFAULT_STRATEGY=0,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,_dist_code=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function Tree(){var f=this;f.build_tree=function(b){var k=f.dyn_tree,g=f.stat_desc.static_tree,d=f.stat_desc.elems,e,h=-1,a;b.heap_len=0;b.heap_max=HEAP_SIZE;for(e=0;e<d;e++)0!==k[2*e]?(b.heap[++b.heap_len]=h=e,b.depth[e]=0):k[2*e+1]=0;for(;2>b.heap_len;)a=b.heap[++b.heap_len]=2>h?++h:0,k[2*a]=1,b.depth[a]=0,b.opt_len--,g&&(b.static_len-=g[2*a+1]);f.max_code=h;for(e=Math.floor(b.heap_len/2);1<=e;e--)b.pqdownheap(k,e);a=d;do e=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(k,1),g=b.heap[1],b.heap[--b.heap_max]=e,b.heap[--b.heap_max]=g,k[2*a]=k[2*e]+k[2*g],b.depth[a]=Math.max(b.depth[e],b.depth[g])+1,k[2*e+1]=k[2*g+1]=a,b.heap[1]=a++,b.pqdownheap(k,1);while(2<=b.heap_len);b.heap[--b.heap_max]=b.heap[1];e=f.dyn_tree;for(var h=f.stat_desc.static_tree,p=f.stat_desc.extra_bits,j=f.stat_desc.extra_base,m=f.stat_desc.max_length,u,c,q=0,d=0;d<=MAX_BITS;d++)b.bl_count[d]=0;e[2*b.heap[b.heap_max]+1]=0;for(a=b.heap_max+1;a<HEAP_SIZE;a++)g=b.heap[a],d=e[2*e[2*g+1]+1]+1,d>m&&(d=m,q++),e[2*g+1]=d,g>f.max_code||(b.bl_count[d]++,u=0,g>=j&&(u=p[g-j]),c=e[2*g],b.opt_len+=c*(d+u),h&&(b.static_len+=c*(h[2*g+1]+u)));if(0!==q){do{for(d=m-1;0===b.bl_count[d];)d--;b.bl_count[d]--;b.bl_count[d+1]+=2;b.bl_count[m]--;q-=2}while(0<q);for(d=m;0!==d;d--)for(g=b.bl_count[d];0!==g;)h=b.heap[--a],h>f.max_code||(e[2*h+1]!=d&&(b.opt_len+=(d-e[2*h+1])*e[2*h],e[2*h+1]=d),g--)}e=f.max_code;a=b.bl_count;b=[];g=0;for(d=1;d<=MAX_BITS;d++)b[d]=g=g+a[d-1]<<1;for(a=0;a<=e;a++)if(p=k[2*a+1],0!==p){g=k;d=2*a;h=b[p]++;j=0;do j|=h&1,h>>>=1,j<<=1;while(0<--p);g[d]=j>>>1}}}
Tree._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28];Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];Tree.d_code=function(f){return 256>f?_dist_code[f]:_dist_code[256+(f>>>7)]};Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function StaticTree(f,b,k,g,d){this.static_tree=f;this.extra_bits=b;this.extra_base=k;this.elems=g;this.max_length=d}
StaticTree.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8];StaticTree.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5];StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,MAX_BITS);StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,MAX_BITS);StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,MAX_BL_BITS);var MAX_MEM_LEVEL=9,DEF_MEM_LEVEL=8;function Config(f,b,k,g,d){this.good_length=f;this.max_lazy=b;this.nice_length=k;this.max_chain=g;this.func=d}
var STORED=0,FAST=1,SLOW=2,config_table=[new Config(0,0,0,0,STORED),new Config(4,4,8,4,FAST),new Config(4,5,16,8,FAST),new Config(4,6,32,32,FAST),new Config(4,4,16,16,SLOW),new Config(8,16,32,32,SLOW),new Config(8,16,128,128,SLOW),new Config(8,32,128,256,SLOW),new Config(32,128,258,1024,SLOW),new Config(32,258,258,4096,SLOW)],z_errmsg="need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),NeedMore=0,BlockDone=1,FinishStarted=2,FinishDone=3,PRESET_DICT=32,INIT_STATE=42,BUSY_STATE=113,FINISH_STATE=666,Z_DEFLATED=8,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;function smaller(f,b,k,g){var d=f[2*b];f=f[2*k];return d<f||d==f&&g[b]<=g[k]}
function Deflate(){function f(){var a;for(a=0;a<L_CODES;a++)U[2*a]=0;for(a=0;a<D_CODES;a++)X[2*a]=0;for(a=0;a<BL_CODES;a++)O[2*a]=0;U[2*END_BLOCK]=1;S=la=n.opt_len=n.static_len=0}function b(a,c){var b,d=-1,e,f=a[1],h=0,g=7,j=4;0===f&&(g=138,j=3);a[2*(c+1)+1]=65535;for(b=0;b<=c;b++)e=f,f=a[2*(b+1)+1],++h<g&&e==f||(h<j?O[2*e]+=h:0!==e?(e!=d&&O[2*e]++,O[2*REP_3_6]++):10>=h?O[2*REPZ_3_10]++:O[2*REPZ_11_138]++,h=0,d=e,0===f?(g=138,j=3):e==f?(g=6,j=3):(g=7,j=4))}function k(a){n.pending_buf[n.pending++]=a}function g(a){k(a&255);k(a>>>8&255)}function d(a,c){L>Buf_size-c?(P|=a<<L&65535,g(P),P=a>>>Buf_size-L,L+=c-Buf_size):(P|=a<<L&65535,L+=c)}function e(a,c){var b=2*a;d(c[b]&65535,c[b+1]&65535)}function h(a,c){var b,f=-1,h,g=a[1],j=0,k=7,l=4;0===g&&(k=138,l=3);for(b=0;b<=c;b++)if(h=g,g=a[2*(b+1)+1],!(++j<k&&h==g)){if(j<l){do e(h,O);while(0!==--j)}else 0!==h?(h!=f&&(e(h,O),j--),e(REP_3_6,O),d(j-3,2)):10>=j?(e(REPZ_3_10,O),d(j-3,3)):(e(REPZ_11_138,O),d(j-11,7));j=0;f=h;0===g?(k=138,l=3):h==g?(k=6,l=3):(k=7,l=4)}}function a(){16==L?(g(P),L=P=0):8<=L&&(k(P&255),P>>>=8,L-=8)}function p(a,c){var b,d,e;n.pending_buf[fa+2*S]=a>>>8&255;n.pending_buf[fa+2*S+1]=a&255;n.pending_buf[ka+S]=c&255;S++;0===a?U[2*c]++:(la++,a--,U[2*(Tree._length_code[c]+LITERALS+1)]++,X[2*Tree.d_code(a)]++);if(0===(S&8191)&&2<M){b=8*S;d=t-Q;for(e=0;e<D_CODES;e++)b+=X[2*e]*(5+Tree.extra_dbits[e]);if(la<Math.floor(S/2)&&b>>>3<Math.floor(d/2))return!0}return S==ba-1}function j(a,c){var b,f,h=0,g,j;if(0!==S){do b=n.pending_buf[fa+
2*h]<<8&65280|n.pending_buf[fa+2*h+1]&255,f=n.pending_buf[ka+h]&255,h++,0===b?e(f,a):(g=Tree._length_code[f],e(g+LITERALS+1,a),j=Tree.extra_lbits[g],0!==j&&(f-=Tree.base_length[g],d(f,j)),b--,g=Tree.d_code(b),e(g,c),j=Tree.extra_dbits[g],0!==j&&(b-=Tree.base_dist[g],d(b,j)));while(h<S)}e(END_BLOCK,a);ga=a[2*END_BLOCK+1]}function m(){8<L?g(P):0<L&&k(P&255);L=P=0}function u(a,c,b){d((STORED_BLOCK<<1)+(b?1:0),3);m();ga=8;g(c);g(~c);n.pending_buf.set(w.subarray(a,a+c),n.pending);n.pending+=c}function c(a){var c=0<=Q?Q:-1,e=t-Q,g,k,l=0;if(0<M){da.build_tree(n);ea.build_tree(n);b(U,da.max_code);b(X,ea.max_code);ja.build_tree(n);for(l=BL_CODES-1;3<=l&&0===O[2*Tree.bl_order[l]+1];l--);n.opt_len+=3*(l+1)+14;g=n.opt_len+3+7>>>3;k=n.static_len+3+7>>>3;k<=g&&(g=k)}else g=k=e+5;if(e+4<=g&&-1!=c)u(c,e,a);else if(k==g)d((STATIC_TREES<<1)+(a?1:0),3),j(StaticTree.static_ltree,StaticTree.static_dtree);else{d((DYN_TREES<<1)+(a?1:0),3);c=da.max_code+1;e=ea.max_code+1;l+=1;d(c-257,5);d(e-1,5);d(l-4,4);for(g=0;g<l;g++)d(O[2*Tree.bl_order[g]+1],3);h(U,c-1);h(X,e-1);j(U,X)}f();a&&m();Q=t;x.flush_pending()}function q(){var a,c,b,d;do{d=aa-E-t;if(0===d&&0===t&&0===E)d=s;else if(-1==d)d--;else if(t>=s+s-MIN_LOOKAHEAD){w.set(w.subarray(s,s+s),0);W-=s;t-=s;Q-=s;b=a=v;do c=G[--b]&65535,G[b]=c>=s?c-s:0;while(0!==--a);b=a=s;do c=D[--b]&65535,D[b]=c>=s?c-s:0;while(0!==--a);d+=s}if(0===x.avail_in)break;a=x.read_buf(w,t+E,d);E+=a;E>=MIN_MATCH&&(B=w[t]&255,B=(B<<N^w[t+1]&255)&l)}while(E<MIN_LOOKAHEAD&&0!==x.avail_in)}function C(a){var b=65535,d;for(b>A-5&&(b=A-5);;){if(1>=E){q();if(0===E&&a==Z_NO_FLUSH)return NeedMore;if(0===E)break}t+=E;E=0;d=Q+b;if(0===t||t>=d)if(E=t-d,t=d,c(!1),0===x.avail_out)return NeedMore;if(t-Q>=s-MIN_LOOKAHEAD&&(c(!1),0===x.avail_out))return NeedMore}c(a==Z_FINISH);return 0===x.avail_out?a==Z_FINISH?FinishStarted:NeedMore:a==Z_FINISH?FinishDone:BlockDone}function F(a){var c=Y,b=t,d,e=K,g=t>s-MIN_LOOKAHEAD?t-(s-MIN_LOOKAHEAD):0,f=ia,h=I,j=t+MAX_MATCH,k=w[b+e-1],l=w[b+e];K>=ha&&(c>>=2);f>E&&(f=E);do if(d=a,!(w[d+e]!=l||w[d+e-1]!=k||w[d]!=w[b]||w[++d]!=w[b+1])){b+=2;d++;do;while(w[++b]==w[++d]&&w[++b]==w[++d]&&w[++b]==w[++d]&&w[++b]==w[++d]&&w[++b]==w[++d]&&w[++b]==w[++d]&&w[++b]==w[++d]&&w[++b]==w[++d]&&b<j);d=MAX_MATCH-(j-b);b=j-MAX_MATCH;if(d>e){W=a;e=d;if(d>=f)break;k=w[b+e-1];l=w[b+e]}}while((a=D[a&h]&65535)>g&&0!==--c);return e<=E?e:E}function H(a){for(var b=0,d,e;;){if(E<MIN_LOOKAHEAD){q();if(E<MIN_LOOKAHEAD&&a==Z_NO_FLUSH)return NeedMore;if(0===E)break}E>=MIN_MATCH&&(B=(B<<N^w[t+(MIN_MATCH-
1)]&255)&l,b=G[B]&65535,D[t&I]=G[B],G[B]=t);K=J;ca=W;J=MIN_MATCH-1;if(0!==b&&(K<Z&&(t-b&65535)<=s-MIN_LOOKAHEAD)&&(T!=Z_HUFFMAN_ONLY&&(J=F(b)),5>=J&&(T==Z_FILTERED||J==MIN_MATCH&&4096<t-W)))J=MIN_MATCH-1;if(K>=MIN_MATCH&&J<=K){e=t+E-MIN_MATCH;d=p(t-1-ca,K-MIN_MATCH);E-=K-1;K-=2;do++t<=e&&(B=(B<<N^w[t+(MIN_MATCH-1)]&255)&l,b=G[B]&65535,D[t&I]=G[B],G[B]=t);while(0!==--K);R=0;J=MIN_MATCH-1;t++;if(d&&(c(!1),0===x.avail_out))return NeedMore}else if(0!==R){if((d=p(0,w[t-1]&255))&&c(!1),t++,E--,0===x.avail_out)return NeedMore}else R=1,t++,E--}0!==R&&(p(0,w[t-1]&255),R=0);c(a==Z_FINISH);return 0===x.avail_out?a==Z_FINISH?FinishStarted:NeedMore:a==Z_FINISH?FinishDone:BlockDone}var n=this,x,z,A,y,s,r,I,w,aa,D,G,B,v,V,l,N,Q,J,ca,R,t,W,E,K,Y,Z,M,T,ha,ia,U,X,O,da=new Tree,ea=new Tree,ja=new Tree;n.depth=[];var ka,ba,S,fa,la,ga,P,L;n.bl_count=[];n.heap=[];U=[];X=[];O=[];n.pqdownheap=function(a,b){for(var c=n.heap,d=c[b],e=b<<1;e<=n.heap_len;){e<n.heap_len&&smaller(a,c[e+1],c[e],n.depth)&&e++;if(smaller(a,d,c[e],n.depth))break;c[b]=c[e];b=e;e<<=1}c[b]=d};n.deflateInit=function(a,b,c,d,e,g){d||(d=Z_DEFLATED);e||(e=DEF_MEM_LEVEL);g||(g=Z_DEFAULT_STRATEGY);a.msg=null;b==Z_DEFAULT_COMPRESSION&&(b=6);if(1>e||e>MAX_MEM_LEVEL||d!=Z_DEFLATED||9>c||15<c||0>b||9<b||0>g||g>Z_HUFFMAN_ONLY)return Z_STREAM_ERROR;a.dstate=n;r=c;s=1<<r;I=s-1;V=e+7;v=1<<V;l=v-1;N=Math.floor((V+MIN_MATCH-1)/MIN_MATCH);w=new Uint8Array(2*s);D=[];G=[];ba=1<<e+6;n.pending_buf=new Uint8Array(4*ba);A=4*ba;fa=Math.floor(ba/2);ka=3*ba;M=b;T=g;a.total_in=a.total_out=0;a.msg=null;n.pending=0;n.pending_out=0;z=BUSY_STATE;y=Z_NO_FLUSH;da.dyn_tree=U;da.stat_desc=StaticTree.static_l_desc;ea.dyn_tree=X;ea.stat_desc=StaticTree.static_d_desc;ja.dyn_tree=O;ja.stat_desc=StaticTree.static_bl_desc;L=P=0;ga=8;f();aa=2*s;for(a=G[v-1]=0;a<v-1;a++)G[a]=0;Z=config_table[M].max_lazy;ha=config_table[M].good_length;ia=config_table[M].nice_length;Y=config_table[M].max_chain;E=Q=t=0;J=K=MIN_MATCH-1;B=R=0;return Z_OK};n.deflateEnd=function(){if(z!=INIT_STATE&&z!=BUSY_STATE&&z!=FINISH_STATE)return Z_STREAM_ERROR;w=D=G=n.pending_buf=null;n.dstate=null;return z==BUSY_STATE?Z_DATA_ERROR:Z_OK};n.deflateParams=function(a,b,c){var d=Z_OK;b==Z_DEFAULT_COMPRESSION&&(b=6);if(0>b||9<b||0>c||c>Z_HUFFMAN_ONLY)return Z_STREAM_ERROR;config_table[M].func!=config_table[b].func&&0!==a.total_in&&(d=a.deflate(Z_PARTIAL_FLUSH));M!=b&&(M=b,Z=config_table[M].max_lazy,ha=config_table[M].good_length,ia=config_table[M].nice_length,Y=config_table[M].max_chain);T=c;return d};n.deflateSetDictionary=function(a,b,c){a=c;var d=0;if(!b||z!=INIT_STATE)return Z_STREAM_ERROR;if(a<MIN_MATCH)return Z_OK;a>s-MIN_LOOKAHEAD&&(a=s-MIN_LOOKAHEAD,d=c-a);w.set(b.subarray(d,d+a),0);Q=t=a;B=w[0]&255;B=(B<<N^w[1]&255)&l;for(b=0;b<=a-MIN_MATCH;b++)B=(B<<N^w[b+(MIN_MATCH-1)]&255)&l,D[b&I]=G[B],G[B]=b;return Z_OK};n.deflate=function(b,g){var f,h,j;if(g>Z_FINISH||0>g)return Z_STREAM_ERROR;if(!b.next_out||!b.next_in&&0!==b.avail_in||z==FINISH_STATE&&g!=Z_FINISH)return b.msg=z_errmsg[Z_NEED_DICT-Z_STREAM_ERROR],Z_STREAM_ERROR;if(0===b.avail_out)return b.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;x=b;f=y;y=g;z==INIT_STATE&&(h=Z_DEFLATED+(r-8<<4)<<8,j=(M-1&255)>>1,3<j&&(j=3),h|=j<<6,0!==t&&(h|=PRESET_DICT),z=BUSY_STATE,h+=31-h%31,k(h>>8&255),k(h&255));if(0!==n.pending){if(x.flush_pending(),0===x.avail_out)return y=-1,Z_OK}else if(0===x.avail_in&&g<=f&&g!=Z_FINISH)return x.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;if(z==FINISH_STATE&&0!==x.avail_in)return b.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;if(0!==x.avail_in||0!==E||g!=Z_NO_FLUSH&&z!=FINISH_STATE){f=-1;switch(config_table[M].func){case STORED:f=C(g);break;case FAST:a:{for(f=0;;){if(E<MIN_LOOKAHEAD){q();if(E<MIN_LOOKAHEAD&&g==Z_NO_FLUSH){f=NeedMore;break a}if(0===E)break}E>=MIN_MATCH&&(B=(B<<N^w[t+(MIN_MATCH-1)]&255)&l,f=G[B]&65535,D[t&I]=G[B],G[B]=t);0!==f&&(t-f&65535)<=s-MIN_LOOKAHEAD&&T!=Z_HUFFMAN_ONLY&&(J=F(f));if(J>=MIN_MATCH)if(h=p(t-W,J-MIN_MATCH),E-=J,J<=Z&&E>=MIN_MATCH){J--;do t++,B=(B<<N^w[t+(MIN_MATCH-1)]&255)&l,f=G[B]&65535,D[t&I]=G[B],G[B]=t;while(0!==--J);t++}else t+=J,J=0,B=w[t]&255,B=(B<<N^w[t+1]&255)&l;else h=p(0,w[t]&255),E--,t++;if(h&&(c(!1),0===x.avail_out)){f=NeedMore;break a}}c(g==Z_FINISH);f=0===x.avail_out?g==Z_FINISH?FinishStarted:NeedMore:g==Z_FINISH?FinishDone:BlockDone}break;case SLOW:f=H(g)}if(f==FinishStarted||f==FinishDone)z=FINISH_STATE;if(f==NeedMore||f==FinishStarted)return 0===x.avail_out&&(y=-1),Z_OK;if(f==BlockDone){if(g==Z_PARTIAL_FLUSH)d(STATIC_TREES<<1,3),e(END_BLOCK,StaticTree.static_ltree),a(),9>1+ga+10-L&&(d(STATIC_TREES<<1,3),e(END_BLOCK,StaticTree.static_ltree),a()),ga=7;else if(u(0,0,!1),g==Z_FULL_FLUSH)for(f=0;f<v;f++)G[f]=0;x.flush_pending();if(0===x.avail_out)return y=-1,Z_OK}}return g!=Z_FINISH?Z_OK:Z_STREAM_END}}function ZStream(){this.total_out=this.avail_out=this.total_in=this.avail_in=this.next_out_index=this.next_in_index=0}
ZStream.prototype={deflateInit:function(f,b){this.dstate=new Deflate;b||(b=MAX_BITS);return this.dstate.deflateInit(this,f,b)},deflate:function(f){return!this.dstate?Z_STREAM_ERROR:this.dstate.deflate(this,f)},deflateEnd:function(){if(!this.dstate)return Z_STREAM_ERROR;var f=this.dstate.deflateEnd();this.dstate=null;return f},deflateParams:function(f,b){return!this.dstate?Z_STREAM_ERROR:this.dstate.deflateParams(this,f,b)},deflateSetDictionary:function(f,b){return!this.dstate?Z_STREAM_ERROR:this.dstate.deflateSetDictionary(this,f,b)},read_buf:function(f,b,k){var g=this.avail_in;g>k&&(g=k);if(0===g)return 0;this.avail_in-=g;f.set(this.next_in.subarray(this.next_in_index,this.next_in_index+g),b);this.next_in_index+=g;this.total_in+=g;return g},flush_pending:function(){var f=this.dstate.pending;f>this.avail_out&&(f=this.avail_out);0!==f&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+f),this.next_out_index),this.next_out_index+=f,this.dstate.pending_out+=f,this.total_out+=f,this.avail_out-=f,this.dstate.pending-=f,0===this.dstate.pending&&(this.dstate.pending_out=0))}};function Deflater(f){var b=new ZStream,k=Z_NO_FLUSH,g=new Uint8Array(512);"undefined"==typeof f&&(f=Z_DEFAULT_COMPRESSION);b.deflateInit(f);b.next_out=g;this.append=function(d,e){var f,a=[],p=0,j=0,m=0,u;if(d.length){b.next_in_index=0;b.next_in=d;b.avail_in=d.length;do{b.next_out_index=0;b.avail_out=512;f=b.deflate(k);if(f!=Z_OK)throw"deflating: "+b.msg;b.next_out_index&&(512==b.next_out_index?a.push(new Uint8Array(g)):a.push(new Uint8Array(g.subarray(0,b.next_out_index))));m+=b.next_out_index;e&&(0<b.next_in_index&&b.next_in_index!=p)&&(e(b.next_in_index),p=b.next_in_index)}while(0<b.avail_in||0===b.avail_out);u=new Uint8Array(m);a.forEach(function(a){u.set(a,j);j+=a.length});return u}};this.flush=function(){var d,e=[],f=0,a=0,k;do{b.next_out_index=0;b.avail_out=512;d=b.deflate(Z_FINISH);if(d!=Z_STREAM_END&&d!=Z_OK)throw"deflating: "+b.msg;0<512-b.avail_out&&e.push(new Uint8Array(g.subarray(0,b.next_out_index)));a+=b.next_out_index}while(0<b.avail_in||0===b.avail_out);b.deflateEnd();k=new Uint8Array(a);e.forEach(function(a){k.set(a,f);f+=a.length});return k}}
void function(f,b){"object"===typeof module?module.exports=b():"function"===typeof define?define(b):f.adler32cs=b()}(this,function(){var f="function"===typeof ArrayBuffer&&"function"===typeof Uint8Array,b=null,k;if(f){try{var g=require("buffer");"function"===typeof g.Buffer&&(b=g.Buffer)}catch(d){}k=function(a){return a instanceof ArrayBuffer||null!==b&&a instanceof b}}else k=function(){return!1};var e;e=null!==b?function(a){return(new b(a,"utf8")).toString("binary")}:function(a){return unescape(encodeURIComponent(a))};var h=function(a,b){for(var d=a&65535,e=a>>>16,f=0,g=b.length;f<g;f++)d=(d+(b.charCodeAt(f)&255))%65521,e=(e+d)%65521;return(e<<16|d)>>>0},a=function(a,b){for(var d=a&65535,e=a>>>16,f=0,g=b.length;f<g;f++)d=(d+b[f])%65521,e=(e+d)%65521;return(e<<16|d)>>>0},g={},p=function(a){if(!(this instanceof p))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(a=null==a?1:+a))throw Error("First arguments needs to be a finite number.");this.checksum=a>>>0},j=p.prototype={};j.constructor=p;var m=function(a){if(!(this instanceof p))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");this.checksum=h(1,a.toString())};m.prototype=j;p.from=m;m=function(a){if(!(this instanceof p))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());this.checksum=h(1,a)};m.prototype=j;p.fromUtf8=m;f&&(m=function(b){if(!(this instanceof
p))throw new TypeError("Constructor cannot called be as a function.");if(!k(b))throw Error("First argument needs to be ArrayBuffer.");b=new Uint8Array(b);return this.checksum=a(1,b)},m.prototype=j,p.fromBuffer=m);j.update=function(a){if(null==a)throw Error("First argument needs to be a string.");a=a.toString();return this.checksum=h(this.checksum,a)};j.updateUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());return this.checksum=h(this.checksum,a)};f&&(j.updateBuffer=function(b){if(!k(b))throw Error("First argument needs to be ArrayBuffer.");b=new Uint8Array(b);return this.checksum=a(this.checksum,b)});j.clone=function(){return new u(this.checksum)};var u=g.Adler32=p;g.from=function(a){if(null==a)throw Error("First argument needs to be a string.");return h(1,a.toString())};g.fromUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());return h(1,a)};f&&(g.fromBuffer=function(b){if(!k(b))throw Error("First argument need to be ArrayBuffer.");b=new Uint8Array(b);return a(1,b)});return g});!function(t){t.fn.liveEdit=function(e){var n,o,i,a,s,l,u=t.extend({afterSaveAll:function(){},doubleClick:function(){}},t.fn.liveEdit.defaults,e),c=[],d=function(e){t(e).attr("contenteditable","true")},r=function(e){t(e).find("a").click(function(t){t.preventDefault()})},f=function(){var t=window.getSelection(),e=t.getRangeAt(0),n=e.getBoundingClientRect();i.addClass("appear"),i.css("top",n.top-(i.height()+8)+window.pageYOffset+"px"),i.css("left",(n.left+n.right)/2-i.width()/2+"px")},h=function(){i.removeClass("appear"),i.css("top","-999px"),i.css("left","-999px")},g=function(e){t(e.focusNode).closest("b").length>0?i.addClass("bold"):i.removeClass("bold"),t(e.focusNode).closest("i").length>0?i.addClass("italic"):i.removeClass("italic"),t(e.focusNode).closest("li").length>0?i.addClass("unorderedlist"):i.removeClass("unorderedlist"),t(e.focusNode).closest("strike").length>0?i.addClass("strikethrough"):i.removeClass("strikethrough"),t(e.focusNode).closest("a").length>0?i.addClass("url"):i.removeClass("url")},b=function(){var t=document.getSelection().anchorNode,e=t&&3===t.nodeType?t.parentNode:t;return e},m=function(e){var n=window.getSelection();return y(),D(t(n.focusNode).closest("[data-editable=true]")),t(e.target).closest(".text-options").length>0?void g(n):(t(n.focusNode).closest("[data-editable=true]").length>0&&0==t(n.focusNode).closest("figure").length?(0===b().children.length&&t(n.focusNode).closest("[data-text-options=true]").length>0&&0==t(n.focusNode).closest("li").length&&0==t(n.focusNode).closest(".caption").length&&document.execCommand("formatBlock",!1,"p"),n.isCollapsed===!0&&l===!1&&h(),n.isCollapsed===!1?t(n.focusNode).closest("[data-text-options=true]").length>0&&(f(),g(n)):h()):h(),void(l=n.isCollapsed))},v=function(){document.execCommand("strong",!1,null)},C=function(){document.execCommand("italic",!1)},x=function(){document.execCommand("strikethrough",!1)},k=function(){document.execCommand("insertunorderedlist",!1),h(),E()},B=function(){i.hasClass("edit-url")?i.removeClass("edit-url"):(i.addClass("edit-url"),setTimeout(function(){var e=window.getSelection();t(e.focusNode).closest("a").length>0?t(urlField).find("input").val(t(e.focusNode).closest("a").attr("href")):document.execCommand("createLink",!1,"/"),lastSelection=window.getSelection().getRangeAt(0),l=!1,t(urlField).find("input").focus()},100))},w=function(){window.getSelection().addRange(lastSelection)},L=function(t){w(),document.execCommand("unlink",!1),""!==t&&(t.match("^(http|https)://")||(t="http://"+t),document.execCommand("createLink",!1,t))},N=function(e){t(e).on("paste",function(t){if(t.preventDefault(),t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData){var n="",o=t.originalEvent.clipboardData.getData("text/plain").split(/[\r\n]/g);for(p=0;p<o.length;p+=1)""!==o[p]&&(n+="<p>"+o[p]+"</p>");document.execCommand("insertHTML",!1,n),setTimeout(function(){D(e)},10)}})},S=function(e){t(e).on("dblclick",function(){setTimeout(function(){var t=window.getSelection();return t.isCollapsed===!0?u.doubleClick.call(this,e,t):void 0},10)})},y=function(){t.each(c,function(e,n){t(n).find("[data-editable=true]").each(function(){1==t(this).data("text-options")&&t(this).find("figure").each(function(){0===t(this).next("p").length&&t(this).after("<p><br></p>")})})})},D=function(e){t(e).find("span").each(function(){t(this).hasClass("caption")||t(this).contents().unwrap()})},E=function(){t.each(c,function(e,n){t(n).find("[data-editable=true]").each(function(){t(this).find("ul").each(function(){t(this).parent("p").length&&t(this).parent("p").contents().unwrap()})})})},T=function(){var e=[];return t.each(c,function(n,o){var i={},a=t(o).data("model"),s=t(o).data("id").toString(),l=t(o).data("url");i.model=a,i.id=s,i.url=l,t(o).find("[data-editable=true]").each(function(){var e=t(this).data("name"),n=t(this).html().replace(/\n/g,"").trim();i[e]=n}),e.push(i)}),u.afterSaveAll.call(this,e)},A=function(){sidebarInterface='<div class="live-edit-sidebar" draggable="true"><a href="#" class="save-button">'+u.saveButtonLabel+"</a></div>",textOptionsInterface='<span class="text-options"><button class="url-button">'+u.urlButtonLabel+'</button><span class="input-text"><input type="text" name="liveedit-url" /></span><button class="bold-button">'+u.boldButtonLabel+'</button><button class="italic-button">'+u.italicButtonLabel+'</button><button class="strikethrough-button">'+u.strikethroughButtonLabel+'</button><button class="unorderedlist-button">'+u.unorderedlistButtonLabel+"</button></span>",t("body").append(textOptionsInterface)},F=function(){n=t(".live-edit-sidebar"),o=t(".live-edit-sidebar .save-button"),i=t(".text-options"),urlButton=t(".text-options .url-button"),urlField=t(".text-options span.input-text"),a=t(".text-options .bold-button"),s=t(".text-options .italic-button"),strikethroughButton=t(".text-options .strikethrough-button"),unorderedListButton=t(".text-options .unorderedlist-button")},I=function(){o.on("click",T),urlButton.on("click",B),a.on("click",v),s.on("click",C),strikethroughButton.on("click",x),unorderedListButton.on("click",k),t(urlField).find("input").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),L(t(this).val()),t(this).blur())}),t(urlField).find("input").on("blur",function(){i.removeClass("edit-url"),L(t(this).val()),t(this).val(""),g(window.getSelection().focusNode)}),t(document).on("keyup",m),t(document).on("mousedown",m),t(document).on("mouseup",function(t){setTimeout(function(){m(t)},1)})};A(),F(),I();var R=function(e){var n=t(e).data("max-length");n&&t(e).on("keypress",function(t){(t.target.innerText.length>n||13===t.keyCode)&&t.preventDefault()})};return t.fn.liveEdit.loadingState=function(t){"on"==t?n.addClass("loading-state"):n.removeClass("loading-state")},this.each(function(){c.push(this),t(this).find("[data-editable=true]").each(function(){d(this),r(this),R(this),N(this),S(this)})})},t.fn.liveEdit.defaults={saveButtonLabel:"S",urlButtonLabel:"U",boldButtonLabel:"B",italicButtonLabel:"I",strikethroughButtonLabel:"ABC",unorderedlistButtonLabel:"L"}}(jQuery);(function(e){"use strict";function t(t){var n=e("");try{n=e(t).clone()}catch(r){n=e("<span />").html(t)}return n}function n(e){return!!(typeof Node==="object"?e instanceof Node:e&&typeof e==="object"&&typeof e.nodeType==="number"&&typeof e.nodeName==="string")}e.print=e.fn.print=function(){var r,i,s=this;if(s instanceof e){s=s.get(0)}if(n(s)){i=e(s);if(arguments.length>0){r=arguments[0]}}else{if(arguments.length>0){i=e(arguments[0]);if(n(i[0])){if(arguments.length>1){r=arguments[1]}}else{r=arguments[0];i=e("html")}}else{i=e("html")}}var o={globalStyles:true,mediaPrint:false,stylesheet:null,noPrintSelector:".no-print",iframe:true,append:null,prepend:null};r=e.extend({},o,r||{});var u=e("");if(r.globalStyles){u=e("style, link, meta, title")}else if(r.mediaPrint){u=e("link[media=print]")}if(r.stylesheet){u=e.merge(u,e('<link rel="stylesheet" href="'+r.stylesheet+'">'))}var a=i.clone();a=e("<span/>").append(a);a.find(r.noPrintSelector).remove();a.append(u.clone());a.append(t(r.append));a.prepend(t(r.prepend));var f=a.html();a.remove();var l,c;if(r.iframe){try{var h=e(r.iframe+"");var p=h.length;if(p===0){h=e('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})}l=h.get(0);l=l.contentWindow||l.contentDocument||l;c=l.document||l.contentDocument||l;c.open();c.write(f);c.close();setTimeout(function(){l.focus();l.print();setTimeout(function(){if(p===0){h.remove()}},100)},250)}catch(d){console.error("Failed to print from iframe",d.stack,d.message);l=window.open();l.document.write(f);l.document.close();l.focus();l.print();l.close()}}else{l=window.open();l.document.write(f);l.document.close();l.focus();l.print();l.close()}return this}})(jQuery);;!function(a,b){function c(){function a(){"undefined"!=typeof _wpmejsSettings&&(c=b.extend(!0,{},_wpmejsSettings)),c.classPrefix="mejs-",c.success=c.success||function(a){var b,c;a.rendererName&&-1!==a.rendererName.indexOf("flash")&&(b=a.attributes.autoplay&&"false"!==a.attributes.autoplay,c=a.attributes.loop&&"false"!==a.attributes.loop,b&&a.addEventListener("canplay",function(){a.play()},!1),c&&a.addEventListener("ended",function(){a.play()},!1))},c.customError=function(a,b){if(-1!==a.rendererName.indexOf("flash")||-1!==a.rendererName.indexOf("flv"))return'<a href="'+b.src+'">'+mejsL10n.strings["mejs.download-video"]+"</a>"},b(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").filter(function(){return!b(this).parent().hasClass("mejs-mediaelement")}).mediaelementplayer(c)}var c={};return{initialize:a}}a.wp=a.wp||{},a.wp.mediaelement=new c,b(a.wp.mediaelement.initialize)}(window,jQuery);;var jq=jQuery;var bp_ajax_request=null;jq(document).ready(function(){if('-1'==window.location.search.indexOf('new')&&jq('div.forums').length)
jq('#new-topic-post').hide();else
jq('#new-topic-post').show();bp_init_activity();var objects=['members','groups','blogs','forums','course'];bp_init_objects(objects);var $whats_new=jq('#whats-new');if(jq.query.get('r')&&$whats_new.length){jq('#whats-new-options').animate({height:'50px'});jq("#whats-new-form textarea").animate({height:'50px'});jq.scrollTo($whats_new,500,{offset:-125,easing:'easeOutQuad'});var whats_new_content=$whats_new.val();$whats_new.val('').focus().val(whats_new_content);}
$whats_new.focus(function(){jq("#whats-new-options").animate({height:'40px'});jq("#whats-new-form textarea").animate({height:'50px'});jq("#aw-whats-new-submit").prop("disabled",false);var $whats_new_form=jq("form#whats-new-form");if($whats_new_form.hasClass("submitted")){$whats_new_form.removeClass("submitted");}});$whats_new.blur(function(){if(!this.value.match(/\S+/)){this.value="";jq("#whats-new-options").animate({height:'40px'});jq("form#whats-new-form textarea").animate({height:'30px'});jq("#aw-whats-new-submit").prop("disabled",true);}});jq("#aw-whats-new-submit").on('click',function(){var button=jq(this);var form=button.closest("form#whats-new-form");form.children().each(function(){if(jq.nodeName(this,"textarea")||jq.nodeName(this,"input"))
jq(this).prop('disabled',true);});jq('div.error').remove();button.addClass('loading');button.prop('disabled',true);form.addClass("submitted");var object='';var item_id=jq("#whats-new-post-in").val();var content=jq("#whats-new").val();if(item_id>0){object=jq("#whats-new-post-object").val();}
jq.post(ajaxurl,{action:'post_update','cookie':bp_get_cookies(),'_wpnonce_post_update':jq("#_wpnonce_post_update").val(),'content':content,'object':object,'item_id':item_id,'_bp_as_nonce':jq('#_bp_as_nonce').val()||''},function(response){form.children().each(function(){if(jq.nodeName(this,"textarea")||jq.nodeName(this,"input")){jq(this).prop('disabled',false);}});if(response[0]+response[1]=='-1'){form.prepend(response.substr(2,response.length));jq('#'+form.attr('id')+' div.error').hide().fadeIn(200);}else{if(0==jq("ul.activity-list").length){jq("div.error").slideUp(100).remove();jq("#message").slideUp(100).remove();jq("div.activity").append('<ul id="activity-stream" class="activity-list item-list">');}
jq("#activity-stream").prepend(response);jq("#activity-stream li:first").addClass('new-update just-posted');if(0!=jq("#latest-update").length){var l=jq("#activity-stream li.new-update .activity-content .activity-inner p").html();var v=jq("#activity-stream li.new-update .activity-content .activity-header p a.view").attr('href');var ltext=jq("#activity-stream li.new-update .activity-content .activity-inner p").text();var u='';if(ltext!='')
u=l+' ';u+='<a href="'+v+'" rel="nofollow">'+BP_DTheme.view+'</a>';jq("#latest-update").slideUp(300,function(){jq("#latest-update").html(u);jq("#latest-update").slideDown(300);});}
jq("li.new-update").hide().slideDown(300);jq("li.new-update").removeClass('new-update');jq("#whats-new").val('');}
jq("#whats-new-options").animate({height:'0px'});jq("#whats-new-form textarea").animate({height:'20px'});jq("#aw-whats-new-submit").prop("disabled",true).removeClass('loading');});return false;});jq('div.activity-type-tabs').on('click',function(event){var target=jq(event.target).parent();if(event.target.nodeName=='STRONG'||event.target.nodeName=='SPAN')
target=target.parent();else if(event.target.nodeName!='A')
return false;jq.cookie('bp-activity-oldestpage',1,{path:'/'});var scope=target.attr('id').substr(9,target.attr('id').length);var filter=jq("#activity-filter-select select").val();if(scope=='mentions')
jq('#'+target.attr('id')+' a strong').remove();bp_activity_request(scope,filter);return false;});jq('#activity-filter-select select').change(function(){var selected_tab=jq('div.activity-type-tabs li.selected');if(!selected_tab.length)
var scope=null;else
var scope=selected_tab.attr('id').substr(9,selected_tab.attr('id').length);var filter=jq(this).val();bp_activity_request(scope,filter);return false;});jq('div.activity').on('click',function(event){var target=jq(event.target);if(target.hasClass('fav')||target.hasClass('unfav')){var type=target.hasClass('fav')?'fav':'unfav';var parent=target.closest('.activity-item');var parent_id=parent.attr('id').substr(9,parent.attr('id').length);target.addClass('loading');jq.post(ajaxurl,{action:'activity_mark_'+type,'cookie':bp_get_cookies(),'id':parent_id},function(response){target.removeClass('loading');target.fadeOut(200,function(){jq(this).html(response);jq(this).attr('title','fav'==type?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav);jq(this).fadeIn(200);});if('fav'==type){if(!jq('.item-list-tabs #activity-favs-personal-li').length){if(!jq('.item-list-tabs #activity-favorites').length)
jq('.item-list-tabs ul #activity-mentions').before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+' <span>0</span></a></li>');jq('.item-list-tabs ul #activity-favorites span').html(Number(jq('.item-list-tabs ul #activity-favorites span').html())+1);}
target.removeClass('fav');target.addClass('unfav');}else{target.removeClass('unfav');target.addClass('fav');jq('.item-list-tabs ul #activity-favorites span').html(Number(jq('.item-list-tabs ul #activity-favorites span').html())-1);if(!Number(jq('.item-list-tabs ul #activity-favorites span').html())){if(jq('.item-list-tabs ul #activity-favorites').hasClass('selected'))
bp_activity_request(null,null);jq('.item-list-tabs ul #activity-favorites').remove();}}
if('activity-favorites'==jq('.item-list-tabs li.selected').attr('id'))
target.parent().parent().parent().slideUp(100);});return false;}
if(target.hasClass('delete-activity')){var li=target.parents('div.activity ul li');var id=li.attr('id').substr(9,li.attr('id').length);var link_href=target.attr('href');var nonce=link_href.split('_wpnonce=');nonce=nonce[1];target.addClass('loading');jq.post(ajaxurl,{action:'delete_activity','cookie':bp_get_cookies(),'id':id,'_wpnonce':nonce},function(response){if(response[0]+response[1]=='-1'){li.prepend(response.substr(2,response.length));li.children('#message').hide().fadeIn(300);}else{li.slideUp(300);}});return false;}
if(target.hasClass('spam-activity')){var li=target.parents('div.activity ul li');target.addClass('loading');jq.post(ajaxurl,{action:'bp_spam_activity','cookie':encodeURIComponent(document.cookie),'id':li.attr('id').substr(9,li.attr('id').length),'_wpnonce':target.attr('href').split('_wpnonce=')[1]},function(response){if(response[0]+response[1]==='-1'){li.prepend(response.substr(2,response.length));li.children('#message').hide().fadeIn(300);}else{li.slideUp(300);}});return false;}
if(target.parent().hasClass('load-more')){jq("#buddypress li.load-more").addClass('loading');if(null==jq.cookie('bp-activity-oldestpage'))
jq.cookie('bp-activity-oldestpage',1,{path:'/'});var oldest_page=(jq.cookie('bp-activity-oldestpage')*1)+1;var just_posted=[];jq('.activity-list li.just-posted').each(function(){just_posted.push(jq(this).attr('id').replace('activity-',''));});jq.post(ajaxurl,{action:'activity_get_older_updates','cookie':bp_get_cookies(),'page':oldest_page,'exclude_just_posted':just_posted.join(',')},function(response)
{jq("#buddypress li.load-more").removeClass('loading');jq.cookie('bp-activity-oldestpage',oldest_page,{path:'/'});jq("#buddypress ul.activity-list").append(response.contents);target.parent().hide();},'json');return false;}});jq('div.activity').on('click','.activity-read-more a',function(event){var target=jq(event.target);var link_id=target.parent().attr('id').split('-');var a_id=link_id[3];var type=link_id[0];var inner_class=type=='acomment'?'acomment-content':'activity-inner';var a_inner=jq('#'+type+'-'+a_id+' .'+inner_class+':first');jq(target).addClass('loading');jq.post(ajaxurl,{action:'get_single_activity_content','activity_id':a_id},function(response){jq(a_inner).slideUp(300).html(response).slideDown(300);});return false;});jq('form.ac-form').hide();if(jq('.activity-comments').length)
bp_legacy_theme_hide_comments();jq('div.activity').on('click',function(event){var target=jq(event.target);if(target.hasClass('acomment-reply')||target.parent().hasClass('acomment-reply')){if(target.parent().hasClass('acomment-reply'))
target=target.parent();var id=target.attr('id');ids=id.split('-');var a_id=ids[2]
var c_id=target.attr('href').substr(10,target.attr('href').length);var form=jq('#ac-form-'+a_id);form.css('display','none');form.removeClass('root');jq('.ac-form').hide();form.children('div').each(function(){if(jq(this).hasClass('error'))
jq(this).hide();});if(ids[1]!='comment'){jq('#acomment-'+c_id).append(form);}else{jq('#activity-'+a_id+' .activity-comments').append(form);}
if(form.parent().hasClass('activity-comments'))
form.addClass('root');form.slideDown(200);jq.scrollTo(form,500,{offset:-100,easing:'easeOutQuad'});jq('#ac-form-'+ids[2]+' textarea').focus();return false;}
if(target.attr('name')=='ac_form_submit'){var form=target.parents('form');var form_parent=form.parent();var form_id=form.attr('id').split('-');if(!form_parent.hasClass('activity-comments')){var tmp_id=form_parent.attr('id').split('-');var comment_id=tmp_id[1];}else{var comment_id=form_id[2];}
var content=jq('#'+form.attr('id')+' textarea');jq('#'+form.attr('id')+' div.error').hide();target.addClass('loading').prop('disabled',true);content.addClass('loading').prop('disabled',true);var ajaxdata={action:'new_activity_comment','cookie':bp_get_cookies(),'_wpnonce_new_activity_comment':jq("#_wpnonce_new_activity_comment").val(),'comment_id':comment_id,'form_id':form_id[2],'content':content.val()};var ak_nonce=jq('#_bp_as_nonce_'+comment_id).val();if(ak_nonce){ajaxdata['_bp_as_nonce_'+comment_id]=ak_nonce;}
jq.post(ajaxurl,ajaxdata,function(response){target.removeClass('loading');content.removeClass('loading');if(response[0]+response[1]=='-1'){form.append(jq(response.substr(2,response.length)).hide().fadeIn(200));}else{var activity_comments=form.parent();form.fadeOut(200,function(){if(0==activity_comments.children('ul').length){if(activity_comments.hasClass('activity-comments')){activity_comments.prepend('<ul></ul>');}else{activity_comments.append('<ul></ul>');}}
var the_comment=jq.trim(response);activity_comments.children('ul').append(jq(the_comment).hide().fadeIn(200));form.children('textarea').val('');activity_comments.parent().addClass('has-comments');});jq('#'+form.attr('id')+' textarea').val('');jq('#activity-'+form_id[2]+' a.acomment-reply span').html(Number(jq('#activity-'+form_id[2]+' a.acomment-reply span').html())+1);var show_all_a=activity_comments.find('.show-all').find('a');if(show_all_a){var new_count=jq('li#activity-'+form_id[2]+' a.acomment-reply span').html();show_all_a.html(BP_DTheme.show_x_comments.replace('%d',new_count));}}
jq(target).prop("disabled",false);jq(content).prop("disabled",false);});return false;}
if(target.hasClass('acomment-delete')){var link_href=target.attr('href');var comment_li=target.parent().parent();var form=comment_li.parents('div.activity-comments').children('form');var nonce=link_href.split('_wpnonce=');nonce=nonce[1];var comment_id=link_href.split('cid=');comment_id=comment_id[1].split('&');comment_id=comment_id[0];target.addClass('loading');jq('.activity-comments ul .error').remove();comment_li.parents('.activity-comments').append(form);jq.post(ajaxurl,{action:'delete_activity_comment','cookie':bp_get_cookies(),'_wpnonce':nonce,'id':comment_id},function(response){if(response[0]+response[1]=='-1'){comment_li.prepend(jq(response.substr(2,response.length)).hide().fadeIn(200));}else{var children=jq('#'+comment_li.attr('id')+' ul').children('li');var child_count=0;jq(children).each(function(){if(!jq(this).is(':hidden'))
child_count++;});comment_li.fadeOut(200,function(){comment_li.remove();});var count_span=jq('#'+comment_li.parents('#activity-stream > li').attr('id')+' a.acomment-reply span');var new_count=count_span.html()-(1+child_count);count_span.html(new_count);var show_all_a=comment_li.siblings('.show-all').find('a');if(show_all_a){show_all_a.html(BP_DTheme.show_x_comments.replace('%d',new_count));}
if(0==new_count){jq(comment_li.parents('#activity-stream > li')).removeClass('has-comments');}}});return false;}
if(target.hasClass('spam-activity-comment')){var link_href=target.attr('href');var comment_li=target.parent().parent();target.addClass('loading');jq('.activity-comments ul div.error').remove();comment_li.parents('.activity-comments').append(comment_li.parents('.activity-comments').children('form'));jq.post(ajaxurl,{action:'bp_spam_activity_comment','cookie':encodeURIComponent(document.cookie),'_wpnonce':link_href.split('_wpnonce=')[1],'id':link_href.split('cid=')[1].split('&')[0]},function(response){if(response[0]+response[1]=='-1'){comment_li.prepend(jq(response.substr(2,response.length)).hide().fadeIn(200));}else{var children=jq('#'+comment_li.attr('id')+' ul').children('li');var child_count=0;jq(children).each(function(){if(!jq(this).is(':hidden')){child_count++;}});comment_li.fadeOut(200);var parent_li=comment_li.parents('#activity-stream > li');jq('#'+parent_li.attr('id')+' a.acomment-reply span').html(jq('#'+parent_li.attr('id')+' a.acomment-reply span').html()-(1+child_count));}});return false;}
if(target.parent().hasClass('show-all')){target.parent().addClass('loading');setTimeout(function(){target.parent().parent().children('li').fadeIn(200,function(){target.parent().remove();});},600);return false;}
if(target.hasClass('ac-reply-cancel')){jq(target).closest('.ac-form').slideUp(200);return false;};});jq(document).keydown(function(e){e=e||window.event;if(e.target)
element=e.target;else if(e.srcElement)
element=e.srcElement;if(element.nodeType==3)
element=element.parentNode;if(e.ctrlKey==true||e.altKey==true||e.metaKey==true)
return;var keyCode=(e.keyCode)?e.keyCode:e.which;if(keyCode==27){if(element.tagName=='TEXTAREA'){if(jq(element).hasClass('ac-input'))
jq(element).parent().parent().parent().slideUp(200);}}});jq('.dir-search').on('click',function(event){if(jq(this).hasClass('no-ajax'))
return;var target=jq(event.target);if(target.attr('type')=='submit'){var css_id=jq('.item-list-tabs li.selected').attr('id').split('-');var object=css_id[0];bp_filter_request(object,jq.cookie('bp-'+object+'-filter'),jq.cookie('bp-'+object+'-scope'),'div.'+object,target.parent().children('label').children('input').val(),1,jq.cookie('bp-'+object+'-extras'));return false;}});jq('div.item-list-tabs').on('click',function(event){if(jq(this).hasClass('no-ajax'))
return;var targetElem=(event.target.nodeName=='SPAN')?event.target.parentNode:event.target;var target=jq(targetElem).parent();if('LI'==target[0].nodeName&&!target.hasClass('last')){var css_id=target.attr('id').split('-');var object=css_id[0];if('activity'==object)
return false;var scope=css_id[1];var filter=jq("#"+object+"-order-select select").val();var search_terms=jq("#"+object+"_search").val();bp_filter_request(object,filter,scope,'div.'+object,search_terms,1,jq.cookie('bp-'+object+'-extras'));return false;}});jq('li.filter select').change(function(){if(jq('.item-list-tabs li.selected').length)
var el=jq('.item-list-tabs li.selected');else
var el=jq(this);var css_id=el.attr('id').split('-');var object=css_id[0];var scope=css_id[1];var filter=jq(this).val();var search_terms=false;if(jq('.dir-search input').length)
search_terms=jq('.dir-search input').val();if('friends'==object)
object='members';bp_filter_request(object,filter,scope,'div.'+object,search_terms,1,jq.cookie('bp-'+object+'-extras'));return false;});jq('#buddypress').on('click',function(event){var target=jq(event.target);if(target.hasClass('button'))
return true;if(target.parent().parent().hasClass('pagination')&&!target.parent().parent().hasClass('no-ajax')){if(target.hasClass('dots')||target.hasClass('current'))
return false;if(jq('.item-list-tabs li.selected').length)
var el=jq('.item-list-tabs li.selected');else
var el=jq('li.filter select');var page_number=1;var css_id=el.attr('id').split('-');var object=css_id[0];var search_terms=false;var pagination_id=jq(target).closest('.pagination-links').attr('id');if(jq('div.dir-search input').length)
search_terms=jq('.dir-search input').val();if(jq(target).hasClass('next'))
var page_number=Number(jq('.pagination span.current').html())+1;else if(jq(target).hasClass('prev'))
var page_number=Number(jq('.pagination span.current').html())-1;else
var page_number=Number(jq(target).html());if(pagination_id.indexOf('pag-bottom')!==-1){var caller='pag-bottom';}else{var caller=null;}
bp_filter_request(object,jq.cookie('bp-'+object+'-filter'),jq.cookie('bp-'+object+'-scope'),'div.'+object,search_terms,page_number,jq.cookie('bp-'+object+'-extras'),caller);return false;}});jq('a.show-hide-new').on('click',function(){if(!jq('#new-topic-post').length)
return false;if(jq('#new-topic-post').is(":visible"))
jq('#new-topic-post').slideUp(200);else
jq('#new-topic-post').slideDown(200,function(){jq('#topic_title').focus();});return false;});jq('#submit_topic_cancel').on('click',function(){if(!jq('#new-topic-post').length)
return false;jq('#new-topic-post').slideUp(200);return false;});jq('#forum-directory-tags a').on('click',function(){bp_filter_request('forums','tags',jq.cookie('bp-forums-scope'),'div.forums',jq(this).html().replace(/&nbsp;/g,'-'),1,jq.cookie('bp-forums-extras'));return false;});jq("#invite-list input").on('click',function(){jq('.ajax-loader').toggle();var friend_id=jq(this).val();if(jq(this).prop('checked')==true)
var friend_action='invite';else
var friend_action='uninvite';jq('.item-list-tabs li.selected').addClass('loading');jq.post(ajaxurl,{action:'groups_invite_user','friend_action':friend_action,'cookie':bp_get_cookies(),'_wpnonce':jq("#_wpnonce_invite_uninvite_user").val(),'friend_id':friend_id,'group_id':jq("#group_id").val()},function(response)
{if(jq("#message"))
jq("#message").hide();jq('.ajax-loader').toggle();if(friend_action=='invite'){jq('#friend-list').append(response);}else if(friend_action=='uninvite'){jq('#friend-list li#uid-'+friend_id).remove();}
jq('.item-list-tabs li.selected').removeClass('loading');});});jq("#friend-list").on('click','li a.remove',function(){jq('.ajax-loader').toggle();var friend_id=jq(this).attr('id');friend_id=friend_id.split('-');friend_id=friend_id[1];jq.post(ajaxurl,{action:'groups_invite_user','friend_action':'uninvite','cookie':bp_get_cookies(),'_wpnonce':jq("#_wpnonce_invite_uninvite_user").val(),'friend_id':friend_id,'group_id':jq("#group_id").val()},function(response)
{jq('.ajax-loader').toggle();jq('#friend-list #uid-'+friend_id).remove();jq('#invite-list #f-'+friend_id).prop('checked',false);});return false;});jq('.field-visibility-settings').hide();jq('.visibility-toggle-link').on('click',function(){var toggle_div=jq(this).parent();jq(toggle_div).fadeOut(600,function(){jq(toggle_div).siblings('.field-visibility-settings').slideDown(400);});return false;});jq('.field-visibility-settings-close').on('click',function(){var settings_div=jq(this).parent();var vis_setting_text=settings_div.find('input:checked').parent().text();settings_div.slideUp(400,function(){settings_div.siblings('.field-visibility-settings-toggle').fadeIn(800);settings_div.siblings('.field-visibility-settings-toggle').children('.current-visibility-level').html(vis_setting_text);});return false;});jq("#profile-edit-form input:not(:submit), #profile-edit-form textarea, #profile-edit-form select, #signup_form input:not(:submit), #signup_form textarea, #signup_form select").change(function(){var shouldconfirm=true;jq('#profile-edit-form input:submit, #signup_form input:submit').on('click',function(){shouldconfirm=false;});window.onbeforeunload=function(e){if(shouldconfirm){return BP_DTheme.unsaved_changes;}};});jq("#friend-list a.accept, #friend-list a.reject").on('click',function(){var button=jq(this);var li=jq(this).parents('#friend-list li');var action_div=jq(this).parents('li div.action');var id=li.attr('id').substr(11,li.attr('id').length);var link_href=button.attr('href');var nonce=link_href.split('_wpnonce=');nonce=nonce[1];if(jq(this).hasClass('accepted')||jq(this).hasClass('rejected'))
return false;if(jq(this).hasClass('accept')){var action='accept_friendship';action_div.children('a.reject').css('visibility','hidden');}else{var action='reject_friendship';action_div.children('a.accept').css('visibility','hidden');}
button.addClass('loading');jq.post(ajaxurl,{action:action,'cookie':bp_get_cookies(),'id':id,'_wpnonce':nonce},function(response){button.removeClass('loading');if(response[0]+response[1]=='-1'){li.prepend(response.substr(2,response.length));li.children('#message').hide().fadeIn(200);}else{button.fadeOut(100,function(){if(jq(this).hasClass('accept')){action_div.children('a.reject').hide();jq(this).html(BP_DTheme.accepted).contents().unwrap();}else{action_div.children('a.accept').hide();jq(this).html(BP_DTheme.rejected).contents().unwrap();}});}});return false;});jq('#members-dir-list').on('click','.friendship-button a',function(){jq(this).parent().addClass('loading');var fid=jq(this).attr('id');fid=fid.split('-');fid=fid[1];var nonce=jq(this).attr('href');nonce=nonce.split('?_wpnonce=');nonce=nonce[1].split('&');nonce=nonce[0];var thelink=jq(this);jq.post(ajaxurl,{action:'addremove_friend','cookie':bp_get_cookies(),'fid':fid,'_wpnonce':nonce},function(response)
{var action=thelink.attr('rel');var parentdiv=thelink.parent();if(action=='add'){jq(parentdiv).fadeOut(200,function(){parentdiv.removeClass('add_friend');parentdiv.removeClass('loading');parentdiv.addClass('pending_friend');parentdiv.fadeIn(200).html(response);});}else if(action=='remove'){jq(parentdiv).fadeOut(200,function(){parentdiv.removeClass('remove_friend');parentdiv.removeClass('loading');parentdiv.addClass('add');parentdiv.fadeIn(200).html(response);});}});return false;});jq('#buddypress').on('click','.group-button .leave-group',function(){if(false==confirm(BP_DTheme.leave_group_confirm)){return false;}});jq('#groups-dir-list').on('click','.group-button a',function(){var gid=jq(this).parent().attr('id');gid=gid.split('-');gid=gid[1];var nonce=jq(this).attr('href');nonce=nonce.split('?_wpnonce=');nonce=nonce[1].split('&');nonce=nonce[0];var thelink=jq(this);if(thelink.hasClass('leave-group')&&false==confirm(BP_DTheme.leave_group_confirm)){return false;}
jq.post(ajaxurl,{action:'joinleave_group','cookie':bp_get_cookies(),'gid':gid,'_wpnonce':nonce},function(response)
{var parentdiv=thelink.parent();if(!jq('body.directory').length){location.href=location.href;}else{jq(parentdiv).fadeOut(200,function(){parentdiv.fadeIn(200).html(response);var mygroups=jq('#groups-personal span');var add=1;if(thelink.hasClass('leave-group')){if(parentdiv.hasClass('hidden')){parentdiv.closest('li').slideUp(200);}
add=0;}else if(thelink.hasClass('request-membership')){add=false;}
if(mygroups.length&&add!==false){if(add){mygroups.text((mygroups.text()>>0)+1);}else{mygroups.text((mygroups.text()>>0)-1);}}});}});return false;});jq('#buddypress').on('click','.pending',function(){return false;});jq('.message-search').on('click',function(event){if(jq(this).hasClass('no-ajax'))
return;var target=jq(event.target);if(target.attr('type')=='submit'){var object='messages';bp_filter_request(object,jq.cookie('bp-'+object+'-filter'),jq.cookie('bp-'+object+'-scope'),'div.'+object,target.parent().children('label').children('input').val(),1,jq.cookie('bp-'+object+'-extras'));return false;}});jq("#send_reply_button").click(function(){var order=jq('#messages_order').val()||'ASC',offset=jq('#message-recipients').offset();var button=jq("#send_reply_button");jq(button).addClass('loading');jq.post(ajaxurl,{action:'messages_send_reply','cookie':bp_get_cookies(),'_wpnonce':jq("#send_message_nonce").val(),'content':jq("#message_content").val(),'send_to':jq("#send_to").val(),'subject':jq("#subject").val(),'thread_id':jq("#thread_id").val()},function(response)
{if(response[0]+response[1]=="-1"){jq('#send-reply').prepend(response.substr(2,response.length));}else{jq('#send-reply #message').remove();jq("#message_content").val('');if('ASC'==order){jq('#send-reply').before(response);}else{jq('#message-recipients').after(response);jq(window).scrollTop(offset.top);}
jq(".new-message").hide().slideDown(200,function(){jq('.new-message').removeClass('new-message');});}
jq(button).removeClass('loading');});return false;});jq("#mark_as_read, #mark_as_unread").click(function(){var checkboxes_tosend='';var checkboxes=jq("#message-threads tr td input[type='checkbox']");if('mark_as_unread'==jq(this).attr('id')){var currentClass='read'
var newClass='unread'
var unreadCount=1;var inboxCount=0;var unreadCountDisplay='inline';var action='messages_markunread';}else{var currentClass='unread'
var newClass='read'
var unreadCount=0;var inboxCount=1;var unreadCountDisplay='none';var action='messages_markread';}
checkboxes.each(function(i){if(jq(this).is(':checked')){if(jq('#m-'+jq(this).attr('value')).hasClass(currentClass)){checkboxes_tosend+=jq(this).attr('value');jq('#m-'+jq(this).attr('value')).removeClass(currentClass);jq('#m-'+jq(this).attr('value')).addClass(newClass);var thread_count=jq('#m-'+jq(this).attr('value')+' td span.unread-count').html();jq('#m-'+jq(this).attr('value')+' td span.unread-count').html(unreadCount);jq('#m-'+jq(this).attr('value')+' td span.unread-count').css('display',unreadCountDisplay);var inboxcount=jq('tr.unread').length;jq('#user-messages span').html(inboxcount);if(i!=checkboxes.length-1){checkboxes_tosend+=','}}}});jq.post(ajaxurl,{action:action,'thread_ids':checkboxes_tosend});return false;});jq('body.messages #item-body div.messages').on('change','#message-type-select',function(){var selection=this.value;var checkboxes=jq("td input[type='checkbox']");checkboxes.each(function(i){checkboxes[i].checked="";});var checked_value="checked";switch(selection){case'unread':checkboxes=jq("tr.unread td input[type='checkbox']");break;case'read':checkboxes=jq("tr.read td input[type='checkbox']");break;case'':checked_value="";break;}
checkboxes.each(function(i){checkboxes[i].checked=checked_value;});});jq('body.messages #item-body div.messages').on('click','.messages-options-nav a',function(event){event.preventDefault();if(-1==jq.inArray(this.id,Array('delete_sentbox_messages','delete_inbox_messages'))){return;}
checkboxes_tosend='';checkboxes=jq("#message-threads tr td input[type='checkbox']");jq('#message').remove();jq(this).addClass('loading');jq(checkboxes).each(function(i){if(jq(this).is(':checked'))
checkboxes_tosend+=jq(this).attr('value')+',';});if(''==checkboxes_tosend){jq(this).removeClass('loading');return false;}
console.log(checkboxes_tosend);jq.post(ajaxurl,{action:'messages_delete','thread_ids':checkboxes_tosend},function(response){if(response[0]+response[1]=="-1"){jq('#message-threads').prepend(response.substr(2,response.length));}else{jq('#message-threads').before('<div id="message" class="updated"><p>'+response+'</p></div>');jq(checkboxes).each(function(i){if(jq(this).is(':checked')){jq(this).attr('checked',false);jq(this).parent().parent().fadeOut(150);}});}
jq('#message').hide().slideDown(150);jq("#delete_inbox_messages, #delete_sentbox_messages").removeClass('loading');});return false;});jq("#close-notice").on('click',function(){jq(this).addClass('loading');jq('#sidebar div.error').remove();jq.post(ajaxurl,{action:'messages_close_notice','notice_id':jq('.notice').attr('rel').substr(2,jq('.notice').attr('rel').length)},function(response){jq("#close-notice").removeClass('loading');if(response[0]+response[1]=='-1'){jq('.notice').prepend(response.substr(2,response.length));jq('#sidebar div.error').hide().fadeIn(200);}else{jq('.notice').slideUp(100);}});return false;});jq("#wp-admin-bar ul.main-nav li, #nav li").mouseover(function(){jq(this).addClass('sfhover');});jq("#wp-admin-bar ul.main-nav li, #nav li").mouseout(function(){jq(this).removeClass('sfhover');});jq('a.logout').on('click',function(){jq.cookie('bp-activity-scope',null,{path:'/'});jq.cookie('bp-activity-filter',null,{path:'/'});jq.cookie('bp-activity-oldestpage',null,{path:'/'});var objects=['members','groups','blogs','forums'];jq(objects).each(function(i){jq.cookie('bp-'+objects[i]+'-scope',null,{path:'/'});jq.cookie('bp-'+objects[i]+'-filter',null,{path:'/'});jq.cookie('bp-'+objects[i]+'-extras',null,{path:'/'});});});if(jq('body').hasClass('no-js'))
jq('body').attr('class',jq('body').attr('class').replace(/no-js/,'js'));});function bp_init_activity(){jq.cookie('bp-activity-oldestpage',1,{path:'/'});if(null!=jq.cookie('bp-activity-filter')&&jq('#activity-filter-select').length)
jq('#activity-filter-select select option[value="'+jq.cookie('bp-activity-filter')+'"]').prop('selected',true);if(null!=jq.cookie('bp-activity-scope')&&jq('.activity-type-tabs').length){jq('.activity-type-tabs li').each(function(){jq(this).removeClass('selected');});jq('#activity-'+jq.cookie('bp-activity-scope')+', .item-list-tabs li.current').addClass('selected');}}
function bp_init_objects(objects){jq(objects).each(function(i){if(null!=jq.cookie('bp-'+objects[i]+'-filter')&&jq('#'+objects[i]+'-order-select select').length)
jq('#'+objects[i]+'-order-select select option[value="'+jq.cookie('bp-'+objects[i]+'-filter')+'"]').prop('selected',true);if(null!=jq.cookie('bp-'+objects[i]+'-scope')&&jq('div.'+objects[i]).length){jq('.item-list-tabs li').each(function(){jq(this).removeClass('selected');});jq('#'+objects[i]+'-'+jq.cookie('bp-'+objects[i]+'-scope')+', #object-nav li.current').addClass('selected');}});}
function bp_filter_request(object,filter,scope,target,search_terms,page,extras,caller){if('activity'==object)
return false;if(jq.query.get('s')&&!search_terms)
search_terms=jq.query.get('s');if(null==scope)
scope='all';jq.cookie('bp-'+object+'-scope',scope,{path:'/'});jq.cookie('bp-'+object+'-filter',filter,{path:'/'});jq.cookie('bp-'+object+'-extras',extras,{path:'/'});jq('.item-list-tabs li').each(function(){jq(this).removeClass('selected');});jq('#'+object+'-'+scope+', #object-nav li.current').addClass('selected');jq('.item-list-tabs li.selected').addClass('loading');jq('.item-list-tabs select option[value="'+filter+'"]').prop('selected',true);if('friends'==object)
object='members';if(bp_ajax_request)
bp_ajax_request.abort();bp_ajax_request=jq.post(ajaxurl,{action:object+'_filter','cookie':bp_get_cookies(),'object':object,'filter':filter,'search_terms':search_terms,'scope':scope,'page':page,'extras':extras},function(response)
{if(caller=='pag-bottom'&&jq('#subnav').length){var top=jq('#subnav').parent();jq('html,body').animate({scrollTop:top.offset().top},'slow',function(){jq(target).fadeOut(100,function(){jq(this).html(response);jq(this).fadeIn(100);});});}else{jq(target).fadeOut(100,function(){jq(this).html(response);jq(this).fadeIn(100);});}
jq('.item-list-tabs li.selected').removeClass('loading');});}
function bp_activity_request(scope,filter){jq.cookie('bp-activity-scope',scope,{path:'/'});jq.cookie('bp-activity-filter',filter,{path:'/'});jq.cookie('bp-activity-oldestpage',1,{path:'/'});jq('.item-list-tabs li').each(function(){jq(this).removeClass('selected loading');});jq('#activity-'+scope+', .item-list-tabs li.current').addClass('selected');jq('#object-nav.item-list-tabs li.selected, div.activity-type-tabs li.selected').addClass('loading');jq('#activity-filter-select select option[value="'+filter+'"]').prop('selected',true);jq('.widget_bp_activity_widget h2 span.ajax-loader').show();if(bp_ajax_request)
bp_ajax_request.abort();bp_ajax_request=jq.post(ajaxurl,{action:'activity_widget_filter','cookie':bp_get_cookies(),'_wpnonce_activity_filter':jq("#_wpnonce_activity_filter").val(),'scope':scope,'filter':filter},function(response)
{jq('.widget_bp_activity_widget h2 span.ajax-loader').hide();jq('div.activity').fadeOut(100,function(){jq(this).html(response.contents);jq(this).fadeIn(100);bp_legacy_theme_hide_comments();});if(null!=response.feed_url)
jq('.directory #subnav li.feed a, .home-page #subnav li.feed a').attr('href',response.feed_url);jq('.item-list-tabs li.selected').removeClass('loading');},'json');}
function bp_legacy_theme_hide_comments(){var comments_divs=jq('div.activity-comments');if(!comments_divs.length)
return false;comments_divs.each(function(){if(jq(this).children('ul').children('li').length<5)return;var comments_div=jq(this);var parent_li=comments_div.parents('#activity-stream > li');var comment_lis=jq(this).children('ul').children('li');var comment_count=' ';if(jq('#'+parent_li.attr('id')+' a.acomment-reply span').length)
var comment_count=jq('#'+parent_li.attr('id')+' a.acomment-reply span').html();comment_lis.each(function(i){if(i<comment_lis.length-5){jq(this).addClass('hidden');jq(this).toggle();if(!i)
jq(this).before('<li class="show-all"><a href="#'+parent_li.attr('id')+'/show-all/" title="'+BP_DTheme.show_all_comments+'">'+BP_DTheme.show_x_comments.replace('%d',comment_count)+'</a></li>');}});});}
function checkAll(){var checkboxes=document.getElementsByTagName("input");for(var i=0;i<checkboxes.length;i++){if(checkboxes[i].type=="checkbox"){if($("check_all").checked==""){checkboxes[i].checked="";}
else{checkboxes[i].checked="checked";}}}}
function clear(container){if(!document.getElementById(container))return;var container=document.getElementById(container);if(radioButtons=container.getElementsByTagName('INPUT')){for(var i=0;i<radioButtons.length;i++){radioButtons[i].checked='';}}
if(options=container.getElementsByTagName('OPTION')){for(var i=0;i<options.length;i++){options[i].selected=false;}}
return;}
function bp_get_cookies(){var allCookies=document.cookie.split(";");var bpCookies={};var cookiePrefix='bp-';for(var i=0;i<allCookies.length;i++){var cookie=allCookies[i];var delimiter=cookie.indexOf("=");var name=jq.trim(unescape(cookie.slice(0,delimiter)));var value=unescape(cookie.slice(delimiter+1));if(name.indexOf(cookiePrefix)==0){bpCookies[name]=value;}}
return encodeURIComponent(jq.param(bpCookies));};(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return-h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return-h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return-h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return-h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return-h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return-h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return-h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return-h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return-(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k/2)==2){return e+l}if(!j){j=k*(0.3*1.5)}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}if(h<1){return-0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires='; expires='+date.toUTCString();}var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}};eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('M 6(A){4 $11=A.11||\'&\';4 $V=A.V===r?r:j;4 $1p=A.1p===r?\'\':\'[]\';4 $13=A.13===r?r:j;4 $D=$13?A.D===j?"#":"?":"";4 $15=A.15===r?r:j;v.1o=M 6(){4 f=6(o,t){8 o!=1v&&o!==x&&(!!t?o.1t==t:j)};4 14=6(1m){4 m,1l=/\\[([^[]*)\\]/g,T=/^([^[]+)(\\[.*\\])?$/.1r(1m),k=T[1],e=[];19(m=1l.1r(T[2]))e.u(m[1]);8[k,e]};4 w=6(3,e,7){4 o,y=e.1b();b(I 3!=\'X\')3=x;b(y===""){b(!3)3=[];b(f(3,L)){3.u(e.h==0?7:w(x,e.z(0),7))}n b(f(3,1a)){4 i=0;19(3[i++]!=x);3[--i]=e.h==0?7:w(3[i],e.z(0),7)}n{3=[];3.u(e.h==0?7:w(x,e.z(0),7))}}n b(y&&y.T(/^\\s*[0-9]+\\s*$/)){4 H=1c(y,10);b(!3)3=[];3[H]=e.h==0?7:w(3[H],e.z(0),7)}n b(y){4 H=y.B(/^\\s*|\\s*$/g,"");b(!3)3={};b(f(3,L)){4 18={};1w(4 i=0;i<3.h;++i){18[i]=3[i]}3=18}3[H]=e.h==0?7:w(3[H],e.z(0),7)}n{8 7}8 3};4 C=6(a){4 p=d;p.l={};b(a.C){v.J(a.Z(),6(5,c){p.O(5,c)})}n{v.J(1u,6(){4 q=""+d;q=q.B(/^[?#]/,\'\');q=q.B(/[;&]$/,\'\');b($V)q=q.B(/[+]/g,\' \');v.J(q.Y(/[&;]/),6(){4 5=1e(d.Y(\'=\')[0]||"");4 c=1e(d.Y(\'=\')[1]||"");b(!5)8;b($15){b(/^[+-]?[0-9]+\\.[0-9]*$/.1d(c))c=1A(c);n b(/^[+-]?[0-9]+$/.1d(c))c=1c(c,10)}c=(!c&&c!==0)?j:c;b(c!==r&&c!==j&&I c!=\'1g\')c=c;p.O(5,c)})})}8 p};C.1H={C:j,1G:6(5,1f){4 7=d.Z(5);8 f(7,1f)},1h:6(5){b(!f(5))8 d.l;4 K=14(5),k=K[0],e=K[1];4 3=d.l[k];19(3!=x&&e.h!=0){3=3[e.1b()]}8 I 3==\'1g\'?3:3||""},Z:6(5){4 3=d.1h(5);b(f(3,1a))8 v.1E(j,{},3);n b(f(3,L))8 3.z(0);8 3},O:6(5,c){4 7=!f(c)?x:c;4 K=14(5),k=K[0],e=K[1];4 3=d.l[k];d.l[k]=w(3,e.z(0),7);8 d},w:6(5,c){8 d.N().O(5,c)},1s:6(5){8 d.O(5,x).17()},1z:6(5){8 d.N().1s(5)},1j:6(){4 p=d;v.J(p.l,6(5,7){1y p.l[5]});8 p},1F:6(Q){4 D=Q.B(/^.*?[#](.+?)(?:\\?.+)?$/,"$1");4 S=Q.B(/^.*?[?](.+?)(?:#.+)?$/,"$1");8 M C(Q.h==S.h?\'\':S,Q.h==D.h?\'\':D)},1x:6(){8 d.N().1j()},N:6(){8 M C(d)},17:6(){6 F(G){4 R=I G=="X"?f(G,L)?[]:{}:G;b(I G==\'X\'){6 1k(o,5,7){b(f(o,L))o.u(7);n o[5]=7}v.J(G,6(5,7){b(!f(7))8 j;1k(R,5,F(7))})}8 R}d.l=F(d.l);8 d},1B:6(){8 d.N().17()},1D:6(){4 i=0,U=[],W=[],p=d;4 16=6(E){E=E+"";b($V)E=E.B(/ /g,"+");8 1C(E)};4 1n=6(1i,5,7){b(!f(7)||7===r)8;4 o=[16(5)];b(7!==j){o.u("=");o.u(16(7))}1i.u(o.P(""))};4 F=6(R,k){4 12=6(5){8!k||k==""?[5].P(""):[k,"[",5,"]"].P("")};v.J(R,6(5,7){b(I 7==\'X\')F(7,12(5));n 1n(W,12(5),7)})};F(d.l);b(W.h>0)U.u($D);U.u(W.P($11));8 U.P("")}};8 M C(1q.S,1q.D)}}(v.1o||{});',62,106,'|||target|var|key|function|value|return|||if|val|this|tokens|is||length||true|base|keys||else||self||false|||push|jQuery|set|null|token|slice|settings|replace|queryObject|hash|str|build|orig|index|typeof|each|parsed|Array|new|copy|SET|join|url|obj|search|match|queryString|spaces|chunks|object|split|get||separator|newKey|prefix|parse|numbers|encode|COMPACT|temp|while|Object|shift|parseInt|test|decodeURIComponent|type|number|GET|arr|EMPTY|add|rx|path|addFields|query|suffix|location|exec|REMOVE|constructor|arguments|undefined|for|empty|delete|remove|parseFloat|compact|encodeURIComponent|toString|extend|load|has|prototype'.split('|'),0,{}));;(function($){$.fn.timer=function(useroptions){var $this=$(this),opt,newVal,count=0;opt=$.extend({'timer':300,'width':24,'height':24,'fgColor':"#ED7A53",'bgColor':"#232323"},useroptions);$this.knob({'min':0,'max':opt.timer,'readOnly':true,'width':opt.width,'height':opt.height,'fgColor':opt.fgColor,'bgColor':opt.bgColor,'displayInput':false,'dynamicDraw':false,'ticks':0,'thickness':0.1});setInterval(function(){newVal=++count;$this.val(newVal).trigger('change');},1000);};$.urlParam=function(name){var results=new RegExp('[\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results==null){return null;}
else{return results[1]||0;}}
function bp_course_generate_cookie(){var category_filter=[];$('.bp-course-category-filter:checked').each(function(){var category={'type':'course-cat','value':$(this).val()};category_filter.push(category);});$('.course_cat_nav li.current-cat,input.current-course-cat').each(function(){if(typeof $(this).attr('data-slug')!='undefined'){var tax='course-cat';if($(this).attr('data-cat')!='undefined'){tax=$(this).attr('data-cat');}
var category={'type':tax,'value':$(this).attr('data-slug')};category_filter.push(category);}});$('.bp-course-date-filter').each(function(){if($(this).val().length){var date={'type':$(this).attr('data-type'),'value':$(this).val()};}
category_filter.push(date);});$('.bp-course-free-filter:checked').each(function(){var free={'type':'free','value':$(this).val()};category_filter.push(free);});$('.bp-course-offline-filter:checked').each(function(){var offline={'type':'offline','value':$(this).val()};category_filter.push(offline);});$('.bp-course-level-filter:checked').each(function(){var level={'type':'level','value':$(this).val()};category_filter.push(level);});$('.bp-course-location-filter:checked').each(function(){var location={'type':'location','value':$(this).val()};category_filter.push(location);});$('.bp-course-instructor-filter:checked').each(function(){var level={'type':'instructor','value':$(this).val()};category_filter.push(level);});$.cookie('bp-course-extras',JSON.stringify(category_filter),{expires:1,path:'/'});}
jQuery(document).ready(function($){if($('body').hasClass('directory')&&$('body').hasClass('course')){$.cookie('bp-course-scope','all',{path:'/'});if($('body').hasClass('archive')){bp_course_generate_cookie();bp_filter_request('course','','','div.course','',1,jq.cookie('bp-course-extras'));}else{bp_filter_request('course','','','div.course','',1,'{}');}}
if($('body').hasClass('bp-user my-account course')){if($('body').hasClass('instructor-courses')){$.cookie('bp-course-scope','instructor',{path:'/'});$.cookie('bp-course-extras','',{path:'/'});bp_filter_request('course','','instructor','div.course','',1,'{}');}else{$.cookie('bp-course-scope','personal',{path:'/'});$.cookie('bp-course-extras','',{path:'/'});bp_filter_request('course','','personal','div.course','',1,'{}');}}});jQuery(document).ready(function($){var default_save_text=$('#save_news_front_end').text();var news=$('body').find('#create_news');$('.create_news_front_end,.cancel_news_front_end').on('click',function(){if(news.hasClass('show')){news.removeClass('show');news.addClass('hide');news.find('.news_title').val('');news.find('.news_sub_title').val('');news.find('.news_format').val('post-format-0');tinyMCE.get('news_content').setContent('',{format:'raw'});$('body').find('#save_news_front_end').text(default_save_text);$('body').find('#save_news_front_end').attr('data-id','');$('body').find('.edit_news_front_end.active').parent().css('opacity','1');$('body').find('.edit_news_front_end.active').removeClass('active');return;}
news.removeClass('hide');news.addClass('show');if(news){$('html,body').animate({scrollTop:$(news).offset().top-150},500);}});});jQuery(document).ready(function($){var news=$('body').find('#create_news');$('.edit_news_front_end').on('click',function(){if(news.hasClass('show')){return;}
if($(this).hasClass('active')){$(this).removeClass('active');return;}
$(this).addClass('active');$(this).parent().css('opacity','0.5');var course_id=$(this).attr('data-id');var news_id=$(this).attr('data-news');$.ajax({type:"POST",url:ajaxurl,dataType:'json',data:{action:'edit_news_front_end',security:$('#news_security').val(),id:course_id,news:news_id,},cache:false,success:function(json){news.find('.news_title').val(json.title);news.find('.news_sub_title').val(json.subtitle);news.find('.news_format').val(json.format);tinyMCE.get('news_content').setContent(json.content,{format:'raw'});$('body').find('.create_news_front_end').trigger('click');$('body').find('#save_news_front_end').text(json.text);$('body').find('#save_news_front_end').attr('data-id',news_id);}});});});jQuery(document).ready(function($){$('#save_news_front_end').on('click',function(){$this=$('body').find('#create_news');var course_id=$this.attr('data-id');var news_title=$this.find('.news_title').val();var news_sub_title=$this.find('.news_sub_title').val();var news_format=$this.find('.news_format').val();var news_content=tinyMCE.get('news_content').getContent({format:'raw'});var news_id=$(this).attr('data-id');$.ajax({type:"POST",url:ajaxurl,data:{action:'save_news_front_end',security:$('#news_security').val(),id:course_id,news_title:news_title,news_sub_title:news_sub_title,news_format:news_format,news_content:news_content,news:news_id,},cache:false,success:function(){location.reload(true);}});});});jQuery(document).ready(function($){var news=$('body').find('#create_news');$('.delete_news_front_end').on('click',function(){var course_id=$(this).attr('data-id');var news_id=$(this).attr('data-news');var text=$(this).attr('data-text');$.confirm({text:text,confirm:function(){$.ajax({type:"POST",url:ajaxurl,dataType:'json',data:{action:'delete_news_front_end',security:$('#news_security').val(),id:course_id,news:news_id,},cache:false,success:function(json){location.reload(true);}});},cancel:function(){},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});});});function runnecessaryfunctions(){if($.isFunction($.fn.fitVids)){jQuery('.fitvids').fitVids();}
if(typeof tooltip!=='undefined'){jQuery('.tip').tooltip();}
jQuery('.nav-tabs li:first a').tab('show');jQuery('.nav-tabs li a').click(function(event){event.preventDefault();$(this).tab('show');});$('.wp-playlist').each(function(){return new WPPlaylistView({el:this});});$('audio,video').each(function(){if($(this).parents('.flowplayer').length)return;if($(this).closest('.wp-playlist').length){return;}$(this).mediaelementplayer()});jQuery('.gallery').magnificPopup({delegate:'a',type:'image',tLoading:'Loading image #%curr%...',mainClass:'mfp-img-mobile',gallery:{enabled:true,navigateByImgClick:true,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(item){return item.el.attr('title');}}});$('.open_popup_link').magnificPopup({type:'inline',midClick:true});$('.ajax-popup-link').magnificPopup({type:'ajax',alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:'auto',closeBtnInside:true,preloader:false,midClick:true,removalDelay:300,mainClass:'my-mfp-zoom-in'});$('.quiz_results_popup').magnificPopup({type:'ajax',alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:'auto',closeBtnInside:true,preloader:false,midClick:true,removalDelay:300,mainClass:'my-mfp-zoom-in',callbacks:{parseAjax:function(mfpResponse){mfpResponse.data=$(mfpResponse.data).find('.user_quiz_result');},ajaxContentAdded:function(){$('#prev_results a').on('click',function(event){event.preventDefault();$(this).toggleClass('show');$('.prev_quiz_results').toggleClass('show');});$('.print_results').click(function(event){event.preventDefault();$('.quiz_result').print();});$('.quiz_retake_form.start_quiz').on('click',function(e){e.preventDefault();var qid=$('#unit.quiz_title').attr('data-unit');$.ajax({type:"POST",url:ajaxurl,data:{action:'retake_inquiz',security:$('#hash').val(),quiz_id:qid,},cache:false,success:function(html){$('a.unit[data-unit="'+qid+'"]').trigger('click');$.magnificPopup.close();$('#unit'+qid).removeClass('done');$('#all_questions_json').each(function(){var question_ids=$.parseJSON($(this).val());$.each(question_ids,function(i,question_id){localStorage.removeItem(question_id);localStorage.removeItem('question_result_'+question_id);});});$('body').find('.course_progressbar').removeClass('increment_complete');$('body').find('.course_progressbar').trigger('decrement');}});});}}});$(".live-edit").liveEdit({afterSaveAll:function(params){return false;}});if(typeof vc_js=='function'){window.vc_js();}}
jQuery(document).ready(function($){$('.open_popup_link').magnificPopup({type:'inline',midClick:true});$('.item-list').each(function(){var cookie_name='bp-'+$('.item-list').attr('id');var cookieValue=$.cookie(cookie_name);if((cookieValue!==null)&&cookieValue=='grid'){$('.item-list').addClass('grid');$('#list_view').removeClass('active');$('#grid_view').addClass('active');}});$('.curriculum_unit_popup').on('click',function(event){event.preventDefault();var $this=$(this);if(!$('#unit_load'+$this.attr('data-id')).length){$.ajax({type:"POST",url:ajaxurl,data:{action:'get_unit_content',course_id:$this.attr('data-course'),unit_id:$this.attr('data-id'),},cache:false,success:function(html){$('body').append(html);runnecessaryfunctions();$('body').find('#unit_load'+$this.attr('data-id')).addClass('unit_content');$('body').trigger('unit_load'+$this.attr('data-id'));}});}else{$('body').trigger('unit_load'+$this.attr('data-id'));}
$('body').on('unit_load'+$this.attr('data-id'),function(){$.magnificPopup.open({items:{src:'#unit_load'+$this.attr('data-id')},type:'inline',callbacks:{open:function(){$('.unit_content').trigger('unit_traverse');$('body').trigger('unit_loaded');}}});});});$('.shop_table.order_details dl.variation').each(function(){$("[class^=variation-commission]").hide();});$('.unit_content').on('unit_traverse',function(){$('.accordion').each(function(){if($(this).hasClass('load_first')){$(this).find('.accordion-group:first-child .accordion-toggle').trigger('click');}});});$('.datepicker').each(function(){$(this).datepicker({dateFormat:'yy-mm-dd'});});function bp_course_extras_cookies(){$('.bp-course-category-filter,.bp-course-free-filter,.bp-course-level-filter,.bp-course-location-filter,.bp-course-instructor-filter,.bp-course-date-filter,.bp-course-offline-filter').on('change',function(){bp_course_generate_cookie();});}
$('.course_cat_nav li').each(function(){if($(this).hasClass('current-cat')){if(typeof $(this).attr('data-slug')!='undefined'&&$(this).attr('data-slug').length){bp_course_generate_cookie();}}});jQuery(document).ready(function($){$('.course_pursue_panel').each(function(){var course_pursue_panel=$(this);var wheight=$(window).height();course_pursue_panel.css('height',wheight+'px');var viewportWidth=$(window).width();if(viewportWidth<768){$("body").addClass("course_pursue_panel_hide");}else{$("body").removeClass("course_pursue_panel_hide");}});$('#hideshow_course_pursue_panel').on('click',function(){$('body').toggleClass('course_pursue_panel_hide');});$(window).load(function(){var viewportWidth=$(window).width();if(viewportWidth<768){$('.unit_content').on('unit_traverse',function(){$("body").addClass("course_pursue_panel_hide");});}});$(window).on("resize",function(){var viewportWidth=$(window).width();if(viewportWidth<768){$("body").addClass("course_pursue_panel_hide");$('.unit_content').on('unit_traverse',function(){$("body").addClass("course_pursue_panel_hide");});}else{$("body").removeClass("course_pursue_panel_hide");}});});function bp_course_category_filter_cookie(){var category_filter_cookie=$.cookie("bp-course-extras");if(typeof category_filter_cookie!=="undefined"&&(category_filter_cookie!==null)){var category_filter=JSON.parse(category_filter_cookie);if(typeof category_filter!='object'){return;}
$('#active_filters').remove();if($('#active_filters').length){$('#active_filters').fadeIn(200);}else{$('#course-dir-list').before('<ul id="active_filters"><li>'+vibe_course_module_strings.active_filters+'</li></ul>');}
jQuery.each(category_filter,function(index,item){if(item!==null){if($('input[data-type="'+item['type']+'"]').attr('type')=='text'){$('input[data-type="'+item['type']+'"]').val(item['value']);var id=$('input[data-type="'+item['type']+'"]').attr('data-type');var text=$('input[data-type="'+item['type']+'"]').attr('placeholder')+' : '+item['value'];}else{$('input[value="'+item['value']+'"]').prop('checked',true);var id=$('input[value="'+item['value']+'"]').attr('id');var text=$('label[for="'+id+'"]').text();}
if(!$('#active_filters span[data-id="'+id+'"]').length&&text.length){$('#active_filters').append('<li><span data-id="'+id+'">'+text+'</span></li>');}}});$('#active_filters li span').on('click',function(){var id=$(this).attr('data-id');$(this).parent().fadeOut(200,function(){$(this).remove();$('#loader_spinner').remove();if($('#active_filters li').length<3)
$('#active_filters').fadeOut(200);else
$('#active_filters').fadeIn(200);});if($('#'+id).length){if($('#'+id).attr('type')=='checkbox'){$('#'+id).prop('checked',false);}
if($('#'+id).attr('type')=='radio'){$('#'+id).prop('checked',false);}
if($('#'+id).attr('type')=='text'){$('#'+id).val('');}}
var category_filter=[];$('.bp-course-category-filter:checked').each(function(){var category={'type':'course-cat','value':$(this).val()};category_filter.push(category);});$('.bp-course-free-filter:checked').each(function(){var free={'type':'free','value':$(this).val()};category_filter.push(free);});$('.bp-course-offline-filter:checked').each(function(){var offline={'type':'offline','value':$(this).val()};category_filter.push(offline);});$('.bp-course-level-filter:checked').each(function(){var level={'type':'level','value':$(this).val()};category_filter.push(level);});$('.bp-course-location-filter:checked').each(function(){var location={'type':'location','value':$(this).val()};category_filter.push(location);});$('.bp-course-instructor-filter:checked').each(function(){var level={'type':'instructor','value':$(this).val()};category_filter.push(level);});$.cookie('bp-course-extras',JSON.stringify(category_filter),{expires:1,path:'/'});$('.course_filters').trigger('course_filter');});if(!$('#active_filters .all-filter-clear').length)
$('#active_filters').append('<li class="all-filter-clear">'+vibe_course_module_strings.clear_filters+'</li>');$('#active_filters li.all-filter-clear').click(function(){$('#loader_spinner').remove();$('#active_filters li').each(function(){var span=$(this).find('span');var id=span.attr('data-id');span.parent().fadeOut(200,function(){$(this).remove();});if($('#'+id).attr('type')=='text'){$('#'+id).val('');}else{$('#'+id).prop('checked',false);}
$('#active_filters').fadeOut(200,function(){$(this).remove();});$.removeCookie('bp-course-extras',{path:'/'});$('.course_filters').trigger('course_filter');});});if($('#active_filters li').length<3){$('#active_filters').fadeOut(200);}else{$('#active_filters').fadeIn(200);}}}
bp_course_extras_cookies();bp_course_category_filter_cookie();if($('.course_filters').hasClass('auto_click')){$('.course_filters input').on('change',function(event){var jq=jQuery;$('#loader_spinner').remove();$(this).append('<i id="loader_spinner" class="fa fa-spinner spin loading animation cssanim"></i>');if($('.item-list-tabs li.selected').length){var el=$('.item-list-tabs li.selected');}else{$('#course-all').addClass('selected');var el=$('#course-all');}
var css_id=el.attr('id').split('-');var object=css_id[0];var scope=css_id[1];var filter=jq(this).val();var search_terms=false;if(jq('.dir-search input').length)
search_terms=jq('.dir-search input').val();if('friends'==object)
object='members';bp_course_extras_cookies();bp_filter_request(object,filter,scope,'div.'+object,search_terms,1,jq.cookie('bp-'+object+'-extras'));bp_course_category_filter_cookie();jq('#buddypress').on('bp_filter_request',function(){$('#loader_spinner').remove();});});}
$('.category_filter li > span,.category_filter li > label').click(function(event){var parent=$(this).parent();$(this).parent().find('span').toggleClass('active');parent.find('ul.sub_categories').toggle(300);});$('#submit_filters').on('click',function(event){var jq=jQuery;$('#loader_spinner').remove();$(this).append('<i id="loader_spinner" class="fa fa-spinner spin loading animation cssanim"></i>');$('.course_filters').trigger('course_filter');return false;});$('.course_filters').on('course_filter',function(){var jq=jQuery;if($('.item-list-tabs li.selected').length){var el=$('.item-list-tabs li.selected');}else{$('#course-all').addClass('selected');var el=$('#course-all');}
var css_id=el.attr('id').split('-');var object=css_id[0];var scope=css_id[1];var filter=jq(this).val();var search_terms=false;if(jq('.dir-search input').length)
search_terms=jq('.dir-search input').val();if('friends'==object)
object='members';bp_course_extras_cookies();bp_filter_request(object,filter,scope,'div.'+object,search_terms,1,jq.cookie('bp-'+object+'-extras'));bp_course_category_filter_cookie();jq('#buddypress').on('bp_filter_request',function(){$('#loader_spinner').remove();});});$('.quiz_results_popup').magnificPopup({type:'ajax',alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:'auto',closeBtnInside:true,preloader:false,midClick:true,removalDelay:300,mainClass:'my-mfp-zoom-in',callbacks:{parseAjax:function(mfpResponse){mfpResponse.data=$(mfpResponse.data).find('#item-body');},ajaxContentAdded:function(){$('#prev_results a').on('click',function(event){event.preventDefault();$(this).toggleClass('show');$('.prev_quiz_results').toggleClass('show');});$('.print_results').click(function(event){event.preventDefault();$('.quiz_result').print();});$('.quiz_retake_form.start_quiz').on('click',function(e){e.preventDefault();var qid=$('#unit.quiz_title').attr('data-unit');$.ajax({type:"POST",url:ajaxurl,data:{action:'retake_inquiz',security:$('#hash').val(),quiz_id:qid,},cache:false,success:function(html){$('a.unit[data-unit="'+qid+'"]').trigger('click');$.magnificPopup.close();$('#unit'+qid).removeClass('done');$('body').find('.course_progressbar').removeClass('increment_complete');$('body').find('.course_progressbar').trigger('decrement');}});});}}});$('#grid_view').click(function(){if(!$('.item-list').hasClass('grid')){$('.item-list').addClass('grid');}
var cookie_name='bp-'+$('.item-list').attr('id');$.cookie(cookie_name,'grid',{expires:2,path:'/'});$('#list_view').removeClass('active');$(this).addClass('active');});$('#list_view').click(function(){$('.item-list').removeClass('grid');var cookie_name='bp-'+$('.item-list').attr('id');$.cookie(cookie_name,'list',{expires:2,path:'/'});$('#grid_view').removeClass('active');$(this).addClass('active');});$('.dial').each(function(){$(this).knob({'readOnly':true,'width':120,'height':120,'fgColor':vibe_course_module_strings.theme_color,'bgColor':'#f6f6f6','thickness':0.1});});$('#apply_course_button').on('click',function(){var $this=$(this);var default_html=$this.html();$this.html('<i class="fa fa-spinner animated spin"></i>');$.confirm({text:vibe_course_module_strings.confirm_apply,confirm:function(){$.ajax({type:"POST",url:ajaxurl,data:{action:'apply_for_course',security:$this.attr('data-security'),course_id:$this.attr('data-id'),},cache:false,success:function(html){$this.html(html);}});},cancel:function(){$this.html(default_html);},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});});$('#applications ul li span').on('click',function(){var $this=$(this);var action='reject';if($this.hasClass('approve')){action='approve';}
$this.addClass('loading');$.ajax({type:"POST",url:ajaxurl,data:{action:'manage_user_application',act:action,security:$this.parent().attr('data-security'),user_id:$this.parent().attr('data-id'),course_id:$this.parent().attr('data-course'),},cache:false,success:function(html){$this.removeClass('loading');$this.addClass('active');setTimeout(function(){$this.parent().remove();},1000);}});});$('body').delegate('.remove_user_course','click',function(event){event.preventDefault();var course_id=$(this).attr('data-course');var user_id=$(this).attr('data-user');$(this).addClass('animated spin');var $this=$(this);$.confirm({text:vibe_course_module_strings.remove_user_text,confirm:function(){$.ajax({type:"POST",url:ajaxurl,data:{action:'remove_user_course',security:$('#bulk_action').val(),id:course_id,user:user_id},cache:false,success:function(html){$(this).removeClass('animated');$(this).removeClass('spin');runnecessaryfunctions();$('#message').html(html);$('#s'+user_id).fadeOut('fast');}});},cancel:function(){$this.removeClass('animated');$this.removeClass('spin');},confirmButton:vibe_course_module_strings.remove_user_button,cancelButton:vibe_course_module_strings.cancel});});$('body').delegate('.reset_course_user','click',function(event){event.preventDefault();var course_id=$(this).attr('data-course');var user_id=$(this).attr('data-user');$(this).addClass('animated spin');var $this=$(this);$.confirm({text:vibe_course_module_strings.reset_user_text,confirm:function(){$.ajax({type:"POST",url:ajaxurl,data:{action:'reset_course_user',security:$('#bulk_action').val(),id:course_id,user:user_id},cache:false,success:function(html){$this.removeClass('animated');$this.removeClass('spin');var cookie_id='course_progress'+course_id;$.removeCookie(cookie_id,{path:'/'});$('#message').html(html);}});},cancel:function(){$this.removeClass('animated');$this.removeClass('spin');},confirmButton:vibe_course_module_strings.reset_user_button,cancelButton:vibe_course_module_strings.cancel});});$('body').delegate('.tip.course_stats_user','click',function(event){event.preventDefault();var $this=$(this);var course_id=$this.attr('data-course');var user_id=$this.attr('data-user');if($this.hasClass('already')){$('#s'+user_id).find('.course_stats_user').fadeIn('fast');}else{$this.addClass('animated spin');$.ajax({type:"POST",url:ajaxurl,data:{action:'course_stats_user',security:$('#bulk_action').val(),id:course_id,user:user_id},cache:false,success:function(html){$this.removeClass('animated');$this.removeClass('spin');$this.addClass('already');$('#s'+user_id).append(html);$('.course_students').trigger('load_quiz_results');$(".dial").knob({'readOnly':true,'width':160,'height':160,'fgColor':vibe_course_module_strings.theme_color,'bgColor':'#f6f6f6','thickness':0.1});$('#s'+user_id+' .curriculum_check li span').click(function(){var $span=$(this);var action;var text;if($(this).hasClass('done')){action='instructor_uncomplete_unit';text=vibe_course_module_strings.instructor_uncomplete_unit;}else{action='instructor_complete_unit';text=vibe_course_module_strings.instructor_complete_unit;}
$.confirm({text:text,confirm:function(){$.ajax({type:"POST",url:ajaxurl,async:true,data:{action:action,security:$('#bulk_action').val(),course_id:course_id,id:$span.attr('data-id'),user_id:user_id},cache:false,success:function(html){console.log(html);if($span.hasClass('done')){$span.removeClass('done');}else{$span.addClass('done');}}});},cancel:function(){},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});});}});}});$('.course_students').on('load_quiz_results',function(){$('.check_user_quiz_results').click(function(){$.ajax({type:"POST",url:ajaxurl,data:{action:'check_user_quiz_results',quiz:$(this).attr('data-quiz'),user:$(this).attr('data-user'),course_id:$('#course_user_ajax_search_results').attr('data-id'),security:$('#bulk_action').val()},cache:false,success:function(html){$.magnificPopup.open({items:{src:$('<div id="item-body">'+html+'</div>'),type:'inline'}});$('.print_results').click(function(event){event.preventDefault();$('.quiz_result').print();});}});});});$('body').delegate('.data_stats li','click',function(event){event.preventDefault();var defaultxt=$(this).html();var content=$('.main_content');if($('.main_unit_content.in_quiz')&&$('.main_unit_content.in_quiz').length){var content=$('.main_unit_content.in_quiz');}
var $this=$(this);var id=$(this).attr('id');if(id=='desc'){content.show();$('.stats_content').hide();}else{if($(this).hasClass('loaded')){content.hide();$('.stats_content').show();}else{$this.addClass('loaded');content.hide();$(this).html('<i class="fa fa-spinner"></i>');var quiz_id=$this.parent().attr('data-id');var cpttype=$this.parent().attr('data-type');$.ajax({type:"POST",url:ajaxurl,data:{action:'load_stats',cpttype:cpttype,id:quiz_id},cache:false,success:function(html){content.after(html);setTimeout(function(){$this.html(defaultxt);},1000);}});}}
$this.parent().find('.active').removeClass('active');$this.addClass('active');});$('#calculate_avg_course').click(function(event){event.preventDefault();var course_id=$(this).attr('data-courseid');$(this).addClass('animated spin');$.ajax({type:"POST",url:ajaxurl,data:{action:'calculate_stats_course',security:$('#security').val(),id:course_id},cache:false,success:function(html){$(this).removeClass('animated');$(this).removeClass('spin');$('#message').html(html);setTimeout(function(){location.reload();},3000);}});});$('.course.submissions #quiz,.course.submissions #course').on('loaded',function(){$('.tip').tooltip();});$('body').delegate('.reset_quiz_user','click',function(event){event.preventDefault();var course_id=$(this).attr('data-quiz');var user_id=$(this).attr('data-user');$(this).addClass('animated spin');var $this=$(this);$.confirm({text:vibe_course_module_strings.quiz_reset,confirm:function(){$.ajax({type:"POST",url:ajaxurl,data:{action:'reset_quiz',security:$('#qsecurity').val(),id:course_id,user:user_id},cache:false,success:function(html){$(this).removeClass('animated');$(this).removeClass('spin');$('#message').html(html);$('#qs'+user_id).fadeOut('fast');}});},cancel:function(){$this.removeClass('animated');$this.removeClass('spin');},confirmButton:vibe_course_module_strings.quiz_rest_button,cancelButton:vibe_course_module_strings.cancel});});$('body').delegate('.evaluate_quiz_user','click',function(event){event.preventDefault();var quiz_id=$(this).attr('data-quiz');var user_id=$(this).attr('data-user');$(this).addClass('animated spin');$.ajax({type:"POST",url:ajaxurl,data:{action:'evaluate_quiz',security:$('#qsecurity').val(),id:quiz_id,user:user_id},cache:false,success:function(html){$(this).removeClass('animated');$(this).removeClass('spin');$('.quiz_students').html(html);calculate_total_marks();$('#total_marks>strong>span').on('click',function(){var $this=$(this);$('#set_quiz_marks').remove();$('#total_marks').append('<input type="number" id="set_quiz_marks">');$('#set_quiz_marks').on('blur',function(){var val=$(this).val();$this.text(val);$(this).remove();});});}});});$('body').delegate('.evaluate_course_user','click',function(event){event.preventDefault();var course_id=$(this).attr('data-course');var user_id=$(this).attr('data-user');$(this).addClass('animated spin');$.ajax({type:"POST",url:ajaxurl,data:{action:'evaluate_course',security:$('#security').val(),id:course_id,user:user_id},cache:false,success:function(html){$(this).removeClass('animated');$(this).removeClass('spin');$('.course_students').html(html);calculate_total_marks();}});});$('body').delegate('.reset_answer','click',function(event){event.preventDefault();var ques_id=$('#comment-status').attr('data-quesid');var $this=$(this);var qid=$('#comment-status').attr('data-quesid');$this.prepend('<i class="fa fa-spinner animated spin"></i>');$.ajax({type:"POST",url:ajaxurl,data:{action:'reset_question_answer',security:$this.attr('data-security'),ques_id:ques_id,},cache:false,success:function(html){$this.find('i').remove();$('#comment-status').html(html);$('#ques'+qid).removeClass('done');setTimeout(function(){$this.addClass('hide');},500);}});});$('body').delegate('#course_complete','click',function(event){event.preventDefault();var $this=$(this);var user_id=$this.attr('data-user');var course=$this.attr('data-course');var marks=parseInt($('#course_marks_field').val());if(marks<=0){alert('Enter Marks for User');return;}
$this.prepend('<i class="fa fa-spinner animated spin"></i>');$.ajax({type:"POST",url:ajaxurl,data:{action:'complete_course_marks',security:$('#security').val(),course:course,user:user_id,marks:marks},cache:false,success:function(html){$this.find('i').remove();$this.html(html);}});});$('.register-section h4').click(function(){$(this).toggleClass('show');$(this).parent().find('.editfield').toggle('fast');});});$('body').delegate('.hide_parent','click',function(event){$(this).parent().fadeOut('fast');});$('body').delegate('.give_marks','click',function(event){event.preventDefault();var $this=$(this);var ansid=$this.attr('data-ans-id');var aval=$('#'+ansid).val();$this.prepend('<i class="fa fa-spinner animated spin"></i>');$.ajax({type:"POST",url:ajaxurl,data:{action:'give_marks',aid:ansid,aval:aval},cache:false,success:function(html){$this.find('i').remove();$this.html(vibe_course_module_strings.marks_saved);}});});$('body').delegate('#mark_complete','click',function(event){event.preventDefault();var $this=$(this);var quiz_id=$this.attr('data-quiz');var user_id=$this.attr('data-user');var marks=parseInt($('#total_marks strong > span').text());$this.prepend('<i class="fa fa-spinner animated spin"></i>');$.ajax({type:"POST",url:ajaxurl,data:{action:'save_quiz_marks',quiz_id:quiz_id,user_id:user_id,marks:marks,},cache:false,success:function(html){$this.find('i').remove();$this.html(vibe_course_module_strings.quiz_marks_saved);}});});function calculate_total_marks(){$('.question_marks').on('keyup',function(){var marks=parseInt(0);var $this=$('#total_marks strong > span');$('.question_marks').each(function(){if($(this).val())
marks=marks+parseInt($(this).val());});$this.html(marks);});}
$('body').delegate('.submit_quiz','click',function(event){event.preventDefault();$('#question').css('opacity',0.2);$('#ajaxloader').removeClass('disabled');if($(this).hasClass('disabled')||$(this).hasClass('activity-item')){return false;}
var $this=$(this);$this.prepend('<i class="fa fa-spinner animated spin"></i>');$('#question').addClass('quiz_submitted_fade');var quiz_id=$(this).attr('data-quiz');var answers=[];var unanswered_flag=0;var security=$('#start_quiz').val();if(typeof all_questions_json!=='undefined'){$.each(all_questions_json,function(key,val){var ans=localStorage.getItem(val);localStorage.removeItem('question_result_'+val);if(ans){var answer={'id':val,'value':ans};answers.push(answer);}else{unanswered_flag++;}});}
if(unanswered_flag){$.confirm({text:vibe_course_module_strings.unanswered_questions,confirm:function(){$.confirm({text:vibe_course_module_strings.submit_quiz_notification,confirm:function(){wplms_submit_quiz(quiz_id,security);},cancel:function(){$('#question').css('opacity',1);$('#ajaxloader').addClass('disabled');},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});},cancel:function(){$('#question').css('opacity',1);$('#ajaxloader').addClass('disabled');$this.remove('.fa');return false;},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});}else{$.confirm({text:vibe_course_module_strings.submit_quiz_notification,confirm:function(){wplms_submit_quiz(quiz_id,security);},cancel:function(){$('#question').css('opacity',1);$this.remove('.fa');$('#ajaxloader').addClass('disabled');},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});}});function wplms_submit_quiz(quiz_id,security){$('#ajaxloader').removeClass('disabled');$('#ajaxloader').append('<div class="submit_quiz_progress"><span class="save_progress_wrap"><span class="save_progress_label"></span><span class="save_progress_bar"><span class="save_progress_inner"></span></span></span></div>');$('body').append('<div id="fullbody_mask"></div>');var defferred=[];var current=0;var per=0;if(all_questions_json.length){$.each(all_questions_json,function(i,item){var value=localStorage.getItem(item);if(value!=null){var data={action:'save_question_marked_answer',security:security,quiz_id:quiz_id,question_id:item,answer:value};defferred.push(data);}else{per++;}
if(all_questions_json.length==per){end_quiz_submission(quiz_id);}});save_question_answer(current,defferred,per,'submit');}else{end_quiz_submission(quiz_id);}
$('body').on('all_question_answers_saved',function(event,data){if(data.trigger=='submit'){end_quiz_submission(quiz_id);}});}
function end_quiz_submission(quiz_id){$.ajax({type:"POST",url:ajaxurl,async:true,data:{action:'submit_quiz',security:$('#start_quiz').val(),quiz_id:quiz_id,},cache:false,success:function(html){$('#content').append(html);$('#fullbody_mask').remove();if(typeof all_questions_json!=='undefined'){$.each(all_questions_json,function(key,val){localStorage.removeItem(val);localStorage.removeItem('question_result_'+val);});}
window.location.assign(document.URL);}});}
function wplms_submit_inquiz(){if($('.unit_button').hasClass('quiz_results_popup')){return;}
$('#ajaxloader').removeClass('disabled');$('#ajaxloader').append('<div class="submit_quiz_progress"><span class="save_progress_wrap"><span class="save_progress_label"></span><span class="save_progress_bar"><span class="save_progress_inner"></span></span></span></div>');$('body').append('<div id="fullbody_mask"></div>');var defferred=[];var current=0;var per=0;var quiz_id=$('#unit.quiz_title').attr('data-unit');var security=$('#hash').val();$.each(all_questions_json,function(i,item){var value=localStorage.getItem(item);if(value!=null){var data={action:'save_question_marked_answer',security:security,quiz_id:quiz_id,question_id:item,answer:value};defferred.push(data);}else{per++;}
var width=100*(per/all_questions_json.length);$('.save_progress_inner').css('width',width+'%');if(all_questions_json.length==per){end_inquiz_submission();}});save_question_answer(current,defferred,per,'submit');$('body').on('all_question_answers_saved',function(event,data){console.log(' data ='+data.trigger);if(data.trigger=='submit'){end_inquiz_submission();}});}
function end_inquiz_submission(){var $this=$('.submit_inquiz');if($this.hasClass('processing'))
return;$this.addClass('processing');$.ajax({type:"POST",url:ajaxurl,data:{action:'in_submit_quiz',security:$('#hash').val(),quiz_id:$('#unit.quiz_title').attr('data-unit'),},cache:false,success:function(html){$('#fullbody_mask').remove();$('#ajaxloader').addClass('disabled');$('#ajaxloader').remove('.submit_quiz_progress');$('#unit_content').removeClass('loading');$this.removeClass('processing');html=$.trim(html);if(html.indexOf('##')>0){var nextunit=html.substr(0,html.indexOf('##'));html=html.substr((html.indexOf('##')+2));if(nextunit.length>0){$('#next_unit').removeClass('hide');$('#next_unit').attr('data-unit',nextunit);$('#next_quiz').removeClass('hide');$('#next_quiz').attr('data-unit',nextunit);$('#unit'+nextunit).find('a').addClass('unit');$('#unit'+nextunit).find('a').attr('data-unit',nextunit);}}else{if(html.indexOf('##')==0){html=html.substr(2);console.log(html);}else{$('#next_unit').removeClass('hide');}}
$('.main_unit_content').html(html);$('.quiz_title .inquiz_timer').trigger('deactivate');$('.in_quiz').trigger('question_loaded');$this.removeClass('submit_inquiz');$('.quiz_title .quiz_meta').addClass('hide');$this.addClass('quiz_results_popup');$this.attr('href',$('#results_link').val());runnecessaryfunctions();if(typeof all_quiz_questions_local!=='undefined'){$.each(all_quiz_questions_local,function(key,val){localStorage.removeItem(val);localStorage.removeItem('question_result_'+val);});}
$this.text(vibe_course_module_strings.check_results);$this.parent().find('.save_quiz_progress').remove();$('#unit'+$('#unit.quiz_title').attr('data-unit')).addClass('done');$('body').find('.course_progressbar').removeClass('increment_complete');$('body').find('.course_progressbar').trigger('increment');$('body,html').animate({scrollTop:0},1200);}});}
jQuery(document).ready(function($){$('.begin_quiz').click(function(event){var $this=$(this);if(!$this.hasClass('begin_quiz'))
return;event.preventDefault();var quiz_id=$(this).attr('data-quiz');$this.prepend('<i class="fa fa-spinner animated spin"></i>');$.ajax({type:"POST",url:ajaxurl,data:{action:'begin_quiz',start_quiz:$('#start_quiz').val(),id:quiz_id},cache:false,success:function(html){$this.find('i').remove();$('.content').fadeOut("fast");$('.content').html(html);$('.content').fadeIn("fast");var ques=$($.parseHTML(html)).filter("#question");var q='#ques'+ques.attr('data-ques');if(typeof all_questions_json!='undefined'&&!$this.hasClass('continue')){$.each(all_questions_json,function(k,v){localStorage.removeItem('question_result_'+v);localStorage.removeItem(v);});}
var checkquestions=[];$('.quiz_question').each(function(){var qid=$(this).attr('data-qid');var value=localStorage.getItem(qid);if(value!=null){$('#ques'+qid).addClass('done');}else{var question_id={'id':qid};checkquestions.push(question_id);}});if(checkquestions.length){$.ajax({type:"POST",url:ajaxurl,data:{action:'check_unanswered_questions',id:quiz_id,questions:JSON.stringify(checkquestions),},cache:false,success:function(json){json=jQuery.parseJSON(json);$.each(json,function(i,item){$('#ques'+item.question_id).addClass('done');localStorage.setItem(item.question_id,item.value);});}});}
$('.quiz_timeline').find('.active').removeClass('active');$(q).addClass('active');$('#question').trigger('question_loaded');if(ques!='undefined'){$('.quiz_timer').trigger('activate');}
runnecessaryfunctions();$('.begin_quiz').each(function(){$(this).removeClass('begin_quiz');$(this).addClass('submit_quiz');$(this).text(vibe_course_module_strings.submit_quiz);if(!$(this).parent().find('.save_quiz_progress').length){$(this).after('<a class="save_quiz_progress button full"><span class="save_progress_wrap"><span class="save_progress_label">'+vibe_course_module_strings.save_quiz+'</span><span class="save_progress_bar"><span class="save_progress_inner"></span></span></span></a>');}});}});});});function save_question_answer(current,defferred,per,data){if(current<defferred.length&&all_questions_json.length>=per){console.log(current);if(defferred.length>100&&(defferred.length-current)>100){var record=0;while(record<9){$.ajax({type:"POST",url:ajaxurl,async:true,data:defferred[current],});current++;per++;record++;}}else if(defferred.length>50&&(defferred.length-current)>50){var record=0;while(record<4){$.ajax({type:"POST",url:ajaxurl,async:true,data:defferred[current],});current++;per++;record++;}}else if(defferred.length>10&&(defferred.length-current)>10){$.ajax({type:"POST",url:ajaxurl,async:true,data:defferred[current],});current++;per++;}
$.ajax({type:"POST",url:ajaxurl,data:defferred[current],cache:false,success:function(){per++;width=100*per/all_questions_json.length;setTimeout(function(){$('.save_progress_inner').css('width',width+'%');},per*100);if(all_questions_json.length==per){$('body').trigger('all_question_answers_saved',[{'trigger':data}]);}else{current++;save_question_answer(current,defferred,per,data);}}});}}
$('body').delegate('.save_quiz_progress','click',function(event){event.preventDefault();var $this=$(this);if($this.hasClass('loading'))
return;if(typeof all_questions_json!='undefined'){$this.addClass('loading');var quiz_id;var per=0;var width=0;var security;$this.find('.save_progress_inner').css('width',width+'%');if($('body').hasClass('single-quiz')){security=$('#start_quiz').val();quiz_id=$('.submit_quiz').attr('data-quiz');}else{security=$('#hash').val();quiz_id=$('#unit.quiz_title').attr('data-unit');}
var defferred=[];var current=0;if(all_questions_json.length){$.each(all_questions_json,function(i,item){var value=localStorage.getItem(item);if(value!=null){var data={action:'save_question_marked_answer',security:security,quiz_id:quiz_id,question_id:item,answer:value};defferred.push(data);}else{per++;width=100*per/all_questions_json.length
setTimeout(function(){$this.find('.save_progress_inner').css('width',width+'%');},100);}
if(all_questions_json.length==per){$this.find('.save_progress_label').text(vibe_course_module_strings.saved_quiz_progress);$this.addClass('done');$this.removeClass('loading');setTimeout(function(){$this.removeClass('done');$this.find('.save_progress_label').text(vibe_course_module_strings.save_quiz);},3000);}});save_question_answer(current,defferred,per,'save');}else{$this.find('.save_progress_inner').css('width','100%');$this.find('.save_progress_label').text(vibe_course_module_strings.saved_quiz_progress);$this.addClass('done');$this.removeClass('loading');setTimeout(function(){$this.removeClass('done');$this.find('.save_progress_label').text(vibe_course_module_strings.save_quiz);},3000);}}else{alert('No questions found in quiz !');}
$('body').on('all_question_answers_saved',function(event,data){$this.find('.save_progress_label').text(vibe_course_module_strings.saved_quiz_progress);$this.removeClass('loading');$this.addClass('done');if(data.trigger=='save'){setTimeout(function(){$this.removeClass('done');$this.find('.save_progress_label').text(vibe_course_module_strings.save_quiz);},3000);}});});$('body').delegate('.show_hint','click',function(event){event.preventDefault();$(this).toggleClass('active');$(this).parent().find('.hint').toggle(400);});$('body').delegate('.show_explaination','click',function(event){event.preventDefault();var $this=$(this);$this.toggleClass('active');$this.closest('li').find('.explaination').toggle();});$('body').delegate('.quiz_question','click',function(event){event.preventDefault();var $this=$(this);var quiz_id=$(this).attr('data-quiz');var ques_id=$(this).attr('data-qid');$this.prepend('<i class="fa fa-spinner animated spin"></i>');$('#ajaxloader').removeClass('disabled');$('#question').css('opacity',0.2);$.ajax({type:"POST",url:ajaxurl,data:{action:'quiz_question',start_quiz:$('#start_quiz').val(),quiz_id:quiz_id,ques_id:ques_id},cache:false,success:function(html){$this.find('i').remove();$('.content').html(html);$('#ajaxloader').addClass('disabled');$('#question').css('opacity',1);var ques=$($.parseHTML(html)).filter("#question");var q='#ques'+ques.attr('data-ques');$('.quiz_timeline').find('.active').removeClass('active');$(q).addClass('active');$('#question').trigger('question_loaded');$('.tip').tooltip();$('audio,video').each(function(){if($(this).parents('.flowplayer').length)return;$(this).mediaelementplayer()});if($('.timeline_wrapper').height()>$('.quiz_timeline').height()){console.log($('.timeline_wrapper').height()+' > '+$('.quiz_timeline').height());console.log($(q).position().top);var sctop=$('.quiz_timeline').scrollTop()+$(q).position().top-$('.quiz_timeline').height()/2+$(q).height()/2;$('.quiz_timeline').animate({scrollTop:sctop},'slow');}}});});$('body').delegate('#question','question_loaded',function(){runnecessaryfunctions();var $this=$(this);var question_id=$this.attr('data-ques');var marked_value=$this.find('#question_marked_answer'+question_id).val();var value=localStorage.getItem(question_id);if(value==null&&typeof marked_value!='undefined'&&marked_value.length){value=marked_value;localStorage.setItem(question_id,marked_value);if(!$('#ques'+question_id).hasClass('done'))
$('#ques'+question_id).addClass('done');}
if($(this).find('.question_options.truefalse').length){if(value!=null){$(this).find('input[value="'+value+'"]').attr('checked','checked');}
$('.question_options.truefalse').click(function(){$this=$('.question_options.truefalse');if($this.find('input[type="radio"]:checked').length)
$this.find('input[type="radio"]:checked').each(function(){value=$(this).val();localStorage.setItem(question_id,value);$('#ques'+question_id).addClass('done');});});}
if($(this).find('.question_options.single').length){if(value!=null){$(this).find('input[value="'+value+'"]').attr('checked','checked');}
$('.question_options.single,.question_options.survey').click(function(){$this=$('.question_options.single');if($this.find('input[type="radio"]:checked').length)
$this.find('input[type="radio"]:checked').each(function(){value=$(this).val();localStorage.setItem(question_id,value);$('#ques'+question_id).addClass('done');});});}
if($(this).find('.question_options.multiple').length){if(value!=null){var new_vals=value.split(',');$.each(new_vals,function(k,vals){$this.find('input[value="'+vals+'"]').prop("checked",true);});}
$('.question_options.multiple').click(function(){$this=$('.question_options.multiple');value='';if($this.find('input[type="checkbox"]:checked').length)
$this.find('input[type="checkbox"]:checked').each(function(){value=$(this).val()+','+value;});localStorage.setItem(question_id,value);$('#ques'+question_id).addClass('done');});}
if($this.find('.single_text').length){if(value!=null){$this.find('.single_text input[type="text"]').val(value);}}
$('.single_text input[type="text"]').on('keyup',function(){var value=$(this).val();localStorage.setItem(question_id,value);$('#ques'+question_id).addClass('done');});if($this.find('.vibe_fillblank').length){if(value!=null){if(value.indexOf('|')>=0){var result=value.split('|');$this.find('.vibe_fillblank').each(function(k,val){$(this).text(result[k]);});}else{$(this).find('.vibe_fillblank').text(value);}}}
$('.vibe_fillblank').on('keyup',function(){value='';$('.vibe_fillblank').each(function(){value+=$(this).text().trim();if(value!=null){value+='|';}});localStorage.setItem(question_id,value);$('#ques'+question_id).addClass('done');});if($this.find('.essay_text textarea').length){if(value!=null){$this.find('.essay_text textarea').val(value);}}
$('.essay_text textarea').on('keyup',function(){var value=$(this).val();localStorage.setItem(question_id,value);$('#ques'+question_id).addClass('done');});if($this.find('.vibe_select_dropdown').length){if(value!=null){if(value.indexOf('|')>=0){var result=value.split('|');$this.find('.vibe_select_dropdown').each(function(k,val){$(this).val(result[k]);});}else{$('.vibe_select_dropdown').val(value);}}else{$('.vibe_select_dropdown').val('');}
$('.vibe_select_dropdown').on('change',function(){var value='';$('.vibe_select_dropdown').each(function(){if(value){value+='|';}
value+=$(this).val();});localStorage.setItem(question_id,value);$('#ques'+question_id).addClass('done');});}
if($(this).find('.matchgrid_options li.match_option').length){$('.matchgrid_options li.match_option').each(function(){var id=$(this).attr('id');if(jQuery.isNumeric(id))
value+=id+',';});localStorage.setItem(question_id,value);}
jQuery('.question_options.sort').each(function(){if(value!=null){var new_vals=value.split(',');var $ul=$(".question_options"),$items=$(".question_options").children();for(var i=new_vals[new_vals.length-1];i>=0;i--){$ul.prepend($items.get(new_vals[i]-1));}}else{var defaultanswer='1';var lastindex=$('ul.question_options li').size();if(lastindex>1)
for(var i=2;i<=lastindex;i++){defaultanswer=defaultanswer+','+i;}
localStorage.setItem(question_id,defaultanswer);}
$('#comment').val(defaultanswer);$('#comment').trigger('change');jQuery('.question_options.sort').sortable({revert:true,cursor:'move',refreshPositions:true,opacity:0.6,scroll:true,containment:'parent',placeholder:'placeholder',tolerance:'pointer',update:function(event,ui){var order=$('.question_options.sort').sortable('toArray').toString();localStorage.setItem(question_id,order);$('#ques'+question_id).addClass('done');}}).disableSelection();});$(".live-edit").liveEdit({afterSaveAll:function(params){return false;}});if($('.question_options.match').length){$('.question_options.match').droppable({drop:function(event,ui){$(ui.draggable).removeAttr('style');$(this).addClass("ui-state-highlight").append($(ui.draggable))}});$('.question_options.match li').draggable({revert:"invalid",containment:'#question'});$(".matchgrid_options li").droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",drop:function(event,ui){childCount=$(this).find('li').length;$('#ques'+question_id).addClass('done');$(ui.draggable).removeAttr('style');if(childCount!=0){return;}
$(this).addClass("ui-state-highlight").append($(ui.draggable))
var value='';var a=[];$(this).parent().find('li.match_option').each(function(){var id=$(this).attr('id');if(jQuery.isNumeric(id))
a.push(id);});value=a.join(',');localStorage.setItem(question_id,value);}});var id;$('.matchgrid_options li').each(function(index,value){id=$('.matchgrid_options').attr('data-match'+index);$(this).append($('#'+id));$('#ques'+question_id).addClass('done');});if(value!=null){var new_vals=value.split(',');var $ul=$(".question_options.match"),$items=$(".question_options.match").children();for(var i=(new_vals.length-1);i>=0;i--){$('.matchgrid_options ul li').eq(i).append($items.get(new_vals[i]-1));}}}
var check_answer=localStorage.getItem('question_result_'+question_id);if(check_answer!=null){var json=$.parseJSON(check_answer);$('#question').after('<div class="question_wrapper"><div class="result"><div class="'+json.status+'"><span></span><strong>'+json.marks+'</strong></div></div></div>');if(json.correct){var jc=json.correct;jc=jc.split('|').join(' '+vibe_course_module_strings.And+' ');if(json.explanation){$('#question').append('<div class="checked_answer '+json.status+'"><strong>'+vibe_course_module_strings.correct_answer+' : '+jc+'<strong><br>'+vibe_course_module_strings.explanation+' : '+json.explanation+'</div>');}else{$('#question').append('<div class="checked_answer '+json.status+'"><strong>'+vibe_course_module_strings.correct_answer+' : '+jc+'<strong></div>');}}
var new_questions_json=new Array();;if($(all_questions_json).length){$.each(all_questions_json,function(i,val){if(val!=question_id){new_questions_json.push(val);}});all_questions_json=new_questions_json;}
setTimeout(function(){$('#ques'+question_id).addClass(json.status);$('#question').addClass(json.status);$('#question+.question_wrapper').addClass('loaded');},100);setTimeout(function(){$('#question').addClass('check_answer_loaded');},500);$('.check_question_answer').remove();}});jQuery(document).ready(function($){$('.quiz_timer').one('activate',function(){var qtime=parseInt($(this).attr('data-time'));var quiz_id=$(this).attr('data-quiz');var security=$('#start_quiz').val();var $timer=$(this).find('.timer');var $this=$(this);$timer.timer({'timer':qtime,'width':200,'height':200,'unit':$this.attr('data-unit'),'fgColor':vibe_course_module_strings.theme_color,'bgColor':vibe_course_module_strings.single_dark_color});var $timer=$(this).find('.timer');$timer.on('change',function(){var countdown=$this.find('.countdown');var val=parseInt($timer.attr('data-timer'));if(val>0){val--;$timer.attr('data-timer',val);var $text='';if(val>=10800){$text=Math.floor(val/3600)+':'+((Math.floor((val%3600)/60)<10)?'0'+Math.floor((val%3600)/60):Math.floor((val%3600)/60))+'';}else if(val>60){if($this.find('.timer_hours_labels').length){$this.find('.timer_hours_labels').remove();$this.find('.timer_mins_labels').toggle();}
$text=Math.floor(val/60)+':'+((parseInt(val%60)<10)?'0'+parseInt(val%60):parseInt(val%60))+'';}else{$text='00:'+((val<10)?'0'+val:val);}
countdown.html($text);}else{countdown.html(vibe_course_module_strings.timeout);if(!$('.submit_quiz').hasClass('triggerred')){var quiz_id=$('.submit_quiz').attr('data-quiz');var security=$('#start_quiz').val();$('.submit_quiz').addClass('triggerred');if(typeof all_questions_json!=='undefined'){wplms_submit_quiz(quiz_id,security);}}}});});$('.quiz_timer').one('deactivate',function(){var qtime=parseInt($(this).attr('data-time'));var $timer=$(this).find('.timer');var $this=$(this);$timer.knob({'readonly':true,'max':qtime,'width':200,'height':200,'fgColor':vibe_course_module_strings.theme_color,'bgColor':vibe_course_module_strings.single_dark_color,'thickness':0.2,'readonly':true});event.stopPropagation();});$('.quiz_timer').one('end',function(event){var qtime=parseInt($(this).attr('data-time'));var $timer=$(this).find('.timer');var $this=$(this);$timer.knob({'readonly':true,'max':qtime,'width':200,'height':200,'fgColor':vibe_course_module_strings.theme_color,'bgColor':vibe_course_module_strings.single_dark_color,'thickness':0.2,'readonly':true});event.stopPropagation();});$('.quiz_timer').each(function(){var qtime=parseInt($(this).attr('data-time'));var $timer=$(this).find('.timer');$timer.knob({'readonly':true,'max':qtime,'width':200,'height':200,'fgColor':vibe_course_module_strings.theme_color,'bgColor':vibe_course_module_strings.single_dark_color,'thickness':0.2,'readonly':true});if($(this).hasClass('start')){$('.quiz_timer').trigger('activate');}});jQuery('.question_options.sort').each(function(){var defaultanswer='1';var lastindex=$('ul.question_options li').size();if(lastindex>1)
for(var i=2;i<=lastindex;i++){defaultanswer=defaultanswer+','+i;}
$('#comment').val(defaultanswer);$('#comment').trigger('change');jQuery('.question_options.sort').sortable({revert:true,cursor:'move',refreshPositions:true,opacity:0.6,scroll:true,containment:'parent',placeholder:'placeholder',tolerance:'pointer',update:function(event,ui){var order=$('.question_options.sort').sortable('toArray').toString();$('#comment').val(order);$('#comment').trigger('change');}}).disableSelection();});$('.selectusers').each(function(){var $this=$(this);$this.select2({minimumInputLength:4,placeholder:$(this).attr('data-placeholder'),closeOnSelect:true,language:{inputTooShort:function(){return vibe_course_module_strings.enter_more_characters;}},ajax:{url:ajaxurl,type:"POST",dataType:'json',delay:250,data:function(term){return{action:'select_users',security:$('#bulk_action').val(),course:$('#add_student_to_course').attr('data-course'),q:term,}},processResults:function(data){return{results:data};},cache:true},templateResult:function(data){return'<img width="32" src="'+data.image+'">'+data.text;},templateSelection:function(data){return'<img width="32" src="'+data.image+'">'+data.text;},escapeMarkup:function(m){return m;}}).on('select2:open',function(){if($('.select2-container .select2-dropdown').hasClass('select2-dropdown--below')){var topmargin=45;$('.select2-container:not(.select2)').css('top','+='+topmargin+'px');}});});});$('body').on('click','.expand_message',function(event){event.preventDefault();$('.bulk_message').toggle('slow');});$('body').on('click','.expand_change_status',function(event){event.preventDefault();$('.bulk_change_status').toggle('slow');$('#status_action').on('change',function(){if($(this).val()==='finish_course'){$('#finish_marks').removeClass('hide');}else{$('#finish_marks').addClass('hide');}});});$('body').on('click','.expand_add_students',function(event){event.preventDefault();$('.bulk_add_students').toggle('slow');});$('body').on('click','.expand_assign_students',function(event){event.preventDefault();$('.bulk_assign_students').toggle('slow');});$('body').on('click','.extend_subscription_students',function(event){event.preventDefault();$('.bulk_extend_subscription_students').toggle('slow');});$('body').delegate('#send_course_message','click',function(event){event.preventDefault();var members=[];var $this=$(this);var defaultxt=$this.html();$this.html('<i class="fa fa-spinner animated spin"></i> '+vibe_course_module_strings.sending_messages);var i=0;$('.member').each(function(){if($(this).is(':checked')){members[i]=$(this).val();i++;}});$.ajax({type:"POST",url:ajaxurl,data:{action:'send_bulk_message',security:$('#bulk_action').val(),course:$this.attr('data-course'),sender:$('#sender').val(),all:$('#all_bulk_students:checked').val(),members:JSON.stringify(members),subject:$('#bulk_subject').val(),message:$('#bulk_message').val(),},cache:false,success:function(html){$('#send_course_message').html(html);setTimeout(function(){$this.html(defaultxt);},5000);}});});$('body').delegate('#add_student_to_course','click',function(event){event.preventDefault();var $this=$(this);var defaultxt=$this.html();var students=$('#student_usernames').val();if(students.length<=0){$('#add_student_to_course').html(vibe_course_module_strings.unable_add_students);setTimeout(function(){$this.html(defaultxt);},2000);return;}
$this.html('<i class="fa fa-spinner animated spin"></i>'+vibe_course_module_strings.adding_students);var i=0;$.ajax({type:"POST",url:ajaxurl,data:{action:'add_bulk_students',security:$('#bulk_action').val(),course:$this.attr('data-course'),members:students,},cache:false,success:function(html){if(html.length&&html!=='0'){$('#add_student_to_course').html(vibe_course_module_strings.successfuly_added_students);$('ul.course_students').prepend(html);$('ul.course_students #message').remove();}else{$('#add_student_to_course').html(vibe_course_module_strings.unable_add_students);}
$('.selectusers').select2('val','');setTimeout(function(){$this.html(defaultxt);},3000);}});});$('body').delegate('#download_stats','click',function(event){event.preventDefault();var $this=$(this);var defaultxt=$this.html();var i=0;var fields=[];$('.field:checked').each(function(){fields[i]=$(this).attr('id');i++;});if(i==0){$this.html(vibe_course_module_strings.select_fields);setTimeout(function(){$this.html(defaultxt);},13000);return false;}else{$this.html('<i class="fa fa-spinner animated spin"></i> '+vibe_course_module_strings.processing);$.ajax({type:"POST",url:ajaxurl,data:{action:'download_stats',security:$('#stats_security').val(),course:$this.attr('data-course'),fields:JSON.stringify(fields),type:$('#stats_students').val()},cache:false,success:function(html){$this.attr('href',html);$this.attr('id','download');$this.html(vibe_course_module_strings.download)}});}});$('body').delegate('#download_mod_stats','click',function(event){event.preventDefault();var $this=$(this);var defaultxt=$this.html();var i=0;var fields=[];$('.field:checked').each(function(){fields[i]=$(this).attr('id');i++;});if(i==0){$this.html(vibe_course_module_strings.select_fields);setTimeout(function(){$this.html(defaultxt);},13000);return false;}else{$this.html('<i class="fa fa-spinner animated spin"></i> '+vibe_course_module_strings.processing);$.ajax({type:"POST",url:ajaxurl,data:{action:'download_mod_stats',security:$('#stats_security').val(),type:$this.attr('data-type'),id:$this.attr('data-id'),fields:JSON.stringify(fields),select:$('#stats_students').val()},cache:false,success:function(html){$this.attr('href',html);$this.attr('id','download');$this.html(vibe_course_module_strings.download)}});}});$('body').delegate('#assign_course_badge_certificate','click',function(event){event.preventDefault();var members=[];var $this=$(this);var defaultxt=$this.html();$this.html('<i class="fa fa-spinner animated spin"></i> '+vibe_course_module_strings.processing);var i=0;$('.member').each(function(){if($(this).is(':checked')){members[i]=$(this).val();i++;}});$.ajax({type:"POST",url:ajaxurl,data:{action:'assign_badge_certificates',security:$('#bulk_action').val(),course:$this.attr('data-course'),members:JSON.stringify(members),assign_action:$('#assign_action').val(),},cache:false,success:function(html){$this.html(html);setTimeout(function(){$this.html(defaultxt);},5000);}});});$('body').delegate('#change_course_status','click',function(event){event.preventDefault();var members=[];var $this=$(this);var defaultxt=$this.html();$this.html('<i class="fa fa-spinner animated spin"></i> '+vibe_course_module_strings.processing);var i=0;$('.member').each(function(){if($(this).is(':checked')){members[i]=$(this).val();i++;}});$.ajax({type:"POST",url:ajaxurl,data:{action:'change_course_status',security:$('#bulk_action').val(),course:$this.attr('data-course'),members:JSON.stringify(members),status_action:$('#status_action').val(),data:$('#finish_marks').val()},cache:false,success:function(html){$this.html(html);setTimeout(function(){$this.html(defaultxt);},5000);}});});$('body').delegate('#extend_course_subscription','click',function(event){event.preventDefault();var members=[];var $this=$(this);var defaultxt=$this.html();$this.html('<i class="fa fa-spinner animated spin"></i> '+vibe_course_module_strings.processing);var i=0;$('.member').each(function(){if($(this).is(':checked')){members[i]=$(this).val();i++;}});$.ajax({type:"POST",url:ajaxurl,data:{action:'extend_course_subscription',security:$('#bulk_action').val(),course:$this.attr('data-course'),members:JSON.stringify(members),extend_amount:$('#extend_amount').val(),},cache:false,success:function(html){$this.html(html);setTimeout(function(){$this.html(defaultxt);},5000);}});});$('body').delegate('#mark-complete','media_loaded',function(event){event.preventDefault();if($(this).hasClass('tip')){$(this).addClass('disabled');}
var unit_id=$('#mark-complete').data('unit');$('.unit_content').find('audio,video').each(function(){var _player=this.player;var key='time_'+unit_id+'_'+_player.id;var playedtime=localStorage.getItem(key);var old=_player.media.setCurrentTime;if(playedtime!=null){old.apply(this,[playedtime]);}
_player.media.addEventListener('timeupdate',function(e){localStorage.setItem(key,_player.media.currentTime);},false);});});$('body').delegate('#mark-complete','media_complete',function(event){event.preventDefault();if($(this).hasClass('tip')){$(this).removeClass('disabled');$(this).removeClass('tip');$(this).tooltip('destroy');jQuery('.tip').tooltip();}});$('body').delegate('#mark-complete','click',function(event){event.preventDefault();if($(this).hasClass('disabled')){return false;}
var $this=$(this);var unit_id=$(this).attr('data-unit');$this.prepend('<i class="fa fa-spinner animated spin"></i>');$('body').find('.course_progressbar').removeClass('increment_complete');$.ajax({type:"POST",url:ajaxurl,data:{action:'complete_unit',security:$('#hash').val(),course_id:$('#course_id').val(),id:unit_id},cache:false,success:function(html){$this.find('i').remove();$this.html('<i class="icon-check"></i>');$('.course_timeline').find('.active').addClass('done');$('#mark-complete').addClass('disabled');if(html.length>0&&jQuery.isNumeric(html)){$('#next_unit').removeClass('hide');$('#next_unit').attr('data-unit',html);$('#next_quiz').removeClass('hide');$('#next_quiz').attr('data-unit',html);$('#unit'+html).find('a').addClass('unit');$('#unit'+html).find('a').attr('data-unit',html);}
$('body').find('.course_progressbar').trigger('increment');if(typeof unit!='undefined')
$('.unit_timer').trigger('finish');}});});$('.course_progressbar').on('increment',function(event){if($(this).hasClass('increment_complete')){event.stopPropagation();return false;}else{var total_units=parseInt($('.unit_line').length);var done_units=parseInt($('.unit_line.done').length);if(total_units==0){total_units=1;}
var per=parseFloat(done_units/total_units);newper=per*100;newper=newper.toFixed(2);if(newper>100||newper>(100-per))
newper=100;if(newper<0)
newper=0;$('.course_timeline').each(function(){if($(this).find('.unit_line').length==$(this).find('.done').length){newper=100;}
if($(this).find('.done').length==0){newper=0;}});$(this).find('.bar').css('width',newper+'%');$(this).find('.bar span').html(newper+'%');$(this).addClass('increment_complete');$(this).attr('data-value',newper);$.ajax({type:"POST",url:ajaxurl,async:true,data:{action:'record_course_progress',security:$('#hash').val(),course_id:$('#course_id').val(),progress:newper},cache:false,});}
event.stopPropagation();return false;});$('.course_progressbar').on('decrement',function(event){if($(this).hasClass('increment_complete')){event.stopPropagation();return false;}else{var iunit=parseFloat($(this).attr('data-increase-unit'));var per=parseFloat($(this).attr('data-value'));newper=per-iunit;newper=newper.toFixed(2);if(newper<0)
newper=0;$(this).find('.bar').css('width',newper+'%');$(this).find('.bar span').html(newper+'%');$(this).addClass('increment_complete');$(this).attr('data-value',newper);$.ajax({type:"POST",url:ajaxurl,async:true,data:{action:'record_course_progress',security:$('#hash').val(),course_id:$('#course_id').val(),progress:newper},cache:false,success:function(html){}});}
event.stopPropagation();return false;});jQuery(document).ready(function($){$('.showhide_indetails').click(function(event){event.preventDefault();$(this).find('i').toggleClass('icon-minus');$(this).parent().find('.in_details').toggle();});$('.ajax-certificate').each(function(){var $this=$(this);if($this.hasClass('certificate_image')){$this.magnificPopup({type:'image',gallery:{enabled:true},closeOnContentClick:false,closeBtnInside:false,fixedContentPos:true,mainClass:'mfp-no-margins mfp-with-zoom',image:{verticalFit:true,cursor:'mfp-zoom-out-cur',markup:'<div class="mfp-figure">'+'<div class="mfp-close"></div>'+'<div id="certificate">'+'<div class="extra_buttons">'+'<a href="#" class="certificate_close"><i class="fa fa-times"></i></a>'+'<a href="#" class="certificate_print"><i class="fa fa-print"></i></a>'+'<a href="#" class="certificate_pdf"><i class="fa fa-file-pdf-o"></i></a>'+'<a href="#" class="certificate_download"><i class="fa fa-download"></i></a>'+'<a href="https://www.facebook.com/share.php?u='+$(this).attr('href')+'" target="_blank"><i class="fa fa-facebook"></i></a>'+'<a href="https://twitter.com/share?url='+$(this).attr('href')+'" target="_blank"><i class="fa fa-twitter"></i></a>'+'</div>'+'<div id="certificate_image" class="mfp-img"></div>'+'<div class="mfp-bottom-bar">'+'<div class="mfp-title"></div>'+'<div class="mfp-counter"></div>'+'</div>'+'</div>'+'</div>',},callbacks:{open:function(){$('.extra_buttons').show();var mp=$.magnificPopup.instance;console.log(mp);var img=new Image();img.onload=function(){var canvas=document.createElement("canvas");canvas.width=this.width;canvas.height=this.height;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);var dataURL=canvas.toDataURL("image/jpeg");$('.certificate_pdf').click(function(){var doc=new jsPDF();doc.addImage(dataURL,'JPEG',0,0,this.width,this.height);doc.save('certificate.pdf');});}
img.src=$this.attr('href');}}});}else{$this.magnificPopup({type:'ajax',fixedContentPos:true,alignTop:false,preloader:false,midClick:true,removalDelay:300,showCloseBtn:false,mainClass:'mfp-with-zoom',callbacks:{parseAjax:function(mfpResponse){mfpResponse.data=$(mfpResponse.data).find('#certificate');},ajaxContentAdded:function(){var node=$('#certificate');if($('#certificate').find('.certificate.type-certificate').length){node=$('#certificate .certificate.type-certificate');}
if($('#certificate .certificate_content').attr('data-width').length){var certificate_width=$('#certificate .certificate_content').attr('data-width');var fullwidth=$(window).width();console.log(certificate_width+' vs '+fullwidth);var ratio=fullwidth/certificate_width;if(ratio>=1){ratio=1;}else{ratio=ratio-0.1;$('section#certificate').removeAttr('style');$('section#certificate').css('overflow','hidden');$('section#certificate').css('transform','scale('+ratio+')');node=$('section#certificate');node.removeAttr('style');}}
if(!$('section#certificate').hasClass('stopscreenshot')){$('.extra_buttons').hide();html2canvas(node,{backgrounnd:'#ffffff',onrendered:function(canvas){node.find('#certificate .certificate_content').removeAttr('style');var data=canvas.toDataURL("image/jpeg");if(ratio>=1){$('#certificate .certificate_content').html('<img src="'+data+'" width="'+$('#certificate .certificate_content').attr('data-width')+'" height="'+$('#certificate .certificate_content').attr('data-height')+'" />');}else{$('#certificate .certificate_content').html('<img src="'+data+'" />');}
$('#certificate').trigger('generate_certificate');$('.certificate_pdf').click(function(){var doc=new jsPDF();var width=210;var height=80;if($('#certificate .certificate_content').attr('data-width').length){height=Math.round(210*parseInt($('#certificate .certificate_content').attr('data-height'))/parseInt($('#certificate .certificate_content').attr('data-width')));}
doc.addImage(data,'JPEG',0,0,210,height);doc.save('certificate.pdf');});if($this.hasClass('regenerate_certificate')){$.ajax({type:"POST",url:ajaxurl,data:{action:'save_certificate_image',image:data,security:$this.attr('data-security'),user_id:$this.attr('data-user'),course_id:$this.attr('data-course')},cache:false,success:function(html){console.log(html);$('body').find('.certificate_download').attr('data-url',html);$('.extra_buttons').show();}});}}});}else{$('.extra_buttons').show();$('.certificate_pdf').hide();}},}});}});$('.ajax-badge').each(function(){var $this=$(this);var img=$this.find('img');$(this).magnificPopup({items:{src:'<div class="badge-popup"><img src="'+img.attr('src')+'" /><h3>'+$this.attr('title')+'</h3><strong>'+vibe_course_module_strings.for_course+' '+$this.attr('data-course')+'</strong></div>',type:'inline'},fixedContentPos:false,alignTop:false,preloader:false,midClick:true,removalDelay:300,showCloseBtn:false,mainClass:'mfp-with-zoom center-aligned'});});$('body').delegate('.print_unit','click',function(event){$('.unit_content').print();});$('body').delegate('.printthis','click',function(event){$(this).parent().print();});$('body').delegate('#certificate','generate_certificate',function(event){$(this).addClass('certificate_generated');});function PrintElem(elem){Popup($(elem).html());}
function Popup(data){var mywindow=window.open('','my div','height=800,width=1000');mywindow.document.head.innerHTML='<title>PressReleases</title><link rel="stylesheet" href="css/main.css" type="text/css" />';mywindow.document.body.innerHTML='<body>'+data+'</body>';mywindow.document.close();mywindow.focus();mywindow.print();mywindow.close();return true;}
$('body').delegate('.certificate_print','click',function(event){event.preventDefault();PrintElem('#certificate');});$('body').delegate('.certificate_download','click',function(event){event.preventDefault();var $this=$(this);if($(this).data('url')){var img=$(this).data('url');imgWindow=window.open(img,'imgWindow');}else{var img=$('#certificate img').attr('src');imgWindow=window.open(img,'imgWindow');}});$('body').delegate('.certificate_close','click',function(event){event.preventDefault();$.magnificPopup.close();});$('.widget_carousel').each(function(){var $this=$(this);var auto=false;if($this.hasClass('auto')){auto=true;}
$this.flexslider({animation:"slide",controlNav:false,directionNav:true,animationLoop:true,slideshow:auto,prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",});});$('body').delegate('.unit-page-links a','click',function(event){if($('body').hasClass('single-unit'))
return;event.preventDefault();var $this=$(this);$('#ajaxloader').removeClass('disabled');$('.unit_content').addClass("loading");$('#discussion').remove();$('.main_unit_content+.widget').remove();$(".main_unit_content").load($this.attr('href')+" .single_unit_content",function(){$('.unit_content').trigger('unit_traverse');$('body').trigger('unit_loaded');$('#ajaxloader').addClass('disabled');$('.unit_content').removeClass("loading");});$this.find('i').remove();$(".main_unit_content").trigger('unit_reload');});$('body').delegate('.pricing_course .drop label','click',function(){var labelText=$(this).find('.font-text').html();var value=$(this).attr('data-value');var parent=$(this).parent().parent();$(parent).find('.result').html(labelText);if($('.course_button').length){$('.course_button').attr('href',value);}});$('body').delegate('.pricing_course .result','click',function(){var parent=$(this).parent();$(parent).find('.drop').slideToggle('fast');});$('body').delegate('.pricing_course .drop','click',function(){var parent=$(this).parent();$(parent).find('.drop').slideUp('fast');});});$('.unit_content').on('unit_traverse',function(){runnecessaryfunctions();$('body,html').animate({scrollTop:0},1200);$('.unit-page-links').each(function(){if(!$('.page-link>span').length){var link_html=$('.page-link a').first().html();$('.page-link a').first().remove();$('.page-link').prepend(link_html);}});});$('body').delegate('.unit','click',function(event){event.preventDefault();if($(this).hasClass('disabled')){return false;}
var $this=$(this);var unit_id=$(this).attr('data-unit');if($this.prev().is('span')){$this.prev().addClass('loading');}else{$this.prepend('<i class="fa fa-spinner animated spin"></i>');}
$('#ajaxloader').removeClass('disabled');$('.unit_content').addClass("loading");$.ajax({type:"POST",url:ajaxurl,data:{action:'unit_traverse',security:$('#hash').val(),course_id:$('#course_id').val(),id:unit_id},cache:false,success:function(html){if($this.prev().is('span')){$this.prev().removeClass('loading');}else{$this.find('i').remove();}
$('#ajaxloader').addClass('disabled');$('.unit_content').removeClass("loading");$('.unit_content').html(html);var unit=$($.parseHTML(html)).filter("#unit");var u='#unit'+unit.attr('data-unit');$('.course_timeline').find('.active').removeClass('active');$(u).addClass('active');$('.unit_content').trigger('unit_traverse');runnecessaryfunctions();if($('.unit_wrap').hasClass('enable_comments')){$('.unit_content').trigger('load_comments');}
if(typeof unit!='undefined')
$('.unit_timer').trigger('activate');}});});$('body').delegate('.unit_content','load_comments',function(event){if($(this).find('.main_unit_content').hasClass('stop_notes')||$('body').hasClass('wp-fee-body'))
return;var unit_id=$('#unit').attr('data-unit');$('.unit_content p').each(function(index){if(!$(this).parents('.question').length){$(this).attr('data-section-id',index);$(this).append('<span id="c'+index+'" class="side_comment">+</span>');}});$('.unit_content .side_comment').on('click',function(event){event.preventDefault();if($('.unit_content').hasClass('open')){$('.unit_content').removeClass('open');}else{$('.unit_content').addClass('open');$('body').trigger('side_comments_open');}
event.stopPropagation();});$('body').on('side_comments_open',function(){$(document).on('click',function(e){console.log(e);if(!$(e.target).closest('.side_comments').length){$('.unit_content').removeClass('open');}});});$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:'get_unit_comment_count',security:$('#hash').val(),unit_id:unit_id,},cache:false,success:function(response){$.each(response,function(idx,obj){$('#'+obj.id).text(obj.count);});}});$('.side_comment').on('click',function(){if($(this).hasClass('active'))
return false;var $this=$(this);var section=$('.side_comment.active').attr('id');$('.side_comment').removeClass('active');$('.side_comments .main_comments>li:not(".hide")').remove();$(this).addClass('active');var id=$(this).attr('id');$('.add-comment').fadeIn();$('.add-comment').next().fadeOut();var check=$(this).text();var href="#";$('.side_comments .main_comments').find('.loaded').remove();if(jQuery.isNumeric(check)){var comment_html='';var cookie_id='unit_comments'+unit_id;var unit_comments=sessionStorage.getItem(cookie_id);if(unit_comments!==null){unit_comments=JSON.parse(unit_comments);$.each(unit_comments,function(idxx,objStr){$.each(objStr,function(idx,obj){if(id==idx){comment_html+='<li class="loaded"><div class="'+obj.type+' user'+obj.author.user_id+'" data-id="'+obj.ID+'"><img src="'+obj.author.img+'"><a href="'+obj.author.link+'" class="unit_comment_author">'+obj.author.name+'</a><div class="unit_comment_content">'+obj.content+'</div><ul class="actions" data-pid="'+$this.attr('id')+'">';jQuery.each(obj.controls,function(i,o){if(o>1){jQuery('.side_comments li.hide').find('.'+i).addClass('meta_info').attr('data-meta',o);}
var control=jQuery('.side_comments li.hide').find('.'+i).parent()[0].outerHTML;if(o>1){jQuery('.side_comments li.hide').find('.'+i).removeClass('meta_info').removeAttr('data-meta');}
comment_html+=control;});comment_html+='</ul></div></li>';href=$(comment_html).find('.popup_unit_comment').removeClass('meta_info').attr('data-href');href+='?unit_id='+unit_id+'&section='+idx;}});});$('.side_comments .main_comments').append(comment_html);$('.side_comments .main_comments .popup_unit_comment').attr('href',href);jQuery('.tip').tooltip();$('.popup_unit_comment').magnificPopup({type:'ajax',alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:'auto',closeBtnInside:true,preloader:false,midClick:true,removalDelay:300,mainClass:'my-mfp-zoom-in',callbacks:{parseAjax:function(mfpResponse){mfpResponse.data=$(mfpResponse.data).find('.content');}}});}else{section=$('.side_comment.active').attr('id');$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:'unit_section_comments',security:$('#hash').val(),unit_id:unit_id,section:section,num:$('.side_comment').length},cache:false,success:function(jsonStr){var cookie_value=JSON.stringify(jsonStr);sessionStorage.setItem(cookie_id,cookie_value);$.each(jsonStr,function(idxx,objStr){$.each(objStr,function(idx,obj){if(id==idx){comment_html+='<li class="loaded"><div class="'+obj.type+' user'+obj.author.user_id+'" data-id="'+obj.ID+'"><img src="'+obj.author.img+'"><a href="'+obj.author.link+'" class="unit_comment_author">'+obj.author.name+'</a><div class="unit_comment_content">'+obj.content+'</div><ul class="actions" data-pid="'+$this.attr('id')+'">';jQuery.each(obj.controls,function(i,o){if(o>1){jQuery('.side_comments li.hide').find('.'+i).addClass('meta_info').attr('data-meta',o);}
var control=jQuery('.side_comments li.hide').find('.'+i).parent()[0].outerHTML;if(o>1){jQuery('.side_comments li.hide').find('.'+i).removeClass('meta_info').removeAttr('data-meta');}
comment_html+=control;});comment_html+='</ul></div></li>';var href=$(comment_html).find('.popup_unit_comment').attr('href');href+='?unit_id='+unit_id+'&section='+idx;$(comment_html).find('.popup_unit_comment').attr('href',href);}});});$('.side_comments .main_comments').append(comment_html);jQuery('.tip').tooltip();$('.popup_unit_comment').magnificPopup({type:'ajax',alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:'auto',closeBtnInside:true,preloader:false,midClick:true,removalDelay:300,mainClass:'my-mfp-zoom-in',callbacks:{parseAjax:function(mfpResponse){mfpResponse.data=$(mfpResponse.data).find('.content');}}});}});}}
var all_href=$('#all_comments_link').attr('data-href');all_href+='?unit_id='+unit_id+'&section='+$('.side_comment.active').attr('id');$('#all_comments_link').attr('href',all_href);var top=$(this).offset().top;var content_top=$('#unit_content').offset().top;var height=$('.side_comments').height();var limit=$('.unit_prevnext').offset().top;if((top+height)>limit){top=limit-content_top-height;}else{top=top-content_top;}
if(top>0){$('.side_comments').css('top',top+'px');$('.side_comments').removeClass('scroll');}else{$('.side_comments').addClass('scroll');var h=$('.main_unit_content').height();$('.side_comments').css('height',h+'px');}});});jQuery(document).ready(function($){$('.add-comment').on('click',function(){$(this).fadeOut(0);$(this).next('.comment-form').fadeIn(100);});$('.new_side_comment').on('click',function(){if(!$(this).hasClass('cleared')){$(this).html('');$(this).addClass('cleared');$(this).parent().parent().addClass('active');$(this).parent().parent().parent().find('.add-comment').addClass('deactive');}});$('.remove_side_comment').on('click',function(){$(this).closest('.side_comments').find('.add-comment').fadeIn(100);$(this).closest('.comment-form').fadeOut();$('.new_side_comment').removeClass('cleared');$('.new_side_comment').text(vibe_course_module_strings.add_comment);});});$('body').delegate('.get_results_pagination','click',function(event){event.preventDefault();var $this=$(this);$this.append('<i class="fa fa-spinner"></i>');$.ajax({type:"POST",url:ajaxurl,data:{action:'get_results_page',security:$('#security').val(),type:$this.attr('data-type'),page:$this.text()},cache:false,success:function(html){$this.find('fa').remove();$this.parent().find('.current').removeClass('current');$this.addClass('current');$this.closest('.user_results').html(html);}});});$('body').delegate('.public_unit_comment','click',function(event){event.preventDefault();var $this=$(this);var id=$this.closest('li.loaded>div').attr('data-id');$.ajax({type:"POST",url:ajaxurl,data:{action:'public_user_comment',security:$('#hash').val(),id:id},cache:false,success:function(html){$this.removeClass('public_unit_comment');$this.addClass('private_unit_comment');$this.find('i').removeClass().addClass('icon-fontawesome-webfont-4');$this.attr('data-original-title',vibe_course_module_strings.private_comment);var unit_id=$('#unit').attr('data-unit');var cookie_id='unit_comments'+unit_id;sessionStorage.removeItem(cookie_id);}});});$('body').delegate('.private_unit_comment','click',function(event){event.preventDefault();var $this=$(this);var id=$this.closest('li.loaded>div').attr('data-id');$.ajax({type:"POST",url:ajaxurl,data:{action:'private_user_comment',security:$('#hash').val(),id:id},cache:false,success:function(html){$this.removeClass('private_unit_comment');$this.addClass('public_unit_comment');$this.find('i').removeClass().addClass('icon-fontawesome-webfont-3');$this.attr('data-original-title',vibe_course_module_strings.public_comment);var unit_id=$('#unit').attr('data-unit');var cookie_id='unit_comments'+unit_id;sessionStorage.removeItem(cookie_id);}});});$('body').delegate('.edit_unit_comment','click',function(event){event.preventDefault();var $this=$(this);var content=$this.parent().parent().parent();var form=$('.comment-form').first().clone();var img=content.find('img').clone();var unit_comment_author=content.find('.unit_comment_author').clone();var id=content.attr('data-id');form.find('img').replaceWith(function(){return img;});form.find('span').replaceWith(function(){return unit_comment_author;});var new_content=content.find('.unit_comment_content');form.find('.new_side_comment').html(new_content.html());form.find('.post_unit_comment').removeClass().addClass('edit_form_unit_comment').attr('data-id',id);form.find('.remove_side_comment').removeClass().addClass('remove_form_edit_unit_comment');content.parent().append(form);content.hide();content.parent().find('.comment-form').show();});$('body').delegate('.remove_form_edit_unit_comment','click',function(event){$(this).parent().parent().parent().parent().find('.note,.public').show();$(this).closest('.comment-form').remove();$('.new_side_comment').removeClass('cleared');});$('body').delegate('.reply_unit_comment','click',function(event){event.preventDefault();var parent_li=$(this).parent().parent().parent().parent();var $this=$(this);if($(this).hasClass('meta_info')){var id=$(this).attr('data-meta');$.ajax({type:"POST",url:ajaxurl,data:{action:'get_user_reply',security:$('#hash').val(),id:id},cache:false,success:function(html){if(!jQuery.isNumeric(html)){parent_li.after(html);$this.removeClass('reply_unit_comment');}}});}else{$('.add-comment').trigger('click');$('.comment-form').addClass('creply');$('.comment-form').attr('data-cid',$(this).closest('.actions').parent().attr('data-id'));}});$('body').delegate('.instructor_reply_unit_comment','click',function(event){event.preventDefault();if($(this).hasClass('call'))
return false;var $ithis=$(this);var message=$ithis.parent().parent().parent().find('.unit_comment_content').html();var unit_id=$('#unit').attr('data-unit');$.ajax({type:"POST",url:ajaxurl,data:{action:'instructor_reply_user_comment',security:$('#hash').val(),message:message,id:unit_id,course_id:$('#course_id').val(),section:$('.side_comment.active').attr('id')},cache:false,success:function(html){$ithis.addClass('call');}});});$('body').delegate('.edit_form_unit_comment','click',function(event){event.preventDefault();var $new_this=$(this);var id=$new_this.attr('data-id');var new_content=$('.new_side_comment').html();$.ajax({type:"POST",url:ajaxurl,data:{action:'edit_user_comment',security:$('#hash').val(),content:new_content,id:id},cache:false,success:function(html){var unit_id=$('#unit').attr('data-unit');var cookie_id='unit_comments'+unit_id;sessionStorage.removeItem(cookie_id);var new_parent=$new_this.closest('.comment-form').prev().parent();new_parent.find('.unit_comment_content').html(new_content);$new_this.closest('.comment-form').remove();new_parent.find('.note,.public').show();}});});$('body').delegate('.remove_unit_comment','click',function(event){event.preventDefault();var $this=$(this);var id=$this.parent().parent().closest('li>div').attr('data-id');var note=$this.parent().parent().closest('li>div').parent();$this.addClass('animated spin');$.confirm({text:vibe_course_module_strings.remove_comment,confirm:function(){$.ajax({type:"POST",url:ajaxurl,data:{action:'remove_user_comment',security:$('#hash').val(),id:id},cache:false,success:function(html){$this.removeClass('animated');$this.removeClass('spin');note.remove();var cid=$this.closest('.actions').attr('data-pid');var count=parseInt($('#'+cid).text());count--;$('#'+cid).text(count);$this.closest('li.loaded').fadeOut(200,function(){$(this).remove();});var unit_id=$('#unit').attr('data-unit');var cookie_id='unit_comments'+unit_id;$('.new_side_comment').removeClass('cleared');sessionStorage.removeItem(cookie_id);}});},cancel:function(){$this.removeClass('animated');$this.removeClass('spin');},confirmButton:vibe_course_module_strings.remove_comment_button,cancelButton:vibe_course_module_strings.cancel});});$('body').delegate('.post_unit_comment','click',function(event){event.preventDefault();if($(this).hasClass('disabled')){return false;}
var reply=0;if($(this).closest('.comment-form').hasClass('creply')){reply=$(this).closest('.comment-form').attr('data-cid');}
var $this=$(this);var section=$('.side_comment.active').attr('id');var unit_id=$('#unit').attr('data-unit');var list=$this.closest('.side_comments').find('ul.main_comments');var list_html=list.find('li.hide').clone();var content=$(this).closest('.comment-form').find('.new_side_comment').html();var cookie_id='unit_comments'+unit_id;$this.addClass('disabled');$.ajax({type:"POST",url:ajaxurl,data:{action:'post_unit_comment',security:$('#hash').val(),course_id:$('#course_id').val(),unit_id:unit_id,content:content,section:section,reply:reply},cache:false,success:function(id){$this.removeClass('disabled');if(jQuery.isNumeric(id)){var cookie_id='unit_comments'+unit_id;var unit_comments=$.cookie(cookie_id);var comment={section:{'content':content,'type':'note','author':{'img':list_html.find('img').attr('src'),'name':list_html.find('.unit_comment_author').text(),'link':list_html.find('.unit_comment_author').attr('href'),},'controls':{'edit_unit_comment':1,'public_unit_comment':1,'instructor_reply_unit_comment':1,'popup_unit_comment':1,'remove_unit_comment':1}}};sessionStorage.removeItem(cookie_id);list_html.find('.unit_comment_content').html(content);list_html.find('.note').attr('data-id',id);list_html.removeClass();list_html.find('.actions .private_unit_comment').parent().remove();list.append(list_html);var href=$(list_html).find('.popup_unit_comment').attr('data-href');href+='?unit_id='+unit_id+'&section='+$('.side_comment.active').attr('id');$(list_html).find('.popup_unit_comment').attr('href',href);jQuery('.tip').tooltip();var count=$('#'+section).text();if(jQuery.isNumeric(count)){count=parseInt(count)+1;}else{count=1;}
$('.new_side_comment').removeClass('cleared');$('#'+section).text(count);$('.add-comment').fadeIn();$('.comment-form').removeClass('active').fadeOut();$('.new_side_comment').text(vibe_course_module_strings.add_comment);$('.popup_unit_comment').magnificPopup({type:'ajax',alignTop:true,fixedContentPos:true,fixedBgPos:true,overflowY:'auto',closeBtnInside:true,preloader:false,midClick:true,removalDelay:300,mainClass:'my-mfp-zoom-in',callbacks:{parseAjax:function(mfpResponse){mfpResponse.data=$(mfpResponse.data).find('.content');}}});}else{$this.closest('.comment-form').append('<div class="error">'+id+'</div>');}}});});$('body').delegate('.note-tabs li','click',function(event){event.preventDefault();$(this).parent().find('.selected').removeClass('selected');$(this).addClass('selected');var action=$(this).attr('id');$.ajax({type:"POST",url:ajaxurl,data:{action:action,security:$('#hash').val(),unit_id:$.urlParam('unit_id'),section:$.urlParam('section')},cache:false,success:function(html){$('.content').html(html);$(".live-edit").liveEdit({afterSaveAll:function(params){return false;}});}});});$('body').delegate('#load_more_notes','click',function(event){var json=$('#notes_query').html();$.ajax({type:"POST",url:ajaxurl,data:{action:'load_more_notes',security:$('#hash').val(),json:json},cache:false,success:function(html){if(jQuery.isNumeric(html)){$('#load_more_notes').hide();}else{var newjson=$(html).filter('#new_notes_query').html();$('#notes_query').html(newjson);$('#notes_discussions .notes_list').append(html);$('#new_notes_query').remove();}
$(".live-edit").liveEdit({afterSaveAll:function(params){return false;}});}});});jQuery(document).ready(function($){jQuery('.course_curriculum.accordion .course_section').click(function(event){jQuery(this).toggleClass('show');jQuery(this).nextUntil('.course_section','.unit_description').hide(100);jQuery(this).nextUntil('.course_section','.course_lesson').toggleClass('show');});jQuery('.unit_description_expander').each(function(){var course_lesson=$(this).closest('.course_lesson');if(!course_lesson.next('.unit_description').length){$(this).remove();}else{jQuery(this).on('click',function(){course_lesson.next('.unit_description').toggle(200);});}});jQuery('.course_timeline.accordion .section').on('click',function(event){jQuery(this).toggleClass('show');jQuery(this).nextUntil('.section').toggleClass('show');});jQuery('.course_timeline.accordion').each(function(){var $this=$(this);var prevSections=$this.find('.unit_line.active').prevUntil('.section');prevSections.prev().trigger('click');});$('body').delegate('.retake_submit','click',function(){var $this=$(this);$.confirm({text:vibe_course_module_strings.confirm_course_retake,confirm:function(){$this.parent().submit();},cancel:function(){},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});});$('.unit_content').on('unit_traverse',function(){var section=$('.course_timeline.accordion').find('.unit_line.active').prev('li.section');if($('.course_timeline.accordion').find('.unit_line.active').prev().hasClass('section')){jQuery('.course_timeline.accordion .section.show').trigger('click');}
$('.unit_content').find('audio,video').each(function(){if(typeof this.player!=="undefined"){$('#mark-complete').trigger('media_loaded');}
this.addEventListener('ended',function(e){$('#mark-complete').trigger('media_complete');});});if(!section.hasClass('show')){section.trigger('click');}});});$('.unit_content').on('unit_traverse',function(){$('.inquiz_timer').each(function(){$('.inquiz_timer').one('activate',function(){var qtime=parseInt($(this).attr('data-time'));var $timer=$(this).find('.timer');var $this=$(this);$timer.timer({'timer':qtime,'width':72,'height':72,'fgColor':vibe_course_module_strings.theme_color});$timer.on('change',function(){var countdown=$this.find('.countdown');var val=parseInt($timer.attr('data-timer'));if(val>0){val--;$timer.attr('data-timer',val);var $text='';if(val>=10800){$text=Math.floor(val/3600)+':'+((Math.floor((val%3600)/60)<10)?'0'+Math.floor((val%3600)/60):Math.floor((val%3600)/60))+'';}else if(val>60){$text=Math.floor(val/60)+':'+((parseInt(val%60)<10)?'0'+parseInt(val%60):parseInt(val%60))+'';}else{$text='00:'+((val<10)?'0'+val:val);}
countdown.html($text);}else{countdown.html(vibe_course_module_strings.timeout);if(!$('.submit_inquiz').hasClass('triggerred')){$('.submit_inquiz').addClass('triggerred');if(typeof all_questions_json!=='undefined'){wplms_submit_inquiz();$timer.knob({'readonly':true,'max':0,'width':72,'height':72,'fgColor':vibe_course_module_strings.theme_color,'readonly':true});}}
$('.inquiz_timer').trigger('deactivate');}});});$('.inquiz_timer').one('deactivate',function(event){var qtime=0;var $timer=$(this).find('.timer');var $this=$(this);$timer.knob({'readonly':true,'max':qtime,'width':72,'height':72,'fgColor':vibe_course_module_strings.theme_color,'readonly':true});event.stopPropagation();});var qtime=parseInt($(this).attr('data-time'));var $timer=$(this).find('.timer');$timer.knob({'readonly':true,'max':qtime,'width':72,'height':72,'fgColor':vibe_course_module_strings.theme_color,'thickness':0.1,'readonly':true});if($(this).hasClass('start')){$('.inquiz_timer').trigger('activate');}});});$('body').delegate('.unit_button.start_quiz','click',function(event){event.preventDefault();var $this=$(this);$('#ajaxloader').removeClass('disabled');$('#unit_content').addClass('loading');if($this.hasClass('continue')){$.ajax({type:"POST",url:ajaxurl,data:{action:'in_start_quiz',security:$('#hash').val(),quiz_id:$('#unit.quiz_title').attr('data-unit'),},cache:false,success:function(html){$('.main_unit_content').html(html);$('.in_quiz').trigger('question_loaded');$this.removeClass('start_quiz continue');$this.attr('href','#');$this.addClass('submit_inquiz');runnecessaryfunctions();$('body,html').animate({scrollTop:0},1200);$this.text(vibe_course_module_strings.submit_quiz);$this.after('<a class="save_quiz_progress"><span class="save_progress_wrap"><span class="save_progress_label">'+vibe_course_module_strings.save_quiz+'</span><span class="save_progress_bar"><span class="save_progress_inner"></span></span></span></a>');$('.quiz_title .inquiz_timer').trigger('activate');$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');$('.quiz_meta').trigger('progress_check');}});}else{$.confirm({text:vibe_course_module_strings.start_quiz_notification,confirm:function(){$.ajax({type:"POST",url:ajaxurl,data:{action:'in_start_quiz',security:$('#hash').val(),quiz_id:$('#unit.quiz_title').attr('data-unit'),},cache:false,success:function(html){$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');$('.main_unit_content').html(html);$('.in_quiz').trigger('question_loaded');$this.removeClass('start_quiz');if($('.quiz_meta').hasClass('show_progress')&&$(all_questions_json).length){$('.quiz_meta.show_progress').attr('data-progress-ques',JSON.stringify(all_questions_json));}
$('body,html').animate({scrollTop:0},1200);$this.attr('href','#');$this.addClass('submit_inquiz');runnecessaryfunctions();$this.text(vibe_course_module_strings.submit_quiz);$this.after('<a class="save_quiz_progress"><span class="save_progress_wrap"><span class="save_progress_label">'+vibe_course_module_strings.save_quiz+'</span><span class="save_progress_bar"><span class="save_progress_inner"></span></span></span></a>');$('.quiz_title .inquiz_timer').trigger('activate');$('.quiz_meta').trigger('progress_check');}});},cancel:function(){$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});}});$('body').delegate('.unit_button.submit_inquiz','click',function(event){event.preventDefault();var $this=$(this);var answers=[];$('#ajaxloader').removeClass('disabled');$('#unit_content').addClass('loading');if(typeof all_questions_json!=='undefined'){var unanswered_flag=0;if(all_questions_json.length){$.each(all_questions_json,function(key,value){var ans=localStorage.getItem(value);if(ans){var answer={'id':value,'value':ans};answers.push(answer);}else{unanswered_flag++;}});if(unanswered_flag){$.confirm({text:vibe_course_module_strings.unanswered_questions,confirm:function(){$.confirm({text:vibe_course_module_strings.submit_quiz_notification,confirm:function(){wplms_submit_inquiz();},cancel:function(){$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});},cancel:function(){$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');return false;},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});}else{$.confirm({text:vibe_course_module_strings.submit_quiz_notification,confirm:function(){wplms_submit_inquiz();},cancel:function(){$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');},confirmButton:vibe_course_module_strings.confirm,cancelButton:vibe_course_module_strings.cancel});}}else{$('.save_progress_inner').css('width','100%');end_inquiz_submission();}}else{$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');alert(vibe_course_module_strings.submit_quiz_error);}});$('body').delegate('.in_quiz .pagination ul li a.quiz_page','click',function(event){event.preventDefault();var $this=$(this);var page=$(this).text();$('#ajaxloader').removeClass('disabled');$('#unit_content').addClass('loading');$.ajax({type:"POST",url:ajaxurl,data:{action:'in_start_quiz',security:$('#hash').val(),quiz_id:$('#unit.quiz_title').attr('data-unit'),page:page},cache:false,success:function(html){$('#ajaxloader').addClass('disabled');$('#unit_content').removeClass('loading');$('.main_unit_content').html(html);$('.in_quiz').trigger('question_loaded');$this.removeClass('start_quiz');$this.addClass('submit_quiz');runnecessaryfunctions();$this.text(vibe_course_module_strings.submit_quiz);$this.after('<a class="save_quiz_progress"><span class="save_progress_wrap"><span class="save_progress_label">'+vibe_course_module_strings.save_quiz+'</span><span class="save_progress_bar"><span class="save_progress_inner"></span></span></span></a>');$('body,html').animate({scrollTop:0},1200);}});});$('body').delegate('.in_quiz','question_loaded',function(){runnecessaryfunctions();$('.quiz_meta').trigger('progress_check');if($('.matchgrid_options').hasClass('saved_answer')){var id;$('.matchgrid_options li').each(function(index,value){id=$('.matchgrid_options').attr('data-match'+index);$(this).append($('#'+id));});}
jQuery('.in_question .question_options.sort').each(function(){var defaultanswer='1';var lastindex=$('ul.question_options li').size();if(lastindex>1)
for(var i=2;i<=lastindex;i++){defaultanswer=defaultanswer+','+i;}
jQuery(this).sortable({revert:true,cursor:'move',refreshPositions:true,opacity:0.6,scroll:true,containment:'parent',placeholder:'placeholder',tolerance:'pointer',update:function(event,ui){var order=$('.question_options.sort').sortable('toArray').toString();var id=$(this).parent().attr('data-ques');localStorage.setItem(id,order);$('.quiz_meta').trigger('progress_check');}}).disableSelection();});$(".live-edit").liveEdit({afterSaveAll:function(params){return false;}});$('.vibe_fillblank').on('keyup',function(){value='';$(this).closest('.in_question').find('.vibe_fillblank').each(function(){value+=$(this).text().trim();if(value!=null){value+='|';}});var id=$(this).closest('.in_question').attr('data-ques');localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');});$('.in_question .question_options.match').each(function(){$(this).droppable({drop:function(event,ui){$(ui.draggable).removeAttr('style');$(this).addClass("ui-state-highlight").append($(ui.draggable))}});$(this).find('li').draggable({revert:"invalid",containment:$(this).parent()});});$(".matchgrid_options li").droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",drop:function(event,ui){childCount=$(this).find('li').length;$(ui.draggable).removeAttr('style');if(childCount!=0){return;}
$(this).addClass("ui-state-highlight").append($(ui.draggable));var value='';$(this).parent().find('li.match_option').each(function(){var id=$(this).attr('id');if(jQuery.isNumeric(id))
value+=id+',';});var id=$(this).closest('.in_question').attr('data-ques');localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');}});$('.question.largetext+textarea').on('keyup',function(){var value=$(this).val();var id=$(this).closest('.in_question').attr('data-ques');localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');});$('.question.smalltext+input').on('keyup',function(){var value=$(this).val();var id=$(this).closest('.in_question').attr('data-ques');localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');});$('.vibe_select_dropdown').on('change',function(){var id=$(this).closest('.in_question').attr('data-ques');var value='';$(this).closest('.in_question').find('.vibe_select_dropdown').each(function(){console.log('->'+value);if(value){value+='|';}
value+=$(this).val();});localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');});$('.question_options.truefalse li').click(function(){var id=$(this).find('input:checked').attr('name');var value=$(this).find('input:checked').val();localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');});$('.question_options.single li,.question_options.survey li').click(function(){var id=$(this).find('input:checked').attr('name');var value=$(this).find('input:checked').val();localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');});$('.question_options.multiple li').click(function(){var iclass=$(this).find('input:checked').attr('class');var id=$(this).closest('.in_question').attr('data-ques');var value='';$(this).parent().find('input:checked').each(function(){value+=$(this).val()+',';});localStorage.setItem(id,value);$('.quiz_meta').trigger('progress_check');});});$('body').delegate('.in_quiz','question_loaded',function(){if(typeof questions_json!=='undefined'){$.each(questions_json,function(key,value){$('.in_question[data-ques='+value+']').each(function(){var $this=$(this);var type=$(this).find('.question').attr('class');switch(type){case'question match':var sval=localStorage.getItem(value);if(sval!==null){var new_vals=sval.split(',');$.each(new_vals,function(k,vals){if($.isNumeric(vals))
$this.find('.matchgrid_options>ul>li').eq(k).append($('#'+vals+'.ques'+value));});}
break;case'question sort':var sval=localStorage.getItem(value);if(sval!==null){var new_vals=sval.split(',');$.each(new_vals,function(k,vals){if($.isNumeric(vals))
$this.find('.question_options.sort>li#'+vals+'.ques'+value).remove().appendTo('.question_options.sort');});}
break;case'question survey':case'question single':var sval=localStorage.getItem(value);if(sval!==null)
$(this).find('input[value="'+sval+'"]').prop("checked",true);break;case'question multiple':var sval=localStorage.getItem(value);if(sval!==null){var new_vals=sval.split(',');$.each(new_vals,function(k,vals){$this.find('input[value="'+vals+'"]').prop("checked",true);});}
break;case'question select':var saved=localStorage.getItem(value);if(saved!=='null'&&saved){if(saved.indexOf('|')>=0){var result=saved.split('|');$(this).find('select').each(function(k,val){$(this).val(result[k]);});}else{$(this).find('select').val(localStorage.getItem(value));}}else{$('.vibe_select_dropdown').val('');}
break;case'question truefalse':var sval=localStorage.getItem(value);if(sval!==null)
$(this).find('input[value="'+sval+'"]').prop("checked",true);break;case'question fillblank':var saved=localStorage.getItem(value);if(saved!=='null'&&saved){if(saved.indexOf('|')>=0){var result=saved.split('|');$(this).find('.vibe_fillblank').each(function(k,val){$(this).text(result[k]);});}else{$(this).find('.vibe_fillblank').text(saved);}}
break;case'question smalltext':$(this).find('input').val(localStorage.getItem(value));break;case'question largetext':$(this).find('textarea').val(localStorage.getItem(value));break;}});var question_id=value;var check_answer=localStorage.getItem('question_result_'+question_id);if(check_answer!=null){var json=$.parseJSON(check_answer);$('.in_question[data-ques="'+question_id+'"]').addClass(json.status);$('.in_question[data-ques="'+question_id+'"]').append('<div class="question_wrapper loaded"><div class="result"><div class="'+json.status+'"><span></span><strong>'+json.marks+'</strong></div></div></div>');if(json.correct){var jc=json.correct;jc=jc.split('|').join(' '+vibe_course_module_strings.And+' ');if(json.explanation){$('.in_question[data-ques="'+question_id+'"]').append('<div class="checked_answer '+json.status+'"><strong>'+vibe_course_module_strings.correct_answer+' : '+jc+'<strong><br>'+vibe_course_module_strings.explanation+' : '+json.explanation+'</div>');}else{$('.in_question[data-ques="'+question_id+'"]').append('<div class="checked_answer '+json.status+'"><strong>'+vibe_course_module_strings.correct_answer+' : '+jc+'<strong></div>');}}
var new_questions_json=new Array();if($(all_questions_json).length){$.each(all_questions_json,function(i,val){if(val!=question_id){new_questions_json.push(val);}});all_questions_json=new_questions_json;}
$('.in_question[data-ques="'+question_id+'"] .check_question_answer').remove();setTimeout(function(){$('.in_question[data-ques="'+question_id+'"]').addClass('check_answer_loaded');},100);}});}});$('body').delegate('.quiz_meta','progress_check',function(){if(typeof all_progress_json!=='undefined'){var num=all_progress_json.length;var progress=0;$.each(all_progress_json,function(key,value){if(localStorage.getItem(value)!==null){progress++;}});if(!$('.quiz_meta').hasClass('show_progress')){$('.quiz_meta').addClass('show_progress');}
$('.quiz_meta i span').text(progress+'/'+num);var percentage=Math.round(100*(progress/num));$('.quiz_meta .progress .bar').css('width',percentage+'%');}});$(document).ready(function($){$('.unit_content').on('unit_traverse',function(){$('.question').each(function(){var $this=$(this);jQuery('.question_options.sort').each(function(){jQuery(this).sortable({revert:true,cursor:'move',refreshPositions:true,opacity:0.6,scroll:true,containment:'parent',placeholder:'placeholder',tolerance:'pointer',}).disableSelection();});$(".live-edit").liveEdit({afterSaveAll:function(params){return false;}});$('.question_options.match').droppable({drop:function(event,ui){$(ui.draggable).removeAttr('style');$(this).addClass("ui-state-highlight").append($(ui.draggable))}});$('.question_options.match li').draggable({revert:"invalid",containment:'#question'});$(".matchgrid_options li").droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",drop:function(event,ui){childCount=$(this).find('li').length;$(ui.draggable).removeAttr('style');if(childCount!=0){return;}
$(this).addClass("ui-state-highlight").append($(ui.draggable))}});});});$('body').delegate('.check_answer','click',function(){var $this=$(this).closest('.question');$this.find('.message').remove();var id=$(this).attr('data-id');var answers=eval('ans_json'+id);var value;switch(answers['type']){case'truefalse':case'single':case'sort':case'match':value='';if($this.find('input[type="radio"]:checked').length){value=$this.find('input[type="radio"]:checked').val();}
$this.find('.question_options.sort li.sort_option').each(function(){var id=$(this).attr('id');if(jQuery.isNumeric(id))
value+=id+',';});$this.find('.matchgrid_options li.match_option').each(function(){var id=$(this).attr('id');if(jQuery.isNumeric(id))
value+=id+',';});if(answers['type']=='sort'||answers['type']=='match'){value=value.slice(0,-1);}
answers['answer']=answers['answer'].toLowerCase();if(value==answers['answer']){$this.append('<div class="message success">'+vibe_course_module_strings.correct+'</div>');}else{$this.append('<div class="message error">'+vibe_course_module_strings.incorrect+'</div>');}
break;case'smalltext':case'fillblank':case'select':value='';if($this.find('input.ques').length){value=$this.find('input.ques').val();}else if($this.find('.vibe_fillblank').length){var textValues=$this.find('.vibe_fillblank').map(function(){return $(this).text();}).get();value=textValues.join('|');}else if($this.find('select').length){var textValues=$this.find('select').map(function(){return $(this).val();}).get();value=textValues.join('|');}
value=value.toLowerCase();if(value==answers['answer']){$this.append('<div class="message success">'+vibe_course_module_strings.correct+'</div>');}else{var temp=new Array();var temp2=new Array();value2=new Array();temp=answers['answer'].split("|");var check=false;$.each(temp,function(key,val){value2=value.split("|");if(typeof value2[key]==='undefined'||value2[key]==''){check=false;}
if(val.search(',')){temp2=val.split(",");}
if($.inArray(value2[key],temp2)!='-1'){check=true;}else{check=false;return false;}});if(check){$this.append('<div class="message success">'+vibe_course_module_strings.correct+'</div>');}else{$this.append('<div class="message error">'+vibe_course_module_strings.incorrect+'</div>');}}
break;case'multiple':var temp=1;if($this.find('input[type="checkbox"]:checked').length){if($this.find('input[type="checkbox"]:checked').length==answers['answer'].length){$this.find('input[type="checkbox"]:checked').each(function(){if($.inArray($(this).val(),answers['answer'])==-1){$this.append('<div class="message error">'+vibe_course_module_strings.incorrect+'</div>');temp=0;return false;}});if(temp==1)
$this.append('<div class="message success">'+vibe_course_module_strings.correct+'</div>');}else{$this.append('<div class="message error">'+vibe_course_module_strings.incorrect+'</div>');}}
break;}});$('.unit_content').on('unit_traverse',function(){$('#discussion').each(function(){var $this=$(this);$('.add_comment').click(function(){$('.add_unit_comment_text').toggleClass('hide');});$('body').delegate('.unit_content .commentlist li .reply','click',function(){var $reply=$(this);$reply.addClass('hide');$('.unit_content .commentlist li .add_unit_comment_text').remove();var form=$('#add_unit_comment').clone().removeClass('hide').attr('id','').appendTo($reply.parent());form.find('.post_question').attr('data-parent',$reply.parent().parent().parent().attr('data-id'));form.find('.post_question').addClass('comment_reply').text($reply.text());form.find('.post_question').removeClass('post_question');$('#discussion').trigger('ready');});$('body').delegate('.unit_content .commentlist li .cancel','click',function(e){if($(this).parent().parent().find('.reply').length){$(this).parent().parent().find('.reply').removeClass('hide');$(this).parent().parent().find('.add_unit_comment_text').remove();}});$('#add_unit_comment .cancel').click(function(){$('#add_unit_comment').addClass('hide');});$('.post_question').on('click',function(e){e.preventDefault();var textarea=$(this).parent().find('textarea');var val=textarea.val();$this.addClass('loading');if(val.length){$.ajax({type:"POST",url:ajaxurl,data:{action:'add_unit_comment',security:$('#hash').val(),text:val,unit_id:$this.attr('data-unit')},cache:false,success:function(html){$this.removeClass('loading');if(html.indexOf('<li')==0){$this.find('ol.commentlist').append(html);textarea.val('');$('.add_unit_comment_text').addClass('hide');}else{$this.append(html);}}});}else{$this.append('<div class="message">'+vibe_course_module_strings.incorrect+'</div>');}});$('#discussion').on('ready',function(){$('.comment_reply').on('click',function(e){e.preventDefault();var textarea=$(this).parent().find('textarea');var val=textarea.val();var parent=$(this).attr('data-parent');$this.addClass('loading');if(val.length){$.ajax({type:"POST",url:ajaxurl,data:{action:'add_unit_comment',security:$('#hash').val(),text:val,parent:parent,unit_id:$this.attr('data-unit')},cache:false,success:function(html){$this.removeClass('loading');if(html.indexOf('<li')==0){$('#comment-'+parent).append('<ul class="children">'+html+'</ul>');$('#comment-'+parent+' .add_unit_comment_text').remove();$('.unit_content .commentlist li .reply').removeClass('hide');textarea.val('');$('.add_unit_comment_text').addClass('hide');}else{$this.append(html);}}});}else{$this.append('<div class="message">'+vibe_course_module_strings.incorrect+'</div>');}});});$('.load_more_comments').click(function(){var page=parseInt($(this).attr('data-page'));var max=parseInt($(this).attr('data-max'));var $load=$(this);$this.addClass('loading');$.ajax({type:"POST",url:ajaxurl,data:{action:'load_unit_comments',security:$('#hash').val(),page:page,unit_id:$this.attr('data-unit')},cache:false,success:function(html){$this.removeClass('loading');$this.find('.commentlist').append(html);var count=parseInt($load.find('span').text());var per=parseInt($load.attr('data-per'));count=count-per;page++;$load.attr('data-page',page);$load.find('span').text(count);if(max<=page)
$load.hide(200);}});});});});if($('.unit_content').length){$('.unit_content').trigger('unit_traverse');}});$('#course_user_ajax_search_results').each(function(){var xhr;var $this=$(this);var view=0;if($('body').hasClass('admin')){view='admin';}
$('#active_status,#course_status').on('change',function(event){var value=$(this).val();$('ul.course_students').addClass('loading');xhr=$.ajax({type:"POST",url:ajaxurl,data:{action:'search_course_members',security:$('#bulk_action').val(),active_status:$('#active_status').val(),course_status:$('#course_status').val(),s:$('#search_course_member input').val(),course_id:$('#course_user_ajax_search_results').attr('data-id'),view:view},cache:false,success:function(html){$('ul.course_students').removeClass('loading');$('ul.course_students').html(html);}});});$('#search_course_member input').on('keyup',function(event){var value=$(this).val();if(xhr&&xhr.readyState!=4){xhr.abort();}
if(value.length>=4){$this.addClass('loading');$('ul.course_students').addClass('loading');xhr=$.ajax({type:"POST",url:ajaxurl,data:{action:'search_course_members',security:$('#bulk_action').val(),active_status:$('#active_status').val(),course_status:$('#course_status').val(),s:$('#search_course_member input').val(),course_id:$('#course_user_ajax_search_results').attr('data-id'),view:view},cache:false,success:function(html){$('ul.course_students').removeClass('loading');$this.removeClass('loading');$('ul.course_students').html(html);}});}});$('#search_course_member input').on('blur',function(event){var value=$(this).val();$('ul.course_students').addClass('loading');xhr=$.ajax({type:"POST",url:ajaxurl,data:{action:'search_course_members',security:$('#bulk_action').val(),active_status:$('#active_status').val(),course_status:$('#course_status').val(),s:$('#search_course_member input').val(),course_id:$('#course_user_ajax_search_results').attr('data-id'),view:view},cache:false,success:function(html){$('ul.course_students').removeClass('loading');$('ul.course_students').html(html);}});});});$('body').on('click','.course_admin_paged',function(){$('ul.course_students').addClass('loading');var view='';if($('body').hasClass('admin')){view='admin';}
$.ajax({type:"POST",url:ajaxurl,data:{action:'search_course_members',security:$('#bulk_action').val(),active_status:$('#active_status').val(),course_status:$('#course_status').val(),s:$('#search_course_member input').val(),page:$(this).text(),course_id:$('#course_user_ajax_search_results').attr('data-id'),view:view},cache:false,success:function(html){$('ul.course_students').removeClass('loading');$('ul.course_students').html(html);}});});$('body').delegate('#question,.in_quiz','question_loaded',function(){$('.check_question_answer').on('click',function(event){event.preventDefault();var $this=$(this);if($this.hasClass('disabled'))
return;$this.addClass('disabled');$this.prepend('<i class="fa fa-spinner animate load spin"></i>');var answer=localStorage.getItem($this.attr('data-question'));var question_id=$this.attr('data-question');$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:'check_question_answer',security:$this.attr('data-security'),quiz_id:$this.attr('data-quiz'),question_id:question_id,answer:answer},cache:false,success:function(json){if(json.hasOwnProperty('status')){localStorage.setItem('question_result_'+question_id,JSON.stringify(json));$('#question,.in_question').addClass(json.status);$('.quiz_meta').trigger('progress_check');$('#ques'+question_id).addClass(json.status);$('.in_question[data-ques="'+question_id+'"]').addClass(json.status);$('#question').after('<div class="question_wrapper"><div class="result"><div class="'+json.status+'"><span></span><strong>'+json.marks+'</strong></div></div></div>');if(json.correct){var jc=json.correct;jc=jc.split('|').join(' '+vibe_course_module_strings.And+' ');if(json.explanation){$('#question,.in_question[data-ques="'+question_id+'"]').append('<div class="checked_answer '+json.status+'"><strong>'+vibe_course_module_strings.correct_answer+' : '+jc+'<strong><br>'+vibe_course_module_strings.explanation+' : '+json.explanation+'</div>');}else{$('#question,.in_question[data-ques="'+question_id+'"]').append('<div class="checked_answer '+json.status+'"><strong>'+vibe_course_module_strings.correct_answer+' : '+jc+'<strong></div>');}}
$('.in_question[data-ques="'+question_id+'"]').append('<div class="question_wrapper"><div class="result"><div class="'+json.status+'"><span></span><strong>'+json.marks+'</strong></div></div></div>');setTimeout(function(){$('#question+.question_wrapper, .in_question[data-ques="'+question_id+'"] .question_wrapper').addClass('loaded');$('#question,.in_question').addClass(json.status);},100);setTimeout(function(){$('#question,.in_question[data-ques="'+question_id+'"]').addClass('check_answer_loaded');},500);$this.remove();}else{$('#question,.in_question[data-ques="'+question_id+'"]').append('<div class="message">'+json.message+'</div>');$this.remove();}
var new_questions_json=new Array();;if($(all_questions_json).length){$.each(all_questions_json,function(i,val){if(val!=question_id){new_questions_json.push(val);}});all_questions_json=new_questions_json;console.log(all_questions_json);}}});});});$(document).ready(function(){$('body').on('click','.end_tour',function(event){event.preventDefault();var $this=$(this);if($this.hasClass('disabled'))return false;$this.prepend('<i class="fa fa-spinner animated spin"></i>');$.ajax({type:"POST",url:ajaxurl,data:{action:'end_tour_for_user',vibe_tour_security:vibe_course_module_strings.security,tour_name:$this.attr('data-action-point')},cache:false,success:function(html){$this.addClass('disabled');$this.html('<i class="fa fa-check"></i>');}});});$('body').on('click','.start_tour',function(event){event.preventDefault();var $this=$(this);$this.prepend('<i class="fa fa-spinner animated spin"></i>');var courses='';$.ajax({type:"POST",url:ajaxurl,data:{action:'start_tour_for_user',vibe_tour_security:vibe_course_module_strings.security,tour_name:$this.attr('data-action-point')},cache:false,success:function(html){courses=html;}}).done(function(){localStorage.removeItem($this.attr('data-action-point')+'_current_step');localStorage.removeItem($this.attr('data-action-point')+'_end');$this.find('i.fa-spinner').remove();$.magnificPopup.open({items:{src:'<div class="white-popup">'+courses+'</div>',type:'inline'}});});});$('body').delegate('.start_course_tour','click',function(){var $this=$(this);var link=$this.parent().find('.course_select').val();window.location.href=link;});});})(jQuery);function end_tour_wplms(tour_name){jQuery.ajax({type:"POST",url:ajaxurl,async:true,data:{action:'end_tour_for_user',vibe_tour_security:vibe_course_module_strings.security,tour_name:tour_name},});};!function(a,b){"use strict";function c(){if(!e){e=!0;var a,c,d,f,g=-1!==navigator.appVersion.indexOf("MSIE 10"),h=!!navigator.userAgent.match(/Trident.*rv:11\./),i=b.querySelectorAll("iframe.wp-embedded-content");for(c=0;c<i.length;c++){if(d=i[c],!d.getAttribute("data-secret"))f=Math.random().toString(36).substr(2,10),d.src+="#?secret="+f,d.setAttribute("data-secret",f);if(g||h)a=d.cloneNode(!0),a.removeAttribute("security"),d.parentNode.replaceChild(a,d)}}}var d=!1,e=!1;if(b.querySelector)if(a.addEventListener)d=!0;if(a.wp=a.wp||{},!a.wp.receiveEmbedMessage)if(a.wp.receiveEmbedMessage=function(c){var d=c.data;if(d.secret||d.message||d.value)if(!/[^a-zA-Z0-9]/.test(d.secret)){var e,f,g,h,i,j=b.querySelectorAll('iframe[data-secret="'+d.secret+'"]'),k=b.querySelectorAll('blockquote[data-secret="'+d.secret+'"]');for(e=0;e<k.length;e++)k[e].style.display="none";for(e=0;e<j.length;e++)if(f=j[e],c.source===f.contentWindow){if(f.removeAttribute("style"),"height"===d.message){if(g=parseInt(d.value,10),g>1e3)g=1e3;else if(~~g<200)g=200;f.height=g}if("link"===d.message)if(h=b.createElement("a"),i=b.createElement("a"),h.href=f.getAttribute("src"),i.href=d.value,i.host===h.host)if(b.activeElement===f)a.top.location.href=d.value}else;}},d)a.addEventListener("message",a.wp.receiveEmbedMessage,!1),b.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1)}(window,document);;var ak_js=document.getElementById("ak_js");if(!ak_js){ak_js=document.createElement('input');ak_js.setAttribute('id','ak_js');ak_js.setAttribute('name','ak_js');ak_js.setAttribute('type','hidden');}
else{ak_js.parentNode.removeChild(ak_js);}
ak_js.setAttribute('value',(new Date()).getTime());var commentForm=document.getElementById('commentform');if(commentForm){commentForm.appendChild(ak_js);}
else{var replyRowContainer=document.getElementById('replyrow');if(replyRowContainer){var children=replyRowContainer.getElementsByTagName('td');if(children.length>0){children[0].appendChild(ak_js);}}};;window.Modernizr=function(a,b,c){function x(a){j.cssText=a}function y(a,b){return x(prefixes.join(a+";")+(b||""))}function z(a,b){return typeof a===b}function A(a,b){return!!~(""+a).indexOf(b)}function B(a,b){for(var d in a){var e=a[d];if(!A(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function C(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:z(f,"function")?f.bind(d||b):f}return!1}function D(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+n.join(d+" ")+d).split(" ");return z(b,"string")||z(b,"undefined")?B(e,b):(e=(a+" "+o.join(d+" ")+d).split(" "),C(e,b,c))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m="Webkit Moz O ms",n=m.split(" "),o=m.toLowerCase().split(" "),p={},q={},r={},s=[],t=s.slice,u,v={}.hasOwnProperty,w;!z(v,"undefined")&&!z(v.call,"undefined")?w=function(a,b){return v.call(a,b)}:w=function(a,b){return b in a&&z(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=t.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(t.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(t.call(arguments)))};return e}),p.csstransitions=function(){return D("transition")};for(var E in p)w(p,E)&&(u=E.toLowerCase(),e[u]=p[E](),s.push((e[u]?"":"no-")+u));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)w(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},x(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._domPrefixes=o,e._cssomPrefixes=n,e.testProp=function(a){return B([a])},e.testAllProps=D,e.prefixed=function(a,b,c){return b?D(a,b,c):D(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+s.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};;!function(a){a.flexslider=function(b,c){var d=a(b);d.vars=a.extend({},a.flexslider.defaults,c);var j,e=d.vars.namespace,f=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,g=("ontouchstart"in window||f||window.DocumentTouch&&document instanceof DocumentTouch)&&d.vars.touch,h="click touchend MSPointerUp",i="",k="vertical"===d.vars.direction,l=d.vars.reverse,m=d.vars.itemWidth>0,n="fade"===d.vars.animation,o=""!==d.vars.asNavFor,p={},q=!0;a.data(b,"flexslider",d),p={init:function(){d.animating=!1,d.currentSlide=parseInt(d.vars.startAt?d.vars.startAt:0,10),isNaN(d.currentSlide)&&(d.currentSlide=0),d.animatingTo=d.currentSlide,d.atEnd=0===d.currentSlide||d.currentSlide===d.last,d.containerSelector=d.vars.selector.substr(0,d.vars.selector.search(" ")),d.slides=a(d.vars.selector,d),d.container=a(d.containerSelector,d),d.count=d.slides.length,d.syncExists=a(d.vars.sync).length>0,"slide"===d.vars.animation&&(d.vars.animation="swing"),d.prop=k?"top":"marginLeft",d.args={},d.manualPause=!1,d.stopped=!1,d.started=!1,d.startTimeout=null,d.transitions=!d.vars.video&&!n&&d.vars.useCSS&&function(){var a=document.createElement("div"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return d.pfx=b[c].replace("Perspective","").toLowerCase(),d.prop="-"+d.pfx+"-transform",!0;return!1}(),d.ensureAnimationEnd="",""!==d.vars.controlsContainer&&(d.controlsContainer=a(d.vars.controlsContainer).length>0&&a(d.vars.controlsContainer)),""!==d.vars.manualControls&&(d.manualControls=a(d.vars.manualControls).length>0&&a(d.vars.manualControls)),d.vars.randomize&&(d.slides.sort(function(){return Math.round(Math.random())-.5}),d.container.empty().append(d.slides)),d.doMath(),d.setup("init"),d.vars.controlNav&&p.controlNav.setup(),d.vars.directionNav&&p.directionNav.setup(),d.vars.keyboard&&(1===a(d.containerSelector).length||d.vars.multipleKeyboard)&&a(document).bind("keyup",function(a){var b=a.keyCode;if(!d.animating&&(39===b||37===b)){var c=39===b?d.getTarget("next"):37===b?d.getTarget("prev"):!1;d.flexAnimate(c,d.vars.pauseOnAction)}}),d.vars.mousewheel&&d.bind("mousewheel",function(a,b){a.preventDefault();var f=0>b?d.getTarget("next"):d.getTarget("prev");d.flexAnimate(f,d.vars.pauseOnAction)}),d.vars.pausePlay&&p.pausePlay.setup(),d.vars.slideshow&&d.vars.pauseInvisible&&p.pauseInvisible.init(),d.vars.slideshow&&(d.vars.pauseOnHover&&d.hover(function(){d.manualPlay||d.manualPause||d.pause()},function(){d.manualPause||d.manualPlay||d.stopped||d.play()}),d.vars.pauseInvisible&&p.pauseInvisible.isHidden()||(d.vars.initDelay>0?d.startTimeout=setTimeout(d.play,d.vars.initDelay):d.play())),o&&p.asNav.setup(),g&&d.vars.touch&&p.touch(),(!n||n&&d.vars.smoothHeight)&&a(window).bind("resize orientationchange focus",p.resize),d.find("img").attr("draggable","false"),setTimeout(function(){d.vars.start(d)},200)},asNav:{setup:function(){d.asNav=!0,d.animatingTo=Math.floor(d.currentSlide/d.move),d.currentItem=d.currentSlide,d.slides.removeClass(e+"active-slide").eq(d.currentItem).addClass(e+"active-slide"),f?(b._slider=d,d.slides.each(function(){var b=this;b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",function(a){a.preventDefault(),a.currentTarget._gesture&&a.currentTarget._gesture.addPointer(a.pointerId)},!1),b.addEventListener("MSGestureTap",function(b){b.preventDefault();var c=a(this),e=c.index();a(d.vars.asNavFor).data("flexslider").animating||c.hasClass("active")||(d.direction=d.currentItem<e?"next":"prev",d.flexAnimate(e,d.vars.pauseOnAction,!1,!0,!0))})})):d.slides.on(h,function(b){b.preventDefault();var c=a(this),f=c.index(),g=c.offset().left-a(d).scrollLeft();0>=g&&c.hasClass(e+"active-slide")?d.flexAnimate(d.getTarget("prev"),!0):a(d.vars.asNavFor).data("flexslider").animating||c.hasClass(e+"active-slide")||(d.direction=d.currentItem<f?"next":"prev",d.flexAnimate(f,d.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){d.manualControls?p.controlNav.setupManual():p.controlNav.setupPaging()},setupPaging:function(){var f,g,b="thumbnails"===d.vars.controlNav?"control-thumbs":"control-paging",c=1;if(d.controlNavScaffold=a('<ol class="'+e+"control-nav "+e+b+'"></ol>'),d.pagingCount>1)for(var j=0;j<d.pagingCount;j++){if(g=d.slides.eq(j),f="thumbnails"===d.vars.controlNav?'<img src="'+g.attr("data-thumb")+'"/>':"<a>"+c+"</a>","thumbnails"===d.vars.controlNav&&!0===d.vars.thumbCaptions){var k=g.attr("data-thumbcaption");""!=k&&void 0!=k&&(f+='<span class="'+e+'caption">'+k+"</span>")}d.controlNavScaffold.append("<li>"+f+"</li>"),c++}d.controlsContainer?a(d.controlsContainer).append(d.controlNavScaffold):d.append(d.controlNavScaffold),p.controlNav.set(),p.controlNav.active(),d.controlNavScaffold.delegate("a, img",h,function(b){if(b.preventDefault(),""===i||i===b.type){var c=a(this),f=d.controlNav.index(c);c.hasClass(e+"active")||(d.direction=f>d.currentSlide?"next":"prev",d.flexAnimate(f,d.vars.pauseOnAction))}""===i&&(i=b.type),p.setToClearWatchedEvent()})},setupManual:function(){d.controlNav=d.manualControls,p.controlNav.active(),d.controlNav.bind(h,function(b){if(b.preventDefault(),""===i||i===b.type){var c=a(this),f=d.controlNav.index(c);c.hasClass(e+"active")||(d.direction=f>d.currentSlide?"next":"prev",d.flexAnimate(f,d.vars.pauseOnAction))}""===i&&(i=b.type),p.setToClearWatchedEvent()})},set:function(){var b="thumbnails"===d.vars.controlNav?"img":"a";d.controlNav=a("."+e+"control-nav li "+b,d.controlsContainer?d.controlsContainer:d)},active:function(){d.controlNav.removeClass(e+"active").eq(d.animatingTo).addClass(e+"active")},update:function(b,c){d.pagingCount>1&&"add"===b?d.controlNavScaffold.append(a("<li><a>"+d.count+"</a></li>")):1===d.pagingCount?d.controlNavScaffold.find("li").remove():d.controlNav.eq(c).closest("li").remove(),p.controlNav.set(),d.pagingCount>1&&d.pagingCount!==d.controlNav.length?d.update(c,b):p.controlNav.active()}},directionNav:{setup:function(){var b=a('<ul class="'+e+'direction-nav"><li><a class="'+e+'prev" href="#">'+d.vars.prevText+'</a></li><li><a class="'+e+'next" href="#">'+d.vars.nextText+"</a></li></ul>");d.controlsContainer?(a(d.controlsContainer).append(b),d.directionNav=a("."+e+"direction-nav li a",d.controlsContainer)):(d.append(b),d.directionNav=a("."+e+"direction-nav li a",d)),p.directionNav.update(),d.directionNav.bind(h,function(b){b.preventDefault();var c;(""===i||i===b.type)&&(c=a(this).hasClass(e+"next")?d.getTarget("next"):d.getTarget("prev"),d.flexAnimate(c,d.vars.pauseOnAction)),""===i&&(i=b.type),p.setToClearWatchedEvent()})},update:function(){var a=e+"disabled";1===d.pagingCount?d.directionNav.addClass(a).attr("tabindex","-1"):d.vars.animationLoop?d.directionNav.removeClass(a).removeAttr("tabindex"):0===d.animatingTo?d.directionNav.removeClass(a).filter("."+e+"prev").addClass(a).attr("tabindex","-1"):d.animatingTo===d.last?d.directionNav.removeClass(a).filter("."+e+"next").addClass(a).attr("tabindex","-1"):d.directionNav.removeClass(a).removeAttr("tabindex")}},pausePlay:{setup:function(){var b=a('<div class="'+e+'pauseplay"><a></a></div>');d.controlsContainer?(d.controlsContainer.append(b),d.pausePlay=a("."+e+"pauseplay a",d.controlsContainer)):(d.append(b),d.pausePlay=a("."+e+"pauseplay a",d)),p.pausePlay.update(d.vars.slideshow?e+"pause":e+"play"),d.pausePlay.bind(h,function(b){b.preventDefault(),(""===i||i===b.type)&&(a(this).hasClass(e+"pause")?(d.manualPause=!0,d.manualPlay=!1,d.pause()):(d.manualPause=!1,d.manualPlay=!0,d.play())),""===i&&(i=b.type),p.setToClearWatchedEvent()})},update:function(a){"play"===a?d.pausePlay.removeClass(e+"pause").addClass(e+"play").html(d.vars.playText):d.pausePlay.removeClass(e+"play").addClass(e+"pause").html(d.vars.pauseText)}},touch:function(){function r(f){d.animating?f.preventDefault():(window.navigator.msPointerEnabled||1===f.touches.length)&&(d.pause(),g=k?d.h:d.w,i=Number(new Date),o=f.touches[0].pageX,p=f.touches[0].pageY,e=m&&l&&d.animatingTo===d.last?0:m&&l?d.limit-(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo:m&&d.currentSlide===d.last?d.limit:m?(d.itemW+d.vars.itemMargin)*d.move*d.currentSlide:l?(d.last-d.currentSlide+d.cloneOffset)*g:(d.currentSlide+d.cloneOffset)*g,a=k?p:o,c=k?o:p,b.addEventListener("touchmove",s,!1),b.addEventListener("touchend",t,!1))}function s(b){o=b.touches[0].pageX,p=b.touches[0].pageY,h=k?a-p:a-o,j=k?Math.abs(h)<Math.abs(o-c):Math.abs(h)<Math.abs(p-c);var f=500;(!j||Number(new Date)-i>f)&&(b.preventDefault(),!n&&d.transitions&&(d.vars.animationLoop||(h/=0===d.currentSlide&&0>h||d.currentSlide===d.last&&h>0?Math.abs(h)/g+2:1),d.setProps(e+h,"setTouch")))}function t(){if(b.removeEventListener("touchmove",s,!1),d.animatingTo===d.currentSlide&&!j&&null!==h){var k=l?-h:h,m=k>0?d.getTarget("next"):d.getTarget("prev");d.canAdvance(m)&&(Number(new Date)-i<550&&Math.abs(k)>50||Math.abs(k)>g/2)?d.flexAnimate(m,d.vars.pauseOnAction):n||d.flexAnimate(d.currentSlide,d.vars.pauseOnAction,!0)}b.removeEventListener("touchend",t,!1),a=null,c=null,h=null,e=null}function u(a){a.stopPropagation(),d.animating?a.preventDefault():(d.pause(),b._gesture.addPointer(a.pointerId),q=0,g=k?d.h:d.w,i=Number(new Date),e=m&&l&&d.animatingTo===d.last?0:m&&l?d.limit-(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo:m&&d.currentSlide===d.last?d.limit:m?(d.itemW+d.vars.itemMargin)*d.move*d.currentSlide:l?(d.last-d.currentSlide+d.cloneOffset)*g:(d.currentSlide+d.cloneOffset)*g)}function v(a){a.stopPropagation();var c=a.target._slider;if(c){var d=-a.translationX,f=-a.translationY;return q+=k?f:d,h=q,j=k?Math.abs(q)<Math.abs(-d):Math.abs(q)<Math.abs(-f),a.detail===a.MSGESTURE_FLAG_INERTIA?(setImmediate(function(){b._gesture.stop()}),void 0):((!j||Number(new Date)-i>500)&&(a.preventDefault(),!n&&c.transitions&&(c.vars.animationLoop||(h=q/(0===c.currentSlide&&0>q||c.currentSlide===c.last&&q>0?Math.abs(q)/g+2:1)),c.setProps(e+h,"setTouch"))),void 0)}}function w(b){b.stopPropagation();var d=b.target._slider;if(d){if(d.animatingTo===d.currentSlide&&!j&&null!==h){var f=l?-h:h,k=f>0?d.getTarget("next"):d.getTarget("prev");d.canAdvance(k)&&(Number(new Date)-i<550&&Math.abs(f)>50||Math.abs(f)>g/2)?d.flexAnimate(k,d.vars.pauseOnAction):n||d.flexAnimate(d.currentSlide,d.vars.pauseOnAction,!0)}a=null,c=null,h=null,e=null,q=0}}var a,c,e,g,h,i,j=!1,o=0,p=0,q=0;f?(b.style.msTouchAction="none",b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",u,!1),b._slider=d,b.addEventListener("MSGestureChange",v,!1),b.addEventListener("MSGestureEnd",w,!1)):b.addEventListener("touchstart",r,!1)},resize:function(){!d.animating&&d.is(":visible")&&(m||d.doMath(),n?p.smoothHeight():m?(d.slides.width(d.computedW),d.update(d.pagingCount),d.setProps()):k?(d.viewport.height(d.h),d.setProps(d.h,"setTotal")):(d.vars.smoothHeight&&p.smoothHeight(),d.newSlides.width(d.computedW),d.setProps(d.computedW,"setTotal")))},smoothHeight:function(a){if(!k||n){var b=n?d:d.viewport;a?b.animate({height:d.slides.eq(d.animatingTo).height()},a):b.height(d.slides.eq(d.animatingTo).height())}},sync:function(b){var c=a(d.vars.sync).data("flexslider"),e=d.animatingTo;switch(b){case"animate":c.flexAnimate(e,d.vars.pauseOnAction,!1,!0);break;case"play":c.playing||c.asNav||c.play();break;case"pause":c.pause()}},uniqueID:function(b){return b.find("[id]").each(function(){var b=a(this);b.attr("id",b.attr("id")+"_clone")}),b},pauseInvisible:{visProp:null,init:function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)a[b]+"Hidden"in document&&(p.pauseInvisible.visProp=a[b]+"Hidden");if(p.pauseInvisible.visProp){var c=p.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(c,function(){p.pauseInvisible.isHidden()?d.startTimeout?clearTimeout(d.startTimeout):d.pause():d.started?d.play():d.vars.initDelay>0?setTimeout(d.play,d.vars.initDelay):d.play()})}},isHidden:function(){return document[p.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(j),j=setTimeout(function(){i=""},3e3)}},d.flexAnimate=function(b,c,f,h,i){if(d.vars.animationLoop||b===d.currentSlide||(d.direction=b>d.currentSlide?"next":"prev"),o&&1===d.pagingCount&&(d.direction=d.currentItem<b?"next":"prev"),!d.animating&&(d.canAdvance(b,i)||f)&&d.is(":visible")){if(o&&h){var j=a(d.vars.asNavFor).data("flexslider");if(d.atEnd=0===b||b===d.count-1,j.flexAnimate(b,!0,!1,!0,i),d.direction=d.currentItem<b?"next":"prev",j.direction=d.direction,Math.ceil((b+1)/d.visible)-1===d.currentSlide||0===b)return d.currentItem=b,d.slides.removeClass(e+"active-slide").eq(b).addClass(e+"active-slide"),!1;d.currentItem=b,d.slides.removeClass(e+"active-slide").eq(b).addClass(e+"active-slide"),b=Math.floor(b/d.visible)}if(d.animating=!0,d.animatingTo=b,c&&d.pause(),d.vars.before(d),d.syncExists&&!i&&p.sync("animate"),d.vars.controlNav&&p.controlNav.active(),m||d.slides.removeClass(e+"active-slide").eq(b).addClass(e+"active-slide"),d.atEnd=0===b||b===d.last,d.vars.directionNav&&p.directionNav.update(),b===d.last&&(d.vars.end(d),d.vars.animationLoop||d.pause()),n)g?(d.slides.eq(d.currentSlide).css({opacity:0,zIndex:1}),d.slides.eq(b).css({opacity:1,zIndex:2}),d.wrapup(q)):(d.slides.eq(d.currentSlide).css({zIndex:1}).animate({opacity:0},d.vars.animationSpeed,d.vars.easing),d.slides.eq(b).css({zIndex:2}).animate({opacity:1},d.vars.animationSpeed,d.vars.easing,d.wrapup));else{var r,s,t,q=k?d.slides.filter(":first").height():d.computedW;m?(r=d.vars.itemMargin,t=(d.itemW+r)*d.move*d.animatingTo,s=t>d.limit&&1!==d.visible?d.limit:t):s=0===d.currentSlide&&b===d.count-1&&d.vars.animationLoop&&"next"!==d.direction?l?(d.count+d.cloneOffset)*q:0:d.currentSlide===d.last&&0===b&&d.vars.animationLoop&&"prev"!==d.direction?l?0:(d.count+1)*q:l?(d.count-1-b+d.cloneOffset)*q:(b+d.cloneOffset)*q,d.setProps(s,"",d.vars.animationSpeed),d.transitions?(d.vars.animationLoop&&d.atEnd||(d.animating=!1,d.currentSlide=d.animatingTo),d.container.unbind("webkitTransitionEnd transitionend"),d.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(d.ensureAnimationEnd),d.wrapup(q)}),clearTimeout(d.ensureAnimationEnd),d.ensureAnimationEnd=setTimeout(function(){d.wrapup(q)},d.vars.animationSpeed+100)):d.container.animate(d.args,d.vars.animationSpeed,d.vars.easing,function(){d.wrapup(q)})}d.vars.smoothHeight&&p.smoothHeight(d.vars.animationSpeed)}},d.wrapup=function(a){n||m||(0===d.currentSlide&&d.animatingTo===d.last&&d.vars.animationLoop?d.setProps(a,"jumpEnd"):d.currentSlide===d.last&&0===d.animatingTo&&d.vars.animationLoop&&d.setProps(a,"jumpStart")),d.animating=!1,d.currentSlide=d.animatingTo,d.vars.after(d)},d.animateSlides=function(){!d.animating&&q&&d.flexAnimate(d.getTarget("next"))},d.pause=function(){clearInterval(d.animatedSlides),d.animatedSlides=null,d.playing=!1,d.vars.pausePlay&&p.pausePlay.update("play"),d.syncExists&&p.sync("pause")},d.play=function(){d.playing&&clearInterval(d.animatedSlides),d.animatedSlides=d.animatedSlides||setInterval(d.animateSlides,d.vars.slideshowSpeed),d.started=d.playing=!0,d.vars.pausePlay&&p.pausePlay.update("pause"),d.syncExists&&p.sync("play")},d.stop=function(){d.pause(),d.stopped=!0},d.canAdvance=function(a,b){var c=o?d.pagingCount-1:d.last;return b?!0:o&&d.currentItem===d.count-1&&0===a&&"prev"===d.direction?!0:o&&0===d.currentItem&&a===d.pagingCount-1&&"next"!==d.direction?!1:a!==d.currentSlide||o?d.vars.animationLoop?!0:d.atEnd&&0===d.currentSlide&&a===c&&"next"!==d.direction?!1:d.atEnd&&d.currentSlide===c&&0===a&&"next"===d.direction?!1:!0:!1},d.getTarget=function(a){return d.direction=a,"next"===a?d.currentSlide===d.last?0:d.currentSlide+1:0===d.currentSlide?d.last:d.currentSlide-1},d.setProps=function(a,b,c){var e=function(){var c=a?a:(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo,e=function(){if(m)return"setTouch"===b?a:l&&d.animatingTo===d.last?0:l?d.limit-(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo:d.animatingTo===d.last?d.limit:c;switch(b){case"setTotal":return l?(d.count-1-d.currentSlide+d.cloneOffset)*a:(d.currentSlide+d.cloneOffset)*a;case"setTouch":return l?a:a;case"jumpEnd":return l?a:d.count*a;case"jumpStart":return l?d.count*a:a;default:return a}}();return-1*e+"px"}();d.transitions&&(e=k?"translate3d(0,"+e+",0)":"translate3d("+e+",0,0)",c=void 0!==c?c/1e3+"s":"0s",d.container.css("-"+d.pfx+"-transition-duration",c),d.container.css("transition-duration",c)),d.args[d.prop]=e,(d.transitions||void 0===c)&&d.container.css(d.args),d.container.css("transform",e)},d.setup=function(b){if(n)d.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===b&&(g?d.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+d.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(d.currentSlide).css({opacity:1,zIndex:2}):d.slides.css({opacity:0,display:"block",zIndex:1}).eq(d.currentSlide).css({zIndex:2}).animate({opacity:1},d.vars.animationSpeed,d.vars.easing)),d.vars.smoothHeight&&p.smoothHeight();else{var c,f;"init"===b&&(d.viewport=a('<div class="'+e+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(d).append(d.container),d.cloneCount=0,d.cloneOffset=0,l&&(f=a.makeArray(d.slides).reverse(),d.slides=a(f),d.container.empty().append(d.slides))),d.vars.animationLoop&&!m&&(d.cloneCount=2,d.cloneOffset=1,"init"!==b&&d.container.find(".clone").remove(),p.uniqueID(d.slides.first().clone().addClass("clone").attr("aria-hidden","true")).appendTo(d.container),p.uniqueID(d.slides.last().clone().addClass("clone").attr("aria-hidden","true")).prependTo(d.container)),d.newSlides=a(d.vars.selector,d),c=l?d.count-1-d.currentSlide+d.cloneOffset:d.currentSlide+d.cloneOffset,k&&!m?(d.container.height(200*(d.count+d.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){d.newSlides.css({display:"block"}),d.doMath(),d.viewport.height(d.h),d.setProps(c*d.h,"init")},"init"===b?100:0)):(d.container.width(200*(d.count+d.cloneCount)+"%"),d.setProps(c*d.computedW,"init"),setTimeout(function(){d.doMath(),d.newSlides.css({width:d.computedW,"float":"left",display:"block"}),d.vars.smoothHeight&&p.smoothHeight()},"init"===b?100:0))}m||d.slides.removeClass(e+"active-slide").eq(d.currentSlide).addClass(e+"active-slide"),d.vars.init(d)},d.doMath=function(){var a=d.slides.first(),b=d.vars.itemMargin,c=d.vars.minItems,e=d.vars.maxItems;d.w=void 0===d.viewport?d.width():d.viewport.width(),d.h=a.height(),d.boxPadding=a.outerWidth()-a.width(),m?(d.itemT=d.vars.itemWidth+b,d.minW=c?c*d.itemT:d.w,d.maxW=e?e*d.itemT-b:d.w,d.itemW=d.minW>d.w?(d.w-b*(c-1))/c:d.maxW<d.w?(d.w-b*(e-1))/e:d.vars.itemWidth>d.w?d.w:d.vars.itemWidth,d.visible=Math.floor(d.w/d.itemW),d.move=d.vars.move>0&&d.vars.move<d.visible?d.vars.move:d.visible,d.pagingCount=Math.ceil((d.count-d.visible)/d.move+1),d.last=d.pagingCount-1,d.limit=1===d.pagingCount?0:d.vars.itemWidth>d.w?d.itemW*(d.count-1)+b*(d.count-1):(d.itemW+b)*d.count-d.w-b):(d.itemW=d.w,d.pagingCount=d.count,d.last=d.count-1),d.computedW=d.itemW-d.boxPadding},d.update=function(a,b){d.doMath(),m||(a<d.currentSlide?d.currentSlide+=1:a<=d.currentSlide&&0!==a&&(d.currentSlide-=1),d.animatingTo=d.currentSlide),d.vars.controlNav&&!d.manualControls&&("add"===b&&!m||d.pagingCount>d.controlNav.length?p.controlNav.update("add"):("remove"===b&&!m||d.pagingCount<d.controlNav.length)&&(m&&d.currentSlide>d.last&&(d.currentSlide-=1,d.animatingTo-=1),p.controlNav.update("remove",d.last))),d.vars.directionNav&&p.directionNav.update()},d.addSlide=function(b,c){var e=a(b);d.count+=1,d.last=d.count-1,k&&l?void 0!==c?d.slides.eq(d.count-c).after(e):d.container.prepend(e):void 0!==c?d.slides.eq(c).before(e):d.container.append(e),d.update(c,"add"),d.slides=a(d.vars.selector+":not(.clone)",d),d.setup(),d.vars.added(d)},d.removeSlide=function(b){var c=isNaN(b)?d.slides.index(a(b)):b;d.count-=1,d.last=d.count-1,isNaN(b)?a(b,d.slides).remove():k&&l?d.slides.eq(d.last).remove():d.slides.eq(b).remove(),d.doMath(),d.update(c,"remove"),d.slides=a(d.vars.selector+":not(.clone)",d),d.setup(),d.vars.removed(d)},p.init()},a(window).blur(function(){focused=!1}).focus(function(){focused=!0}),a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},a.fn.flexslider=function(b){if(void 0===b&&(b={}),"object"==typeof b)return this.each(function(){var c=a(this),d=b.selector?b.selector:".slides > li",e=c.find(d);1===e.length&&b.allowOneSlide===!0||0===e.length?(e.fadeIn(400),b.start&&b.start(c)):void 0===c.data("flexslider")&&new a.flexslider(this,b)});var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"stop":c.stop();break;case"next":c.flexAnimate(c.getTarget("next"),!0);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),!0);break;default:"number"==typeof b&&c.flexAnimate(b,!0)}}}(jQuery);;
/*!
 * Isotope PACKAGED v2.0.0
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */
(function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function n(e,i){t.fn[e]=function(n){if("string"==typeof n){for(var s=o.call(arguments,1),a=0,u=this.length;u>a;a++){var p=this[a],h=t.data(p,e);if(h)if(t.isFunction(h[n])&&"_"!==n.charAt(0)){var f=h[n].apply(h,s);if(void 0!==f)return f}else r("no such method '"+n+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; "+"attempted to call '"+n+"'")}return this}return this.each(function(){var o=t.data(this,e);o?(o.option(n),o._init()):(o=new i(this,n),t.data(this,e,o))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),n(t,e)},t.bridget}}var o=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i(t.jQuery)})(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,o=function(){};i.addEventListener?o=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(o=function(t,i,o){t[i+o]=o.handleEvent?function(){var i=e(t);o.handleEvent.call(o,i)}:function(){var i=e(t);o.call(t,i)},t.attachEvent("on"+i,t[i+o])});var n=function(){};i.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(o){t[e+i]=void 0}});var r={bind:o,unbind:n};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:t.eventie=r}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():r.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==n.readyState;if(!e.isReady&&!i){e.isReady=!0;for(var o=0,s=r.length;s>o;o++){var a=r[o];a()}}}function o(o){return o.bind(n,"DOMContentLoaded",i),o.bind(n,"readystatechange",i),o.bind(t,"load",i),e}var n=t.document,r=[];e.isReady=!1,"function"==typeof define&&define.amd?(e.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],o)):t.docReady=o(t.eventie)}(this),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var o=t.prototype,n=this,r=n.EventEmitter;o.getListeners=function(t){var e,i,o=this._getEvents();if(t instanceof RegExp){e={};for(i in o)o.hasOwnProperty(i)&&t.test(i)&&(e[i]=o[i])}else e=o[t]||(o[t]=[]);return e},o.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},o.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},o.addListener=function(t,i){var o,n=this.getListenersAsObject(t),r="object"==typeof i;for(o in n)n.hasOwnProperty(o)&&-1===e(n[o],i)&&n[o].push(r?i:{listener:i,once:!1});return this},o.on=i("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=i("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,i){var o,n,r=this.getListenersAsObject(t);for(n in r)r.hasOwnProperty(n)&&(o=e(r[n],i),-1!==o&&r[n].splice(o,1));return this},o.off=i("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,i){var o,n,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(o=i.length;o--;)r.call(this,e,i[o]);else for(o in e)e.hasOwnProperty(o)&&(n=e[o])&&("function"==typeof n?r.call(this,o,n):s.call(this,o,n));return this},o.removeEvent=function(t){var e,i=typeof t,o=this._getEvents();if("string"===i)delete o[t];else if(t instanceof RegExp)for(e in o)o.hasOwnProperty(e)&&t.test(e)&&delete o[e];else delete this._events;return this},o.removeAllListeners=i("removeEvent"),o.emitEvent=function(t,e){var i,o,n,r,s=this.getListenersAsObject(t);for(n in s)if(s.hasOwnProperty(n))for(o=s[n].length;o--;)i=s[n][o],i.once===!0&&this.removeListener(t,i.listener),r=i.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},o.trigger=i("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return n.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof o[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,n=0,r=i.length;r>n;n++)if(e=i[n]+t,"string"==typeof o[e])return e}}var i="Webkit Moz ms Ms O".split(" "),o=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=s.length;i>e;e++){var o=s[e];t[o]=0}return t}function o(t){function o(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var o=r(t);if("none"===o.display)return i();var n={};n.width=t.offsetWidth,n.height=t.offsetHeight;for(var h=n.isBorderBox=!(!p||!o[p]||"border-box"!==o[p]),f=0,c=s.length;c>f;f++){var d=s[f],l=o[d];l=a(t,l);var y=parseFloat(l);n[d]=isNaN(y)?0:y}var m=n.paddingLeft+n.paddingRight,g=n.paddingTop+n.paddingBottom,v=n.marginLeft+n.marginRight,_=n.marginTop+n.marginBottom,I=n.borderLeftWidth+n.borderRightWidth,L=n.borderTopWidth+n.borderBottomWidth,z=h&&u,S=e(o.width);S!==!1&&(n.width=S+(z?0:m+I));var b=e(o.height);return b!==!1&&(n.height=b+(z?0:g+L)),n.innerWidth=n.width-(m+I),n.innerHeight=n.height-(g+L),n.outerWidth=n.width+v,n.outerHeight=n.height+_,n}}function a(t,e){if(n||-1===e.indexOf("%"))return e;var i=t.style,o=i.left,r=t.runtimeStyle,s=r&&r.left;return s&&(r.left=t.currentStyle.left),i.left=e,e=i.pixelLeft,i.left=o,s&&(r.left=s),e}var u,p=t("boxSizing");return function(){if(p){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[p]="border-box";var i=document.body||document.documentElement;i.appendChild(t);var o=r(t);u=200===e(o.width),i.removeChild(t)}}(),o}var n=t.getComputedStyle,r=n?function(t){return n(t,null)}:function(t){return t.currentStyle},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("get-style-property")):t.getSize=o(t.getStyleProperty)}(window),function(t,e){function i(t,e){return t[a](e)}function o(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function n(t,e){o(t);for(var i=t.parentNode.querySelectorAll(e),n=0,r=i.length;r>n;n++)if(i[n]===t)return!0;return!1}function r(t,e){return o(t),i(t,e)}var s,a=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0,o=t.length;o>i;i++){var n=t[i],r=n+"MatchesSelector";if(e[r])return r}}();if(a){var u=document.createElement("div"),p=i(u,"div");s=p?i:r}else s=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return s}):window.matchesSelector=s}(this,Element.prototype),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return e=null,!0}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function n(t,n,r){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var u=r("transition"),p=r("transform"),h=u&&p,f=!!r("perspective"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],d=["transform","transition","transitionDuration","transitionProperty"],l=function(){for(var t={},e=0,i=d.length;i>e;e++){var o=d[e],n=r(o);n&&n!==o&&(t[o]=n)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=n(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){var o=l[i]||i;e[o]=t[i]}},a.prototype.getPosition=function(){var t=s(this.element),e=this.layout.options,i=e.isOriginLeft,o=e.isOriginTop,n=parseInt(t[i?"left":"right"],10),r=parseInt(t[o?"top":"bottom"],10);n=isNaN(n)?0:n,r=isNaN(r)?0:r;var a=this.layout.size;n-=i?a.paddingLeft:a.paddingRight,r-=o?a.paddingTop:a.paddingBottom,this.position.x=n,this.position.y=r},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var y=f?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=parseInt(t,10),r=parseInt(e,10),s=n===this.position.x&&r===this.position.y;if(this.setPosition(t,e),s&&!this.isTransitioning)return this.layoutPosition(),void 0;var a=t-i,u=e-o,p={},h=this.layout.options;a=h.isOriginLeft?a:-a,u=h.isOriginTop?u:-u,p.transform=y(a,u),this.transition({to:p,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=h?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(t),void 0;var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var o=this.element.offsetHeight;o=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var m=p&&o(p)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(c,this,!1))},a.prototype.transition=a.prototype[u?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,o=g[t.propertyName]||t.propertyName;if(delete e.ingProperties[o],i(e.ingProperties)&&this.disableTransition(),o in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[o]),o in e.onEnd){var n=e.onEnd[o];n.call(this),delete e.onEnd[o]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(c,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var v={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(v)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var r=t.getComputedStyle,s=r?function(t){return r(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],n):(t.Outlayer={},t.Outlayer.Item=n(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===f.call(t)}function o(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var o=0,n=t.length;n>o;o++)e.push(t[o]);else e.push(t);return e}function n(t,e){var i=d(e,t);-1!==i&&e.splice(i,1)}function r(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function s(i,s,f,d,l,y){function m(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!c(t))return u&&u.error("Bad "+this.constructor.namespace+" element: "+t),void 0;this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var o=++g;this.element.outlayerGUID=o,v[o]=this,this._create(),this.options.isInitLayout&&this.layout()}var g=0,v={};return m.namespace="outlayer",m.Item=y,m.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(m.prototype,f.prototype),m.prototype.option=function(t){e(this.options,t)},m.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},m.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0,r=e.length;r>n;n++){var s=e[n],a=new i(s,this);o.push(a)}return o},m.prototype._filterFindItemElements=function(t){t=o(t);for(var e=this.options.itemSelector,i=[],n=0,r=t.length;r>n;n++){var s=t[n];if(c(s))if(e){l(s,e)&&i.push(s);for(var a=s.querySelectorAll(e),u=0,p=a.length;p>u;u++)i.push(a[u])}else i.push(s)}return i},m.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},m.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=d(this.element)},m.prototype._getMeasurement=function(t,e){var i,o=this.options[t];o?("string"==typeof o?i=this.element.querySelector(o):c(o)&&(i=o),this[t]=i?d(i)[e]:o):this[t]=0},m.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},m.prototype._getItemsForLayout=function(t){for(var e=[],i=0,o=t.length;o>i;i++){var n=t[i];n.isIgnored||e.push(n)}return e},m.prototype._layoutItems=function(t,e){function i(){o.emitEvent("layoutComplete",[o,t])}var o=this;if(!t||!t.length)return i(),void 0;this._itemsOn(t,"layout",i);for(var n=[],r=0,s=t.length;s>r;r++){var a=t[r],u=this._getItemLayoutPosition(a);u.item=a,u.isInstant=e||a.isLayoutInstant,n.push(u)}this._processLayoutQueue(n)},m.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var o=t[e];this._positionItem(o.item,o.x,o.y,o.isInstant)}},m.prototype._positionItem=function(t,e,i,o){o?t.goTo(e,i):t.moveTo(e,i)},m.prototype._postLayout=function(){this.resizeContainer()},m.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},m.prototype._getContainerSize=h,m.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},m.prototype._itemsOn=function(t,e,i){function o(){return n++,n===r&&i.call(s),!0}for(var n=0,r=t.length,s=this,a=0,u=t.length;u>a;a++){var p=t[a];p.on(e,o)}},m.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},m.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},m.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var o=t[e];this.ignore(o)}}},m.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var o=t[e];n(o,this.stamps),this.unignore(o)}},m.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=o(t)):void 0},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},m.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},m.prototype._manageStamp=h,m.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,o=d(t),n={left:e.left-i.left-o.marginLeft,top:e.top-i.top-o.marginTop,right:i.right-e.right-o.marginRight,bottom:i.bottom-e.bottom-o.marginBottom};return n},m.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},m.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1},m.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},m.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},m.prototype.needsResizeLayout=function(){var t=d(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},m.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},m.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},m.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},m.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var o=t[i];o.reveal()}},m.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var o=t[i];o.hide()}},m.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var o=this.items[e];if(o.element===t)return o}},m.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,o=t.length;o>i;i++){var n=t[i],r=this.getItem(n);r&&e.push(r)}return e}},m.prototype.remove=function(t){t=o(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,r=e.length;r>i;i++){var s=e[i];s.remove(),n(s,this.items)}}},m.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){var o=this.items[e];o.destroy()}this.unbindResize(),delete this.element.outlayerGUID,p&&p.removeData(this.element,this.constructor.namespace)},m.data=function(t){var e=t&&t.outlayerGUID;return e&&v[e]},m.create=function(t,i){function o(){m.apply(this,arguments)}return Object.create?o.prototype=Object.create(m.prototype):e(o.prototype,m.prototype),o.prototype.constructor=o,o.defaults=e({},m.defaults),e(o.defaults,i),o.prototype.settings={},o.namespace=t,o.data=m.data,o.Item=function(){y.apply(this,arguments)},o.Item.prototype=new y,s(function(){for(var e=r(t),i=a.querySelectorAll(".js-"+e),n="data-"+e+"-options",s=0,h=i.length;h>s;s++){var f,c=i[s],d=c.getAttribute(n);try{f=d&&JSON.parse(d)}catch(l){u&&u.error("Error parsing "+n+" on "+c.nodeName.toLowerCase()+(c.id?"#"+c.id:"")+": "+l);continue}var y=new o(c,f);p&&p.data(c,t,y)}}),p&&p.bridget&&p.bridget(t,o),o},m.Item=y,m}var a=t.document,u=t.console,p=t.jQuery,h=function(){},f=Object.prototype.toString,c="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},d=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;o>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],s):t.Outlayer=s(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t){function e(){t.Item.apply(this,arguments)}return e.prototype=new t.Item,e.prototype._create=function(){this.id=this.layout.itemGUID++,t.Item.prototype._create.call(this),this.sortData={}},e.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var o=e[i];this.sortData[i]=o(this.element,this)}}},e}"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],e):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window),function(t){function e(t,e){function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}return function(){function t(t){return function(){return e.prototype[t].apply(this.isotope,arguments)}}for(var o=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],n=0,r=o.length;r>n;n++){var s=o[n];i.prototype[s]=t(s)}}(),i.prototype.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!==this.isotope.size.innerHeight},i.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},i.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},i.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},i.prototype.getSegmentSize=function(t,e){var i=t+e,o="outer"+e;if(this._getMeasurement(i,o),!this[i]){var n=this.getFirstItemSize();this[i]=n&&n[o]||this.isotope.size["inner"+e]}},i.prototype.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},i.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},i.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function o(){i.apply(this,arguments)}return o.prototype=new i,e&&(o.options=e),o.prototype.namespace=t,i.modes[t]=o,o},i}"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window),function(t){function e(t,e){var o=t.create("masonry");return o.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},o.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},o.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},o.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,o=e&&1>e?"round":"ceil",n=Math[o](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var r=this._getColGroup(n),s=Math.min.apply(Math,r),a=i(r,s),u={x:this.columnWidth*a,y:s},p=s+t.size.outerHeight,h=this.cols+1-r.length,f=0;h>f;f++)this.colYs[a+f]=p;return u},o.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;i>o;o++){var n=this.colYs.slice(o,o+t);e[o]=Math.max.apply(Math,n)}return e},o.prototype._manageStamp=function(t){var i=e(t),o=this._getElementOffset(t),n=this.options.isOriginLeft?o.left:o.right,r=n+i.outerWidth,s=Math.floor(n/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var u=(this.options.isOriginTop?o.top:o.bottom)+i.outerHeight,p=s;a>=p;p++)this.colYs[p]=Math.max(u,this.colYs[p])},o.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},o.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},o.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},o}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;o>i;i++){var n=t[i];if(n===e)return i}return-1};"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],e):t.Masonry=e(t.Outlayer,t.getSize)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t,i){var o=t.create("masonry"),n=o.prototype._getElementOffset,r=o.prototype.layout,s=o.prototype._getMeasurement;e(o.prototype,i.prototype),o.prototype._getElementOffset=n,o.prototype.layout=r,o.prototype._getMeasurement=s;var a=o.prototype.measureColumns;o.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,a.call(this)};var u=o.prototype._manageStamp;return o.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,u.apply(this,arguments)},o}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],i):i(t.Isotope.LayoutMode,t.Masonry)}(window),function(t){function e(t){var e=t.create("fitRows");return e.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0},e.prototype._getItemLayoutPosition=function(t){t.getSize(),0!==this.x&&t.size.outerWidth+this.x>this.isotope.size.innerWidth&&(this.x=0,this.y=this.maxY);var e={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=t.size.outerWidth,e},e.prototype._getContainerSize=function(){return{height:this.maxY}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],e):e(t.Isotope.LayoutMode)}(window),function(t){function e(t){var e=t.create("vertical",{horizontalAlignment:0});return e.prototype._resetLayout=function(){this.y=0},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},e.prototype._getContainerSize=function(){return{height:this.y}},e}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],e):e(t.Isotope.LayoutMode)}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===h.call(t)}function o(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var o=0,n=t.length;n>o;o++)e.push(t[o]);else e.push(t);return e}function n(t,e){var i=f(e,t);-1!==i&&e.splice(i,1)}function r(t,i,r,u,h){function f(t,e){return function(i,o){for(var n=0,r=t.length;r>n;n++){var s=t[n],a=i.sortData[s],u=o.sortData[s];if(a>u||u>a){var p=void 0!==e[s]?e[s]:e,h=p?1:-1;return(a>u?1:-1)*h}}return 0}}var c=t.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});c.Item=u,c.LayoutMode=h,c.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),t.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var e in h.modes)this._initLayoutMode(e)},c.prototype.reloadItems=function(){this.itemGUID=0,t.prototype.reloadItems.call(this)},c.prototype._itemize=function(){for(var e=t.prototype._itemize.apply(this,arguments),i=0,o=e.length;o>i;i++){var n=e[i];n.id=this.itemGUID++}return this._updateItemsSortData(e),e},c.prototype._initLayoutMode=function(t){var i=h.modes[t],o=this.options[t]||{};this.options[t]=i.options?e(i.options,o):o,this.modes[t]=new i(this)},c.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?(this.arrange(),void 0):(this._layout(),void 0)},c.prototype._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},c.prototype.arrange=function(t){this.option(t),this._getIsInstant(),this.filteredItems=this._filter(this.items),this._sort(),this._layout()},c.prototype._init=c.prototype.arrange,c.prototype._getIsInstant=function(){var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=t,t},c.prototype._filter=function(t){function e(){f.reveal(n),f.hide(r)}var i=this.options.filter;i=i||"*";for(var o=[],n=[],r=[],s=this._getFilterTest(i),a=0,u=t.length;u>a;a++){var p=t[a];if(!p.isIgnored){var h=s(p);h&&o.push(p),h&&p.isHidden?n.push(p):h||p.isHidden||r.push(p)}}var f=this;return this._isInstant?this._noTransition(e):e(),o},c.prototype._getFilterTest=function(t){return s&&this.options.isJQueryFiltering?function(e){return s(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return r(e.element,t)}},c.prototype.updateSortData=function(t){this._getSorters(),t=o(t);var e=this.getItems(t);e=e.length?e:this.items,this._updateItemsSortData(e)},c.prototype._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=d(i)}},c.prototype._updateItemsSortData=function(t){for(var e=0,i=t.length;i>e;e++){var o=t[e];o.updateSortData()}};var d=function(){function t(t){if("string"!=typeof t)return t;var i=a(t).split(" "),o=i[0],n=o.match(/^\[(.+)\]$/),r=n&&n[1],s=e(r,o),u=c.sortDataParsers[i[1]];return t=u?function(t){return t&&u(s(t))}:function(t){return t&&s(t)}}function e(t,e){var i;return i=t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&p(i)}}return t}();c.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},c.prototype._sort=function(){var t=this.options.sortBy;if(t){var e=[].concat.apply(t,this.sortHistory),i=f(e,this.options.sortAscending);this.filteredItems.sort(i),t!==this.sortHistory[0]&&this.sortHistory.unshift(t)}},c.prototype._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw Error("No layout mode: "+t);return e.options=this.options[t],e},c.prototype._resetLayout=function(){t.prototype._resetLayout.call(this),this._mode()._resetLayout()},c.prototype._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},c.prototype._manageStamp=function(t){this._mode()._manageStamp(t)},c.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},c.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},c.prototype.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},c.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps();var o=this._filterRevealAdded(e);this.layoutItems(i),this.filteredItems=o.concat(this.filteredItems)}},c.prototype._filterRevealAdded=function(t){var e=this._noTransition(function(){return this._filter(t)});return this.layoutItems(e,!0),this.reveal(e),t},c.prototype.insert=function(t){var e=this.addItems(t);if(e.length){var i,o,n=e.length;for(i=0;n>i;i++)o=e[i],this.element.appendChild(o.element);var r=this._filter(e);for(this._noTransition(function(){this.hide(r)}),i=0;n>i;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;n>i;i++)delete e[i].isLayoutInstant;this.reveal(r)}};var l=c.prototype.remove;return c.prototype.remove=function(t){t=o(t);var e=this.getItems(t);if(l.call(this,t),e&&e.length)for(var i=0,r=e.length;r>i;i++){var s=e[i];n(s,this.filteredItems)}},c.prototype._noTransition=function(t){var e=this.options.transitionDuration;this.options.transitionDuration=0;var i=t.call(this);return this.options.transitionDuration=e,i},c}var s=t.jQuery,a=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},u=document.documentElement,p=u.textContent?function(t){return t.textContent}:function(t){return t.innerText},h=Object.prototype.toString,f=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;o>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],r):t.Isotope=r(t.Outlayer,t.getSize,t.matchesSelector,t.Isotope.Item,t.Isotope.LayoutMode)}(window);;(function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};SelectParser=(function(){function SelectParser(){this.options_index=0;this.parsed=[];}
SelectParser.prototype.add_node=function(child){if(child.nodeName.toUpperCase()==="OPTGROUP"){return this.add_group(child);}else{return this.add_option(child);}};SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:this.escapeExpression(group.label),children:0,disabled:group.disabled});_ref=group.childNodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];_results.push(this.add_option(option,group_position,group.disabled));}
return _results;};SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION"){if(option.text!==""){if(group_position!=null){this.parsed[group_position].children+=1;}
this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText});}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});}
return this.options_index+=1;}};SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;if((text==null)||text===false){return"";}
if(!/[\&\<\>\"\'\`]/.test(text)){return text;}
map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g;return text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;";});};return SelectParser;})();SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;parser=new SelectParser();_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];parser.add_node(child);}
return parser.parsed;};AbstractChosen=(function(){function AbstractChosen(form_field,options){this.form_field=form_field;this.options=options!=null?options:{};if(!AbstractChosen.browser_is_supported()){return;}
this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();}
AbstractChosen.prototype.set_default_values=function(){var _this=this;this.click_test_action=function(evt){return _this.test_active_click(evt);};this.activate_action=function(evt){return _this.activate_field(evt);};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true;};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder");}else if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text;}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text;}
return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text;};AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=true;};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false;};AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field){return setTimeout((function(){return _this.container_mousedown();}),50);}}else{if(!this.active_field){return this.activate_field();}}};AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return _this.blur_test();}),100);}};AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;content='';_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){data=_ref[_i];if(data.group){content+=this.result_add_group(data);}else{content+=this.result_add_option(data);}
if(options!=null?options.first:void 0){if(data.selected&&this.is_multiple){this.choice_build(data);}else if(data.selected&&!this.is_multiple){this.single_set_selected_text(data.text);}}}
return content;};AbstractChosen.prototype.result_add_option=function(option){var classes,style;if(!option.search_match){return'';}
if(!this.include_option_in_results(option)){return'';}
classes=[];if(!option.disabled&&!(option.selected&&this.is_multiple)){classes.push("active-result");}
if(option.disabled&&!(option.selected&&this.is_multiple)){classes.push("disabled-result");}
if(option.selected){classes.push("result-selected");}
if(option.group_array_index!=null){classes.push("group-option");}
if(option.classes!==""){classes.push(option.classes);}
style=option.style.cssText!==""?" style=\""+option.style+"\"":"";return"<li class=\""+(classes.join(' '))+"\""+style+" data-option-array-index=\""+option.array_index+"\">"+option.search_text+"</li>";};AbstractChosen.prototype.result_add_group=function(group){if(!(group.search_match||group.group_match)){return'';}
if(!(group.active_options>0)){return'';}
return"<li class=\"group-result\">"+group.search_text+"</li>";};AbstractChosen.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple){this.results_reset_cleanup();}
this.result_clear_highlight();this.result_single_selected=null;this.results_build();if(this.results_showing){return this.winnow_results();}};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide();}else{return this.results_show();}};AbstractChosen.prototype.results_search=function(evt){if(this.results_showing){return this.winnow_results();}else{return this.results_show();}};AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,regexAnchor,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;this.no_results_clear();results=0;searchText=this.get_search_text();escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");regexAnchor=this.search_contains?"":"^";regex=new RegExp(regexAnchor+escapedSearchText,'i');zregex=new RegExp(escapedSearchText,'i');_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];option.search_match=false;results_group=null;if(this.include_option_in_results(option)){if(option.group){option.group_match=false;option.active_options=0;}
if((option.group_array_index!=null)&&this.results_data[option.group_array_index]){results_group=this.results_data[option.group_array_index];if(results_group.active_options===0&&results_group.search_match){results+=1;}
results_group.active_options+=1;}
if(!(option.group&&!this.group_search)){option.search_text=option.group?option.label:option.html;option.search_match=this.search_string_match(option.search_text,regex);if(option.search_match&&!option.group){results+=1;}
if(option.search_match){if(searchText.length){startpos=option.search_text.search(zregex);text=option.search_text.substr(0,startpos+searchText.length)+'</em>'+option.search_text.substr(startpos+searchText.length);option.search_text=text.substr(0,startpos)+'<em>'+text.substr(startpos);}
if(results_group!=null){results_group.group_match=true;}}else if((option.group_array_index!=null)&&this.results_data[option.group_array_index].search_match){option.search_match=true;}}}}
this.result_clear_highlight();if(results<1&&searchText.length){this.update_results_content("");return this.no_results(searchText);}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight();}};AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string)){return true;}else if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||search_string.indexOf("[")===0)){parts=search_string.replace(/\[|\]/g,"").split(" ");if(parts.length){for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(regex.test(part)){return true;}}}}};AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(this.selected_option_count!=null){return this.selected_option_count;}
this.selected_option_count=0;_ref=this.form_field.options;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(option.selected){this.selected_option_count+=1;}}
return this.selected_option_count;};AbstractChosen.prototype.choices_click=function(evt){evt.preventDefault();if(!(this.results_showing||this.is_disabled)){return this.results_show();}};AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke();}else if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search();}
break;case 13:evt.preventDefault();if(this.results_showing){return this.result_select(evt);}
break;case 27:if(this.results_showing){this.results_hide();}
return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search();}};AbstractChosen.prototype.container_width=function(){if(this.options.width!=null){return this.options.width;}else{return""+this.form_field.offsetWidth+"px";}};AbstractChosen.prototype.include_option_in_results=function(option){if(this.is_multiple&&(!this.display_selected_options&&option.selected)){return false;}
if(!this.display_disabled_options&&option.disabled){return false;}
if(option.empty){return false;}
return true;};AbstractChosen.browser_is_supported=function(){if(window.navigator.appName==="Microsoft Internet Explorer"){return document.documentMode>=8;}
if(/iP(od|hone)/i.test(window.navigator.userAgent)){return false;}
if(/Android/i.test(window.navigator.userAgent)){if(/Mobile/i.test(window.navigator.userAgent)){return false;}}
return true;};AbstractChosen.default_multiple_text="Select Some Options";AbstractChosen.default_single_text="Select an Option";AbstractChosen.default_no_result_text="No results match";return AbstractChosen;})();$=jQuery;$.fn.extend({chosen:function(options){if(!AbstractChosen.browser_is_supported()){return this;}
return this.each(function(input_field){var $this,chosen;$this=$(this);chosen=$this.data('chosen');if(options==='destroy'&&chosen){chosen.destroy();}else if(!chosen){$this.data('chosen',new Chosen(this,options));}});}});Chosen=(function(_super){__extends(Chosen,_super);function Chosen(){_ref=Chosen.__super__.constructor.apply(this,arguments);return _ref;}
Chosen.prototype.setup=function(){this.form_field_jq=$(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl");};Chosen.prototype.set_up_html=function(){var container_classes,container_props;container_classes=["chosen-container"];container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className){container_classes.push(this.form_field.className);}
if(this.is_rtl){container_classes.push("chosen-rtl");}
container_props={'class':container_classes.join(' '),'style':"width: "+(this.container_width())+";",'title':this.form_field.title};if(this.form_field.id.length){container_props.id=this.form_field.id.replace(/[^\w]/g,'_')+"_chosen";}
this.container=$("<div />",container_props);if(this.is_multiple){this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>');}else{this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>');}
this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find('div.chosen-drop').first();this.search_field=this.container.find('input').first();this.search_results=this.container.find('ul.chosen-results').first();this.search_field_scale();this.search_no_results=this.container.find('li.no-results').first();if(this.is_multiple){this.search_choices=this.container.find('ul.chosen-choices').first();this.search_container=this.container.find('li.search-field').first();}else{this.search_container=this.container.find('div.chosen-search').first();this.selected_item=this.container.find('.chosen-single').first();}
this.results_build();this.set_tab_index();this.set_label_behavior();return this.form_field_jq.trigger("chosen:ready",{chosen:this});};Chosen.prototype.register_observers=function(){var _this=this;this.container.bind('mousedown.chosen',function(evt){_this.container_mousedown(evt);});this.container.bind('mouseup.chosen',function(evt){_this.container_mouseup(evt);});this.container.bind('mouseenter.chosen',function(evt){_this.mouse_enter(evt);});this.container.bind('mouseleave.chosen',function(evt){_this.mouse_leave(evt);});this.search_results.bind('mouseup.chosen',function(evt){_this.search_results_mouseup(evt);});this.search_results.bind('mouseover.chosen',function(evt){_this.search_results_mouseover(evt);});this.search_results.bind('mouseout.chosen',function(evt){_this.search_results_mouseout(evt);});this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen',function(evt){_this.search_results_mousewheel(evt);});this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt);});this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt);});this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt);});this.search_field.bind('blur.chosen',function(evt){_this.input_blur(evt);});this.search_field.bind('keyup.chosen',function(evt){_this.keyup_checker(evt);});this.search_field.bind('keydown.chosen',function(evt){_this.keydown_checker(evt);});this.search_field.bind('focus.chosen',function(evt){_this.input_focus(evt);});if(this.is_multiple){return this.search_choices.bind('click.chosen',function(evt){_this.choices_click(evt);});}else{return this.container.bind('click.chosen',function(evt){evt.preventDefault();});}};Chosen.prototype.destroy=function(){$(document).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex){this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;}
this.container.remove();this.form_field_jq.removeData('chosen');return this.form_field_jq.show();};Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass('chosen-disabled');this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus.chosen",this.activate_action);}
return this.close_field();}else{this.container.removeClass('chosen-disabled');this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus.chosen",this.activate_action);}}};Chosen.prototype.container_mousedown=function(evt){if(!this.is_disabled){if(evt&&evt.type==="mousedown"&&!this.results_showing){evt.preventDefault();}
if(!((evt!=null)&&($(evt.target)).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple){this.search_field.val("");}
$(document).bind('click.chosen',this.click_test_action);this.results_show();}else if(!this.is_multiple&&evt&&(($(evt.target)[0]===this.selected_item[0])||$(evt.target).parents("a.chosen-single").length)){evt.preventDefault();this.results_toggle();}
return this.activate_field();}}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(evt);}};Chosen.prototype.search_results_mousewheel=function(evt){var delta,_ref1,_ref2;delta=-((_ref1=evt.originalEvent)!=null?_ref1.wheelDelta:void 0)||((_ref2=evt.originialEvent)!=null?_ref2.detail:void 0);if(delta!=null){evt.preventDefault();if(evt.type==='DOMMouseScroll'){delta=delta*40;}
return this.search_results.scrollTop(delta+this.search_results.scrollTop());}};Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active")){return this.close_field();}};Chosen.prototype.close_field=function(){$(document).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale();};Chosen.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus();};Chosen.prototype.test_active_click=function(evt){if(this.container.is($(evt.target).closest('.chosen-container'))){return this.active_field=true;}else{return this.close_field();}};Chosen.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple){this.search_choices.find("li.search-choice").remove();}else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch");}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch");}}
this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false;};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;high_top=this.result_highlight.position().top+this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom){return this.search_results.scrollTop((high_bottom-maxHeight)>0?high_bottom-maxHeight:0);}else if(high_top<visible_top){return this.search_results.scrollTop(high_top);}}};Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted");}
return this.result_highlight=null;};Chosen.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
this.container.addClass("chosen-with-drop");this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results();};Chosen.prototype.update_results_content=function(content){return this.search_results.html(content);};Chosen.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this});}
return this.results_showing=false;};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex){ti=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=ti;}};Chosen.prototype.set_label_behavior=function(){var _this=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length){this.form_field_label=$("label[for='"+this.form_field.id+"']");}
if(this.form_field_label.length>0){return this.form_field_label.bind('click.chosen',function(evt){if(_this.is_multiple){return _this.container_mousedown(evt);}else{return _this.activate_field();}});}};Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default");}else{this.search_field.val("");return this.search_field.removeClass("default");}};Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=target;this.result_select(evt);return this.search_field.focus();}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target){return this.result_do_highlight(target);}};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"||$(evt.target).parents('.active-result').first())){return this.result_clear_highlight();}};Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;choice=$('<li />',{"class":"search-choice"}).html("<span>"+item.html+"</span>");if(item.disabled){choice.addClass('search-choice-disabled');}else{close_link=$('<a />',{"class":'search-choice-close','data-option-array-index':item.array_index});close_link.bind('click.chosen',function(evt){return _this.choice_destroy_link_click(evt);});choice.append(close_link);}
return this.search_container.before(choice);};Chosen.prototype.choice_destroy_link_click=function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled){return this.choice_destroy($(evt.target));}};Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){this.results_hide();}
link.parents('li').first().remove();return this.search_field_scale();}};Chosen.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_option_count=null;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide();}};Chosen.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove();};Chosen.prototype.result_select=function(evt){var high,item,selected_index;if(this.result_highlight){high=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
if(this.is_multiple){high.removeClass("active-result");}else{if(this.result_single_selected){this.result_single_selected.removeClass("result-selected");selected_index=this.result_single_selected[0].getAttribute('data-option-array-index');this.results_data[selected_index].selected=false;}
this.result_single_selected=high;}
high.addClass("result-selected");item=this.results_data[high[0].getAttribute("data-option-array-index")];item.selected=true;this.form_field.options[item.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple){this.choice_build(item);}else{this.single_set_selected_text(item.text);}
if(!((evt.metaKey||evt.ctrlKey)&&this.is_multiple)){this.results_hide();}
this.search_field.val("");if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{'selected':this.form_field.options[item.options_index].value});}
this.current_selectedIndex=this.form_field.selectedIndex;return this.search_field_scale();}};Chosen.prototype.single_set_selected_text=function(text){if(text==null){text=this.default_text;}
if(text===this.default_text){this.selected_item.addClass("chosen-default");}else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default");}
return this.selected_item.find("span").text(text);};Chosen.prototype.result_deselect=function(pos){var result_data;result_data=this.results_data[pos];if(!this.form_field.options[result_data.options_index].disabled){result_data.selected=false;this.form_field.options[result_data.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing){this.winnow_results();}
this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value});this.search_field_scale();return true;}else{return false;}};Chosen.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect){return;}
if(!this.selected_item.find("abbr").length){this.selected_item.find("span").first().after("<abbr class=\"search-choice-close\"></abbr>");}
return this.selected_item.addClass("chosen-single-with-deselect");};Chosen.prototype.get_search_text=function(){if(this.search_field.val()===this.default_text){return"";}else{return $('<div/>').text($.trim(this.search_field.val())).html();}};Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null){return this.result_do_highlight(do_high);}};Chosen.prototype.no_results=function(terms){var no_results_html;no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');no_results_html.find("span").first().html(terms);return this.search_results.append(no_results_html);};Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove();};Chosen.prototype.keydown_arrow=function(){var next_sib;if(this.results_showing&&this.result_highlight){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib){return this.result_do_highlight(next_sib);}}else{return this.results_show();}};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple){return this.results_show();}else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length){return this.result_do_highlight(prev_sibs.first());}else{if(this.choices_count()>0){this.results_hide();}
return this.result_clear_highlight();}}};Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke();}else{next_available_destroy=this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")){this.pending_backstroke=next_available_destroy;if(this.single_backstroke_delete){return this.keydown_backstroke();}else{return this.pending_backstroke.addClass("search-choice-focus");}}}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus");}
return this.pending_backstroke=null;};Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;stroke=(_ref1=evt.which)!=null?_ref1:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke){this.clear_backstroke();}
switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(evt);}
this.mouse_on_container=false;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:evt.preventDefault();this.keydown_arrow();break;}};Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0;w=0;style_block="position:absolute; left: -1000px; top: -1000px; display:none;";styles=['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing'];for(_i=0,_len=styles.length;_i<_len;_i++){style=styles[_i];style_block+=style+":"+this.search_field.css(style)+";";}
div=$('<div />',{'style':style_block});div.text(this.search_field.val());$('body').append(div);w=div.width()+25;div.remove();f_width=this.container.outerWidth();if(w>f_width-10){w=f_width-10;}
return this.search_field.css({'width':w+'px'});}};return Chosen;})(AbstractChosen);}).call(this);;
/*!
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */
(function(window){'use strict';function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)");}
var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c);};addClass=function(elem,c){elem.classList.add(c);};removeClass=function(elem,c){elem.classList.remove(c);};}
else{hasClass=function(elem,c){return classReg(c).test(elem.className);};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c;}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ');};}
function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c);}
var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define(classie);}else{window.classie=classie;}})(window);;function SidebarMenuEffects(){function hasParentClass(e,classname){if(e===document)return false;if(classie.has(e,classname)){return true;}
return e.parentNode&&hasParentClass(e.parentNode,classname);}
function mobilecheck(){var check=false;(function(a){if(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;}
function init(){var container=document.getElementById('global'),buttons=Array.prototype.slice.call(document.querySelectorAll('#trigger')),eventtype=mobilecheck()?'touchstart':'click',resetMenu=function(){classie.remove(container,'open');},bodyClickFn=function(evt){if(!hasParentClass(evt.target,'sidemenu')){resetMenu();document.removeEventListener(eventtype,bodyClickFn);}};buttons.forEach(function(el,i){el.addEventListener(eventtype,function(ev){ev.stopPropagation();ev.preventDefault();container.className='global';setTimeout(function(){classie.add(container,'open');},25);document.addEventListener(eventtype,bodyClickFn);});});}
init();};;
/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{e=decodeURIComponent(e.replace(t," "))}catch(n){return}try{return u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={};e.removeCookie=function(t,n){if(e.cookie(t)!==undefined){e.cookie(t,"",e.extend({},n,{expires:-1}));return!0}return!1}});;
/*!jQuery Knob*/
(function($){"use strict";var k={},max=Math.max,min=Math.min;k.c={};k.c.d=$(document);k.c.t=function(e){return e.originalEvent.touches.length-1;};k.o=function(){var s=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.$c=null;this.c=null;this.t=0;this.isInit=false;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.run=function(){var cf=function(e,conf){var k;for(k in conf){s.o[k]=conf[k];}
s.init();s._configure()._draw();};if(this.$.data('kontroled'))return;this.$.data('kontroled',true);this.extend();this.o=$.extend({min:this.$.data('min')||0,max:this.$.data('max')||100,stopper:true,readOnly:this.$.data('readonly'),cursor:(this.$.data('cursor')===true&&30)||this.$.data('cursor')||0,thickness:this.$.data('thickness')||0.35,lineCap:this.$.data('linecap')||'butt',width:this.$.data('width')||200,height:this.$.data('height')||200,displayInput:this.$.data('displayinput')==null||this.$.data('displayinput'),displayPrevious:this.$.data('displayprevious'),fgColor:this.$.data('fgcolor')||'#87CEEB',inputColor:this.$.data('inputcolor')||this.$.data('fgcolor')||'#87CEEB',inline:false,step:this.$.data('step')||1,draw:null,change:null,cancel:null,release:null},this.o);if(this.$.is('fieldset')){this.v={};this.i=this.$.find('input')
this.i.each(function(k){var $this=$(this);s.i[k]=$this;s.v[k]=$this.val();$this.bind('change',function(){var val={};val[k]=$this.val();s.val(val);});});this.$.find('legend').remove();}else{this.i=this.$;this.v=this.$.val();(this.v=='')&&(this.v=this.o.min);this.$.bind('change',function(){s.val(s._validate(s.$.val()));});}
(!this.o.displayInput)&&this.$.hide();this.$c=$('<canvas width="'+
this.o.width+'px" height="'+
this.o.height+'px"></canvas>');this.c=this.$c[0].getContext("2d");this.$.wrap($('<div style="'+(this.o.inline?'display:inline;':'')+'width:'+this.o.width+'px;height:'+
this.o.height+'px;"></div>')).before(this.$c);if(this.v instanceof Object){this.cv={};this.copy(this.v,this.cv);}else{this.cv=this.v;}
this.$.bind("configure",cf).parent().bind("configure",cf);this._listen()._configure()._xy().init();this.isInit=true;this._draw();return this;};this._draw=function(){var d=true,c=document.createElement('canvas');c.width=s.o.width;c.height=s.o.height;s.g=c.getContext('2d');s.clear();s.dH&&(d=s.dH());(d!==false)&&s.draw();s.c.drawImage(c,0,0);c=null;};this._touch=function(e){var touchMove=function(e){var v=s.xy2val(e.originalEvent.touches[s.t].pageX,e.originalEvent.touches[s.t].pageY);if(v==s.cv)return;if(s.cH&&(s.cH(v)===false))return;s.change(s._validate(v));s._draw();};this.t=k.c.t(e);touchMove(e);k.c.d.bind("touchmove.k",touchMove).bind("touchend.k",function(){k.c.d.unbind('touchmove.k touchend.k');if(s.rH&&(s.rH(s.cv)===false))return;s.val(s.cv);});return this;};this._mouse=function(e){var mouseMove=function(e){var v=s.xy2val(e.pageX,e.pageY);if(v==s.cv)return;if(s.cH&&(s.cH(v)===false))return;s.change(s._validate(v));s._draw();};mouseMove(e);k.c.d.bind("mousemove.k",mouseMove).bind("keyup.k",function(e){if(e.keyCode===27){k.c.d.unbind("mouseup.k mousemove.k keyup.k");if(s.eH&&(s.eH()===false))return;s.cancel();}}).bind("mouseup.k",function(e){k.c.d.unbind('mousemove.k mouseup.k keyup.k');if(s.rH&&(s.rH(s.cv)===false))return;s.val(s.cv);});return this;};this._xy=function(){var o=this.$c.offset();this.x=o.left;this.y=o.top;return this;};this._listen=function(){if(!this.o.readOnly){this.$c.bind("mousedown",function(e){e.preventDefault();s._xy()._mouse(e);}).bind("touchstart",function(e){e.preventDefault();s._xy()._touch(e);});this.listen();}else{this.$.attr('readonly','readonly');}
return this;};this._configure=function(){if(this.o.draw)this.dH=this.o.draw;if(this.o.change)this.cH=this.o.change;if(this.o.cancel)this.eH=this.o.cancel;if(this.o.release)this.rH=this.o.release;if(this.o.displayPrevious){this.pColor=this.h2rgba(this.o.fgColor,"0.4");this.fgColor=this.h2rgba(this.o.fgColor,"0.6");}else{this.fgColor=this.o.fgColor;}
return this;};this._clear=function(){this.$c[0].width=this.$c[0].width;};this._validate=function(v){return(~~(((v<0)?-0.5:0.5)+(v/this.o.step)))*this.o.step;};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(v){};this.val=function(v){};this.xy2val=function(x,y){};this.draw=function(){};this.clear=function(){this._clear();};this.h2rgba=function(h,a){var rgb;h=h.substring(1,7)
rgb=[parseInt(h.substring(0,2),16),parseInt(h.substring(2,4),16),parseInt(h.substring(4,6),16)];return"rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+a+")";};this.copy=function(f,t){for(var i in f){t[i]=f[i];}};};k.Dial=function(){k.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=$.extend({bgColor:this.$.data('bgcolor')||'#EEEEEE',angleOffset:this.$.data('angleoffset')||0,angleArc:this.$.data('anglearc')||360,inline:true},this.o);};this.val=function(v){if(null!=v){this.cv=this.o.stopper?max(min(v,this.o.max),this.o.min):v;this.v=this.cv;this.$.val(this.v);this._draw();}else{return this.v;}};this.xy2val=function(x,y){var a,ret;a=Math.atan2(x-(this.x+this.w2),-(y-this.y-this.w2))-this.angleOffset;if(this.angleArc!=this.PI2&&(a<0)&&(a>-0.5)){a=0;}else if(a<0){a+=this.PI2;}
ret=~~(0.5+(a*(this.o.max-this.o.min)/this.angleArc))
+this.o.min;this.o.stopper&&(ret=max(min(ret,this.o.max),this.o.min));return ret;};this.listen=function(){var s=this,mw=function(e){e.preventDefault();var ori=e.originalEvent,deltaX=ori.detail||ori.wheelDeltaX,deltaY=ori.detail||ori.wheelDeltaY,v=parseInt(s.$.val())+(deltaX>0||deltaY>0?s.o.step:deltaX<0||deltaY<0?-s.o.step:0);if(s.cH&&(s.cH(v)===false))return;s.val(v);},kval,to,m=1,kv={37:-s.o.step,38:s.o.step,39:s.o.step,40:-s.o.step};this.$.bind("keydown",function(e){var kc=e.keyCode;if(kc>=96&&kc<=105){kc=e.keyCode=kc-48;}
kval=parseInt(String.fromCharCode(kc));if(isNaN(kval)){(kc!==13)&&(kc!==8)&&(kc!==9)&&(kc!==189)&&e.preventDefault();if($.inArray(kc,[37,38,39,40])>-1){e.preventDefault();var v=parseInt(s.$.val())+kv[kc]*m;s.o.stopper&&(v=max(min(v,s.o.max),s.o.min));s.change(v);s._draw();to=window.setTimeout(function(){m*=2;},30);}}}).bind("keyup",function(e){if(isNaN(kval)){if(to){window.clearTimeout(to);to=null;m=1;s.val(s.$.val());}}else{(s.$.val()>s.o.max&&s.$.val(s.o.max))||(s.$.val()<s.o.min&&s.$.val(s.o.min));}});this.$c.bind("mousewheel DOMMouseScroll",mw);this.$.bind("mousewheel DOMMouseScroll",mw)};this.init=function(){if(this.v<this.o.min||this.v>this.o.max)this.v=this.o.min;this.$.val(this.v);this.w2=this.o.width/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2;this.lineWidth=this.xy*this.o.thickness;this.lineCap=this.o.lineCap;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var s=max(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({'width':((this.o.width/2+4)>>0)+'px','height':((this.o.width/3)>>0)+'px','position':'absolute','vertical-align':'middle','margin-top':((this.o.width/3)>>0)+'px','margin-left':'-'+((this.o.width*3/4+2)>>0)+'px','border':0,'background':'none','font':'bold '+((this.o.width/s)>>0)+'px Arial','text-align':'center','color':this.o.inputColor||this.o.fgColor,'padding':'0px','-webkit-appearance':'none'})||this.i.css({'width':'0px','visibility':'hidden'});};this.change=function(v){this.cv=v;this.$.val(v);};this.angle=function(v){return(v-this.o.min)*this.angleArc/(this.o.max-this.o.min);};this.draw=function(){var c=this.g,a=this.angle(this.cv),sat=this.startAngle,eat=sat+a,sa,ea,r=1;c.lineWidth=this.lineWidth;c.lineCap=this.lineCap;this.o.cursor&&(sat=eat-this.cursorExt)&&(eat=eat+this.cursorExt);c.beginPath();c.strokeStyle=this.o.bgColor;c.arc(this.xy,this.xy,this.radius,this.endAngle-0.00001,this.startAngle+0.00001,true);c.stroke();if(this.o.displayPrevious){ea=this.startAngle+this.angle(this.v);sa=this.startAngle;this.o.cursor&&(sa=ea-this.cursorExt)&&(ea=ea+this.cursorExt);c.beginPath();c.strokeStyle=this.pColor;c.arc(this.xy,this.xy,this.radius,sa,ea,false);c.stroke();r=(this.cv==this.v);}
c.beginPath();c.strokeStyle=r?this.o.fgColor:this.fgColor;c.arc(this.xy,this.xy,this.radius,sat,eat,false);c.stroke();};this.cancel=function(){this.val(this.v);};};$.fn.dial=$.fn.knob=function(o){return this.each(function(){var d=new k.Dial();d.o=o;d.$=$(this);d.run();}).parent();};})(jQuery);;(function($){$.expr[":"].onScreen=function(elem){var $window=$(window);var viewport_top=$window.scrollTop();var viewport_height=$window.height();var viewport_bottom=viewport_top+viewport_height;var $elem=$(elem);var top=$elem.offset().top;var height=$elem.height();var bottom=top+height;return(top>=viewport_top&&top<viewport_bottom)||(bottom>viewport_top&&bottom<=viewport_bottom)||(height>viewport_height&&top<=viewport_top&&bottom>=viewport_bottom);};})(jQuery);(function($){jQuery(document).ready(function($){NProgress.inc();SidebarMenuEffects();$('nav .menu-item').has('.sub-menu').each(function(){if($(this).find('.megadrop').length>0){}else{$(this).addClass('hasmenu');}});$('.vbplogin').click(function(event){event.preventDefault();$('#vibe_bp_login').fadeIn(300);$('#vibe_bp_login').toggleClass('active');event.stopPropagation();});$('#searchicon').click(function(event){$('#searchdiv').toggleClass('active');});$(document).mouseup(function(e){var container=$("#searchdiv");if(!container.is(e.target)&&container.has(e.target).length===0)
{container.hide();container.removeClass('active');}
container=$("#vibe_bp_login");if(!container.is(e.target)&&container.has(e.target).length===0)
{container.hide();}});$('#headernotification').each(function(){var cookieValue=$.cookie("closed");if((cookieValue!==null)&&cookieValue=='headernotification'){$(this).hide();}});$('#widget-tabs a').click(function(e){e.preventDefault();$(this).tab('show');});$('#footernotification').each(function(){var cookieValue=$.cookie("closed");if((cookieValue!==null)&&cookieValue=='footernotification'){$(this).hide();}});$('.close').click(function(){var parent=$(this).parent().parent();var id=parent.attr('id');parent.hide(200);$.cookie('closed',id,{expires:2,path:'/'});});jQuery('#scrolltop a').click(function(event){event.preventDefault();$('body,html').animate({scrollTop:0},1200);return false;});$('body').delegate('.woocommerce-error','click',function(event){event.preventDefault();$(this).fadeOut(200);})
$('.tip').tooltip();$('.nav-tabs li:first a').tab('show');$('.course_description').on('click','#more_desc',function(event){event.preventDefault();$(this).fadeOut('fast');$('.full_desc').fadeIn('fast');});$('.course_description').on('click','#less_desc',function(event){event.preventDefault();$('.full_desc').fadeOut('fast');$('#more_desc').fadeIn('fast');});});jQuery(document).ready(function($){$('.form select').chosen({allow_single_deselect:true,disable_search_threshold:8});$('.chosen').chosen({allow_single_deselect:true,disable_search_threshold:8});$(window).scroll(function(event){var st=$(this).scrollTop();if($('#headertop').hasClass('fix')){var headerheight=$('header').height();if(st>headerheight){$('#headertop').addClass('fixed');}else{$('#headertop').removeClass('fixed');}}
if(st>700){$('#scrolltop').addClass('fix');}else{$('#scrolltop').removeClass('fix');}});$('.twitter_carousel').each(function(){var $this=$(this);$this.flexslider({animation:"slide",controlNav:false,directionNav:false,animationLoop:true,slideshow:true,prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",start:function(){$this.removeClass('loading');}});});});jQuery(document).ready(function($){$('.v_parallax_block').each(function(){var $bgobj=$(this);var i=parseInt($bgobj.attr('data-scroll'));var rev=parseInt($bgobj.attr('data-rev'));var ptop=$bgobj.parent().position().top;var adjust=parseInt($bgobj.attr('data-adjust'));$(window).scroll(function(e){e.preventDefault();var $window=jQuery(window);var yPos=-Math.round((($window.scrollTop()-ptop)/i));var coords;if(rev!=undefined){if(rev){yPos=yPos*-1+adjust;coords='50% '+yPos+'px';}else{coords='50% '+yPos+'px';}}
$bgobj.css({backgroundPosition:coords});});});});jQuery(document).ready(function($){$('section.stripe').each(function(){var style=$(this).find('.v_column.stripe_container .v_module').attr('data-class');if(style){style='stripe '+style;$(this).find('.v_column.stripe .v_module').removeAttr('data-class');$(this).attr('class',style);}
var style=$(this).find('.v_column.stripe .v_module').attr('data-class');if(style){style='stripe '+style;$(this).find('.v_column.stripe .v_module').removeAttr('data-class');$(this).attr('class',style);}});$('.payment_methods.methods >li').click(function(){var $this=$(this);$('.payment_methods.methods >li').find('div').hide(0,function(){$this.find('div').show(0);});});function v_carousel_fx($this){var direction,control,itemwidth,maxitem,minitem,scroll,vmargin;direction=control=false;vmargin=margin=30;scroll='horizontal';$this.find('li.product').removeClass().addClass('product');if($this.parent().hasClass('direction'))
direction=true;else
direction=false;if($this.parent().hasClass('control'))
control=true;else
control=false;if($this.parent().hasClass('columns1')){itemwidth=true;maxitem=1;minitem=1;margin=0;}
if($this.parent().hasClass('columns2')){itemwidth=420;maxitem=2;minitem=2;}
if($this.parent().hasClass('columns3')){itemwidth=320;maxitem=3;minitem=2;}
if($this.parent().hasClass('columns4')){itemwidth=200;maxitem=4;minitem=2;}
if($this.parent().hasClass('columns5')){itemwidth=180;maxitem=5;minitem=2;}
if($this.parent().hasClass('columns6')){itemwidth=140;maxitem=6;minitem=2;}
$this.flexslider({animation:"slide",selector:".products > li",controlNav:control,directionNav:direction,animationLoop:false,slideshow:false,itemWidth:itemwidth,itemMargin:margin,maxItems:maxitem,minItems:minitem,prevText:"<i class='icon-arrow-1-left'></i>",nextText:"<i class='icon-arrow-1-right'></i>",});}
$('.vibe_carousel.flexslider .woocommerce').each(function(){var $this=$(this);if($this.is(":visible")){v_carousel_fx($this);}});$('#prev_results a').on('click',function(event){event.preventDefault();$(this).toggleClass('show');$('.prev_quiz_results').toggleClass('show');});});jQuery(document).ready(function($){var $container=$('#filtercontainer'),filters={};$container.isotope({itemSelector:'.filteritem',});$('.filters a').click(function(){var $this=$(this);if($this.hasClass('active')){return;}
var $optionSet=$this.parents('.option-set');$optionSet.find('.active').removeClass('active');$this.addClass('active');var group=$optionSet.attr('data-filter-group');filters[group]=$this.attr('data-filter-value');var isoFilters=[];for(var prop in filters){isoFilters.push(filters[prop]);}
var selector=isoFilters.join('');$container.isotope({filter:selector});return false;});});jQuery(document).ready(function($){$('.inmenu').each(function(){var inmenu_top=$('.inmenu').offset().top-40;var footer_top=$('footer').offset().top-Math.round($(window).height()/2)-90;$(window).scroll(function(){var top=$(window).scrollTop();if(top>inmenu_top&&top<footer_top){$('.inmenu').addClass('affix');}else{$('.inmenu').removeClass('affix');}});});});jQuery(document).ready(function($){var lastId;var topMenu=$(".scrollmenu");var topMenuHeight=0;var menuItems=topMenu.find("a"),scrollItems=menuItems.map(function(){var item=$($(this).attr("href"));if(item.length){return item;}});menuItems.click(function(e){e.preventDefault();var href=$(this).attr("href"),offsetTop=href==="#"?0:$(href).offset().top-topMenuHeight+1;$('html, body').stop().animate({scrollTop:offsetTop},800);});$(window).scroll(function()
{var fromTop=$(this).scrollTop()+25;var cur=scrollItems.map(function(){if($(this).offset().top<fromTop)
return this;});cur=cur[cur.length-1];var id=cur&&cur.length?cur[0].id:"";if(lastId!==id){lastId=id;menuItems.parent().removeClass("active");menuItems.filter("[href=#"+id+"]").parent().addClass("active");}
$('.animate').filter(":onScreen").not('.load').each(function(i){var $this=$(this);var ind=i*100;var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$this.offset().top;if(docViewBottom>=elemTop){setTimeout(function(){$this.addClass('load');},ind);}});});});jQuery(document).ready(function($){$('.checkout_steps li').click(function(){var index=$(this).index();if(index<($('.checkout_steps li').length-1)&&index>0){$('.step').fadeOut(200);$('.step.step'+index).fadeIn(200);$('.step.step'+index).addClass('activated');$('.checkout_steps').find('.active').removeClass('active');$('.checkout_steps li:lt('+index+')').addClass('active');$(this).addClass('active');}});$('.step').each(function(){if($(this).hasClass('step5')){$('.checkout_steps li').addClass('active');$(this).show(100);}});$('.proceed  .btn').live("click",function(event){event.preventDefault();var $this=$(this);var isFormValid=true;$this.parent().parent().find(".validate-required input.input-text ").each(function(){if($.trim($(this).val()).length==0){$(this).addClass("highlight");isFormValid=false;return false;}else{$(this).removeClass("highlight");isFormValid=true;}});var index=$this.attr('rel');if(isFormValid||index==4){$('.step').fadeOut(200);$('.step.step'+index).fadeIn(200);$('.step.step'+index).addClass('activated');$('.checkout_steps').find('.active').removeClass('active');$('.checkout_steps li:lt('+index+')').addClass('active');$('.checkout_steps li:eq('+index+')').addClass('active');}else{alert(wplms_strings.wplms_woocommerce_validate);}});$('body').on('updated_checkout',function(){if($('.step.step3').hasClass('activated')){$('.step.step3').fadeIn(100);}});$('.minmax').click(function(event){event.preventDefault();$(this).parent().toggleClass('show');$(this).find('i').toggleClass('icon-minus');});});jQuery(document).ready(function($){$(".repeatablelist").each(function(){$(this).sortable({handle:'.sort_handle'});});$('.add_repeatable').click(function(){var repeatablelist=$(this).parent().find('.repeatablelist');var lastitem=$(this).parent().find('.repeatablelist li:last-child');var cloneditem=lastitem.clone();var name=cloneditem.find('.option_text').attr('rel-name');cloneditem.find('.option_text').attr('name',name);repeatablelist.append(cloneditem);});$('.print_results').click(function(event){event.preventDefault();$('.quiz_result').print();});});jQuery(window).load(function($){NProgress.done();});})(jQuery);